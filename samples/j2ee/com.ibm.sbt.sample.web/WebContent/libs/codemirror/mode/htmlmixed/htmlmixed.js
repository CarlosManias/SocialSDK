/*  (c) Copyright IBM Corp. 2010 - Licensed under the Apache License, Version 2.0 */

CodeMirror.defineMode("htmlmixed",function(_1){var _2=CodeMirror.getMode(_1,{name:"xml",htmlMode:true});var _3=CodeMirror.getMode(_1,"javascript");var _4=CodeMirror.getMode(_1,"css");function _5(_6,_7){var _8=_2.token(_6,_7.htmlState);if(/(?:^|\s)tag(?:\s|$)/.test(_8)&&_6.current()==">"&&_7.htmlState.context){if(/^script$/i.test(_7.htmlState.context.tagName)){_7.token=_9;_7.localState=_3.startState(_2.indent(_7.htmlState,""));}else{if(/^style$/i.test(_7.htmlState.context.tagName)){_7.token=_a;_7.localState=_4.startState(_2.indent(_7.htmlState,""));}}}return _8;};function _b(_c,_d,_e){var _f=_c.current();var _10=_f.search(_d),m;if(_10>-1){_c.backUp(_f.length-_10);}else{if(m=_f.match(/<\/?$/)){_c.backUp(_f.length);if(!_c.match(_d,false)){_c.match(_f[0]);}}}return _e;};function _9(_11,_12){if(_11.match(/^<\/\s*script\s*>/i,false)){_12.token=_5;_12.localState=null;return _5(_11,_12);}return _b(_11,/<\/\s*script\s*>/,_3.token(_11,_12.localState));};function _a(_13,_14){if(_13.match(/^<\/\s*style\s*>/i,false)){_14.token=_5;_14.localState=null;return _5(_13,_14);}return _b(_13,/<\/\s*style\s*>/,_4.token(_13,_14.localState));};return {startState:function(){var _15=_2.startState();return {token:_5,localState:null,mode:"html",htmlState:_15};},copyState:function(_16){if(_16.localState){var _17=CodeMirror.copyState(_16.token==_a?_4:_3,_16.localState);}return {token:_16.token,localState:_17,mode:_16.mode,htmlState:CodeMirror.copyState(_2,_16.htmlState)};},token:function(_18,_19){return _19.token(_18,_19);},indent:function(_1a,_1b){if(_1a.token==_5||/^\s*<\//.test(_1b)){return _2.indent(_1a.htmlState,_1b);}else{if(_1a.token==_9){return _3.indent(_1a.localState,_1b);}else{return _4.indent(_1a.localState,_1b);}}},electricChars:"/{}:",innerMode:function(_1c){var _1d=_1c.token==_5?_2:_1c.token==_9?_3:_4;return {state:_1c.localState||_1c.htmlState,mode:_1d};}};},"xml","javascript","css");CodeMirror.defineMIME("text/html","htmlmixed");