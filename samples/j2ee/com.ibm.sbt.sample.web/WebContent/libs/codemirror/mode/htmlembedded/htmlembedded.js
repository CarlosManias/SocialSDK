/*  (c) Copyright IBM Corp. 2010 - Licensed under the Apache License, Version 2.0 */

CodeMirror.defineMode("htmlembedded",function(_1,_2){var _3=_2.scriptStartRegex||/^<%/i,_4=_2.scriptEndRegex||/^%>/i;var _5,_6;function _7(_8,_9){if(_8.match(_3,false)){_9.token=_a;return _5.token(_8,_9.scriptState);}else{return _6.token(_8,_9.htmlState);}};function _a(_b,_c){if(_b.match(_4,false)){_c.token=_7;return _6.token(_b,_c.htmlState);}else{return _5.token(_b,_c.scriptState);}};return {startState:function(){_5=_5||CodeMirror.getMode(_1,_2.scriptingModeSpec);_6=_6||CodeMirror.getMode(_1,"htmlmixed");return {token:_2.startOpen?_a:_7,htmlState:CodeMirror.startState(_6),scriptState:CodeMirror.startState(_5)};},token:function(_d,_e){return _e.token(_d,_e);},indent:function(_f,_10){if(_f.token==_7){return _6.indent(_f.htmlState,_10);}else{if(_5.indent){return _5.indent(_f.scriptState,_10);}}},copyState:function(_11){return {token:_11.token,htmlState:CodeMirror.copyState(_6,_11.htmlState),scriptState:CodeMirror.copyState(_5,_11.scriptState)};},electricChars:"/{}:",innerMode:function(_12){if(_12.token==_a){return {state:_12.scriptState,mode:_5};}else{return {state:_12.htmlState,mode:_6};}}};},"htmlmixed");CodeMirror.defineMIME("application/x-ejs",{name:"htmlembedded",scriptingModeSpec:"javascript"});CodeMirror.defineMIME("application/x-aspx",{name:"htmlembedded",scriptingModeSpec:"text/x-csharp"});CodeMirror.defineMIME("application/x-jsp",{name:"htmlembedded",scriptingModeSpec:"text/x-java"});CodeMirror.defineMIME("application/x-erb",{name:"htmlembedded",scriptingModeSpec:"ruby"});