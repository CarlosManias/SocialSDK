/*  (c) Copyright IBM Corp. 2010 - Licensed under the Apache License, Version 2.0 */

(function(){function _1(cm,_2,_3){var _4=cm.getWrapperElement();var _5;_5=_4.appendChild(document.createElement("div"));if(_3){_5.className="CodeMirror-dialog CodeMirror-dialog-bottom";}else{_5.className="CodeMirror-dialog CodeMirror-dialog-top";}_5.innerHTML=_2;return _5;};CodeMirror.defineExtension("openDialog",function(_6,_7,_8){var _9=_1(this,_6,_8&&_8.bottom);var _a=false,me=this;function _b(){if(_a){return;}_a=true;_9.parentNode.removeChild(_9);};var _c=_9.getElementsByTagName("input")[0],_d;if(_c){CodeMirror.on(_c,"keydown",function(e){if(e.keyCode==13||e.keyCode==27){CodeMirror.e_stop(e);_b();me.focus();if(e.keyCode==13){_7(_c.value);}}});_c.focus();CodeMirror.on(_c,"blur",_b);}else{if(_d=_9.getElementsByTagName("button")[0]){CodeMirror.on(_d,"click",function(){_b();me.focus();});_d.focus();CodeMirror.on(_d,"blur",_b);}}return _b;});CodeMirror.defineExtension("openConfirm",function(_e,_f,_10){var _11=_1(this,_e,_10&&_10.bottom);var _12=_11.getElementsByTagName("button");var _13=false,me=this,_14=1;function _15(){if(_13){return;}_13=true;_11.parentNode.removeChild(_11);me.focus();};_12[0].focus();for(var i=0;i<_12.length;++i){var b=_12[i];(function(_16){CodeMirror.on(b,"click",function(e){CodeMirror.e_preventDefault(e);_15();if(_16){_16(me);}});})(_f[i]);CodeMirror.on(b,"blur",function(){--_14;setTimeout(function(){if(_14<=0){_15();}},200);});CodeMirror.on(b,"focus",function(){++_14;});}});})();