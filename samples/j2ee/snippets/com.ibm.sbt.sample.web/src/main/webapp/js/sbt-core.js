//>>built
require({cache:{"sbt/main":function(){define("sbt/Cache,sbt/DebugTransport,sbt/Endpoint,sbt/ErrorTransport,sbt/Gadget,sbt/GadgetTransport,sbt/IWidget,sbt/Jsonpath,sbt/MockTransport,sbt/Portlet,sbt/Promise,sbt/Proxy,sbt/_config,sbt/compat,sbt/config,sbt/declare,sbt/defer,sbt/dom,sbt/emailService,sbt/i18n,sbt/itemFactory,sbt/json,sbt/lang,sbt/log,sbt/pathUtil,sbt/ready,sbt/stringUtil,sbt/text,sbt/url,sbt/util,sbt/validate,sbt/xml,sbt/xpath,sbt/xsl,sbt/_bridge/IFrameTransport,sbt/_bridge/RequestTransport,sbt/_bridge/Transport,sbt/_bridge/declare,sbt/_bridge/dom,sbt/_bridge/i18n,sbt/_bridge/json,sbt/_bridge/lang,sbt/_bridge/ready,sbt/_bridge/text,sbt/authenticator/Basic,sbt/authenticator/GadgetOAuth,sbt/authenticator/OAuth,sbt/authenticator/SSO,sbt/base/AtomEntity,sbt/base/BaseConstants,sbt/base/BaseEntity,sbt/base/BaseService,sbt/base/ConnEntity,sbt/base/DataHandler,sbt/base/JsonDataHandler,sbt/base/MyAtomEntity,sbt/base/VCardDataHandler,sbt/base/XmlDataHandler,sbt/base/core,sbt/connections/ActivityConstants,sbt/connections/ActivityService,sbt/connections/ActivityStreamConstants,sbt/connections/ActivityStreamService,sbt/connections/BlogConstants,sbt/connections/BlogService,sbt/connections/BookmarkConstants,sbt/connections/BookmarkService,sbt/connections/CommunityConstants,sbt/connections/CommunityService,sbt/connections/ConnectionsConstants,sbt/connections/FileConstants,sbt/connections/FileService,sbt/connections/FollowConstants,sbt/connections/FollowService,sbt/connections/ForumConstants,sbt/connections/ForumService,sbt/connections/ProfileAdminService,sbt/connections/ProfileConstants,sbt/connections/ProfileService,sbt/connections/SearchConstants,sbt/connections/SearchService,sbt/connections/Tag,sbt/connections/WikiConstants,sbt/connections/WikiService,sbt/data/AtomReadStore,sbt/nls/Endpoint,sbt/nls/ErrorTransport,sbt/nls/loginForm,sbt/nls/messageSSO,sbt/nls/util,sbt/nls/validate,sbt/smartcloud/ProfileConstants,sbt/smartcloud/ProfileService,sbt/smartcloud/Subscriber,sbt/store/AtomStore,sbt/store/parameter,sbt/_bridge/ui/BasicAuth_Dialog,sbt/_bridge/ui/OAuth10_Dialog,sbt/_bridge/ui/SSO_Dialog,sbt/authenticator/nls/SSO,sbt/authenticator/templates/ConnectionsLogin.html,sbt/authenticator/templates/ConnectionsLoginDialog.html,sbt/authenticator/templates/Message.html,sbt/authenticator/templates/MessageDialogSSO.html,sbt/authenticator/templates/MessageSSO.html,sbt/authenticator/templates/login.html,sbt/authenticator/templates/login,sbt/authenticator/templates/loginDialog.html,sbt/authenticator/templates/messageSSO,sbt/connections/nls/CommunityService,sbt/connections/nls/ConnectionsService,sbt/connections/nls/ProfileService".split(","),
function(){})},"sbt/Cache":function(){define(["./declare"],function(g){return g(null,{constructor:function(e){this.limit=e;this._cache={};this.tail=this.head=null;this.count=0},get:function(e){if(e=this._cache[e]){if(this.head!=e){if(e.prev)e.prev.next=e.next;e.next?e.next.prev=e.prev:this.tail=e.prev;e.next=this.head;this.head.prev=e;e.prev=null;this.head=e}return e.value}return null},put:function(e,c){this._cache[e]&&(this.remove(e),this.count--);var d=this._cache[e]={key:e,value:c};this.count==
this.limit&&(this.remove(this.tail.key),this.count--);d.next=this.head;d.next?d.next.prev=d:this.tail=d;this.head=d;d.prev=null;this.count++},remove:function(e){var c=this._cache[e];if(c)c.next?c.next.prev=c.prev:this.tail=c.prev,c.prev?c.prev.next=c.next:this.head=c.next,c.next=c.prev=null,delete this._cache[e],this.count--},browse:function(e){if(e)for(var c in this._cache){var d=this._cache[c];if(d=e(d.key,d.value))return d}return null}})})},"sbt/declare":function(){define(["./_bridge/declare"],
function(g){return g})},"sbt/_bridge/declare":function(){define(["dojo/_base/declare"],function(g){return g})},"sbt/DebugTransport":function(){define("./declare,./lang,./dom,./json,./stringUtil,sbt/_bridge/Transport".split(","),function(g,e,c,d,b,a){return g(a,{responseMap:{},index:0,createResponse:function(a,k,i,e){var m=this.inherited(arguments,[a,k,i,e]),n=c.byId("mockData");if(n){"json"==k.handleAs&&(i=d.jsonBeanStringify(i));var g=document.createElement("pre");n.appendChild(g);var n=m.status||
0,f=k.handleAs||"text",t=k.method||"GET",o=m.getHeader("Location")||"",u=i instanceof Error;u&&(i=m.data.responseText||m.data.response.text||i);var s=a,h=b.hashCode(s);this.responseMap[h]?(this.responseMap[h]+=1,s+="#"+this.responseMap[h]):this.responseMap[h]=1;g.appendChild(c.createTextNode("<script type='text/template' status='"+n+"' id='"+s+"' index='"+this.index+"' handleAs='"+f+"' method='"+t+"' location='"+o+"' error='"+u+"'>\n"+i+"\n<\/script>"));this.index++}return m}})})},"sbt/lang":function(){define(["./_bridge/lang"],
function(g){return g})},"sbt/_bridge/lang":function(){define(["dojo/_base/lang"],function(g){return{mixin:function(e,c){return g.mixin.apply(this,arguments)},isArray:function(e){return g.isArray(e)},isString:function(e){return g.isString(e)},isFunction:function(e){return"function"==typeof e},isObject:function(e){return"object"==typeof e},clone:function(e){return g.clone(e)},concatPath:function(){var e=arguments;1==e.length&&this.isArray(e[0])&&(e=e[0]);for(var c="",d=0;d<e.length;d++){var b=e[d].toString();
c&&(c+="/");c+="/"==b.charAt(0)?b.substring(1):b}return c},trim:function(e){return g.trim(e)}}})},"sbt/dom":function(){define(["./_bridge/dom"],function(g){return g})},"sbt/_bridge/dom":function(){define(["dojo/dom","dojo/_base/window","dojo/dom-construct","dojo/dom-class"],function(g,e,c){return{byId:function(c){return g.byId(c)},createTextNode:function(c){return e.doc.createTextNode(c)},create:function(d,b,a){return c.create(d,b,a)},destroy:function(d){return c.destroy(d)},removeAll:function(c){if(c=
this.byId(c))for(;c.firstChild;)c.removeChild(c.firstChild);return c},setText:function(c,b){if(c=this.byId(c))this.removeAll(c),c.appendChild(this.createTextNode(b));return c},setAttr:function(c,b,a){(c=this.byId(c))&&(a?c.setAttribute(b,a):c.removeAttribute(b));return c}}})},"sbt/json":function(){define(["./_bridge/json","./_bridge/lang","./log","./stringUtil"],function(g,e,c,d){return{parse:function(b){return(JSON||g).parse(b)},stringify:function(b){return(JSON||g).stringify(b)},jsonBeanStringify:function(b){if(e.isArray(b)){for(var a=
"[",j=0;j<b.length;j++)a+=this._jsonBeanStringify(b[j]),j+1<b.length&&(a+=",\n");return a+"]"}return this._jsonBeanStringify(b)},jsonBean:function(b){if(e.isArray(b)){for(var a=[],j=0;j<b.length;j++)a.push(this._jsonBean(b[j]));return a}return this._jsonBean(b)},_jsonBeanStringify:function(b){return this._stringifyCyclicCheck(this.jsonBean(b),4)},_stringifyCyclicCheck:function(b,a){var j=[],c=this;return(JSON||g).stringify(b,function(a,b){if(c._isDomNode(b))return{};if(e.isObject(b)){if(0<=j.indexOf(b)&&
!c._isBuiltin(b))return;j.push(b)}else if(e.isFunction(b))return;return b},a)},_jsonBean:function(b,a){a||(a=[]);if(!(0<=a.indexOf(b))){a.push(b);var j={},c;for(c in b){var d=this._getObjectValue(b,c,a);if(d||!isNaN(d))j[c]=d}return j}},_notReserved:function(b){return"isInstanceOf"!==b&&"getInherited"!==b},_getObjectValue:function(b,a,c){if(e.isFunction(b[a])){if((d.startsWith(a,"get")||d.startsWith(a,"is"))&&this._notReserved(a))try{var k=b[a].apply(b);return k&&!this._isBuiltin(k)&&e.isObject(k)?
this._jsonBean(k,c):k}catch(i){}}else if(!d.startsWith(a,"_")&&!d.startsWith(a,"-"))return b[a]},_isBuiltin:function(b){return b instanceof Date||b instanceof Number||b instanceof Boolean||e.isArray(b)},_isDomNode:function(b){return b&&b.nodeName&&b.nodeType&&"number"===typeof b.nodeType&&"string"===typeof b.nodeName}}})},"sbt/_bridge/json":function(){define(["dojo/json"],function(g){return g})},"sbt/log":function(){define(["./stringUtil"],function(g){var e=function(){return sbt.Properties["js.logging.enabled"]?
"true"==sbt.Properties["js.logging.enabled"].toLowerCase():!0},c={DEBUG:1,INFO:2,WARN:3,ERROR:4},d=function(){return c[sbt.Properties["js.logging.level"]?sbt.Properties["js.logging.level"]:"DEBUG"]};return{setLevel:function(b){d=c[b]},setEnabled:function(b){e=b},debug:function(){if(e&&!(1<d)&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=g.substitute(a,b);console.debug?console.debug(b):console.log("DEBUG : "+b)}},info:function(){if(e&&!(2<d)&&console&&
0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=g.substitute(a,b);console.info?console.info(b):console.log("INFO : "+b)}},warn:function(){if(e&&!(3<d)&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=g.substitute(a,b);console.warn?console.warn(b):console.log("WARN : "+b)}},error:function(){if(e&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=g.substitute(a,b);console.error?
console.error(b):console.log("ERROR : "+b)}},exception:function(){if(e&&console&&0<arguments.length){var b=Array.prototype.slice.call(arguments),a=b[0],b=b.slice(1),b=g.substitute(a,b);console.error?console.error("EXCEPTION : "+b):console.log("EXCEPTION : "+b)}}}})},"sbt/stringUtil":function(){define(["./xml"],function(g){var e=RegExp("{-?[0-9]+}","g");return{substitute:function(c,d,b){return c&&d?c.replace(e,function(a){a=parseInt(a.substring(1,a.length-1));return 0<=a?d[a]?d[a]:b?"":"undefined":
-1==a?"{":-2==a?"}":""}):c},replace:function(c,d){return c&&d?c.replace(/{(\w*)}/g,function(b,a){return d.hasOwnProperty(a)?g.encodeXmlEntry(d[a]):""}):c},trim:function(c){return c?c.replace(/^\s+|\s+$/g,""):c},startsWith:function(c,d){return c.length>=d.length&&c.substring(0,d.length)==d},endsWith:function(c,d){return c.length>=d.length&&c.substring(c.length-d.length)==d},transform:function(c,d,b,a){return c.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(c,k){var i=d[k]||"";if("function"==
typeof i)try{i=i.apply(a,[d])}catch(e){i="ERROR:"+k+" "+e}b&&(i=b.call(a,i,k));return"undefined"==typeof i||null==i?"":i.toString()})},hashCode:function(c){if(0==c.length)return 0;var d=0,b,a;for(b=0,l=c.length;b<l;b++)a=c.charCodeAt(b),d=(d<<5)-d+a,d|=0;return d}}})},"sbt/xml":function(){define(["./lang"],function(g){var e={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;"},c={"&amp;":"&","&quot;":'"',"&lt;":"<","&gt;":">"};return{parse:function(c){var b=null;try{"Microsoft Internet Explorer"==navigator.appName?
(b=new ActiveXObject("Microsoft.XMLDOM"),b.async="false",b.loadXML(c)):window.DOMParser&&(parser=new DOMParser,b=parser.parseFromString(c,"text/xml"))}catch(a){console.log(a.message)}return b},asString:function(c){return null==c?"":window.ActiveXObject?c.xml:(new XMLSerializer).serializeToString(c)},getText:function(c){return"Microsoft Internet Explorer"==navigator.appName?c.text:c.textContent},encodeXmlEntry:function(c){g.isArray(c)&&(c=c.join());g.isString(c)||(c=c.toString());return c.replace(/([\&"<>])/g,
function(b,a){return e[a]})},decodeXmlEntry:function(d){return d.replace(/(&quot;|&lt;|&gt;|&amp;)/g,function(b,a){return c[a]})}}})},"sbt/_bridge/Transport":function(){define("dojo/_base/declare,dojo/_base/xhr,dojo/_base/lang,dojox/xml/parser,sbt/util,sbt/Promise".split(","),function(g,e,c,d,b,a){return g(null,{request:function(b,c){var d=c.method||"GET",d=d.toUpperCase(),e=this.createQuery(c.query),m=b;m&&e&&(m+=(~m.indexOf("?")?"&":"?")+e);e={url:m,handleAs:c.handleAs||"text"};if(c.headers)e.headers=
c.headers;m=!1;if("PUT"==d)e.putData=c.data||null,m=!0;else if("POST"==d)e.postData=c.data||null,m=!0;var n=new a;n.response=new a;var g=this;e.handle=function(a,d){a instanceof Error?(a.response=g.createResponse(b,c,a,d),n.rejected(a),n.response.rejected(a)):(n.fulfilled(a),n.response.fulfilled(g.createResponse(b,c,a,d)))};this.xhr(d,e,m);return n},createResponse:function(a,b,c,d){var e=d._ioargs.xhr;return{url:a,options:b,data:c,text:"text"==(b.handleAs||"text")?c:null,status:e.status,getHeader:function(a){return e.getResponseHeader(a)},
xhr:e,_ioargs:d._ioargs}},createQuery:function(a){if(!a)return null;var b=[],c;for(c in a){var d=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")},xhr:function(a,b,d){var q=c.mixin({},b),m=this;q.handle=function(a,c){m.handleResponse(a,c,b)};e(a,q,d)},handleResponse:function(a,c,d){var e=a;a instanceof Error&&(e=this.createError(a,c));try{var m={args:d,headers:b.getAllResponseHeaders(c.xhr),_ioargs:c};d.handle(e,m)}catch(n){console.log(n)}},createError:function(a){var b=
Error();b.code=a.status||a.response&&a.response.status||400;b.cause=a;if(a.response)b.response=c.mixin({},a.response);return b}})})},"sbt/util":function(){define(["./lang","sbt/i18n!sbt/nls/util","./log"],function(g,e,c){function d(b,a){if(a&&(a.error||a.handle)){if(a.error)try{a.error(b)}catch(j){c.error(e.notifyError_catchError,j)}if(a.handle)try{a.handle(b)}catch(d){c.error(e.notifyError_catchError,d)}}else c.error(e.notifyError_console,b.code,b.message)}return{notifyError:d,isEmptyObject:function(b){var a=
!0,c;for(c in b)if(b.hasOwnProperty(c)){a=!1;break}return a},checkObjectClass:function(b,a,j,k){return b.declaredClass!=a?(k?d({code:400,message:j},k):c(j),!1):!0},checkNullValue:function(b,a,j){if(b)return!0;j?d({code:400,message:a},j):c(a);return!1},minVersion:function(b,a){for(var c=b.split("."),d=a.split("."),i=0;i<c.length;++i){if(d.length==i)return!1;if(c[i]!=d[i])return c[i]>d[i]?!1:!0}return!0},getAllResponseHeaders:function(b){var a={};try{var c=b.getAllResponseHeaders();if(c)for(var d=c.split("\n"),
b=0;b<d.length;b++){var i=d[b].indexOf(":"),e=g.trim(d[b].substring(0,i)),m=g.trim(d[b].substring(i+1));0<e.length&&(a[e]=m)}}catch(n){console.log(n)}return a},createQuery:function(b,a){if(!b)return null;var c=a;c||(c=",");var d=[],i;for(i in b){var e=b[i];d.push(encodeURIComponent(i)+"="+encodeURIComponent(e))}return d.join(c)},splitQuery:function(b,a){var c,d={},i,e,m,b=b.replace("?","");e=b.split(a);m=e.length;for(c=0;c<m;c++)e[c]&&(i=e[c].split("="),d[i[0]]=i[1]);return d},getJavaScriptLibrary:function(){var b=
"Unknown";window.dojo?dojo.version&&(b="Dojo "+dojo.version):define&&define.amd&&define.amd.vendor&&"dojotoolkit.org"===define.amd.vendor?require(["dojo/_base/kernel"],function(a){b="Dojo AMD "+a.version}):window.jQuery&&(b="JQuery "+jQuery.fn.jquery);return b}}})},"sbt/_bridge/i18n":function(){define(["dojo/i18n","dojo/date/locale"],function(g,e){return{load:function(c,d,b){g.load(c,d,b)},getLocalizedTime:function(c){return e.format(c,{selector:"time",formatLength:"short"})},getLocalizedDate:function(c){return e.format(c,
{selector:"date",formatLength:"medium"})}}})},"sbt/Promise":function(){define(["./declare","./log"],function(g){var e=g(null,{_isRejected:!1,_isFulfilled:!1,_isCanceled:!1,_deferreds:null,response:null,error:null,constructor:function(c){c?c instanceof Error?this.rejected(c):this.fulfilled(c):this._deferreds=[]},then:function(c,d){var b=new e;this._isFulfilled?this._fulfilled(c,d,b,this.data):this._isRejected?this._rejected(d,b,this.error):this._deferreds.push([c,d,b]);return b},cancel:function(){this._isCanceled=
!0},isResolved:function(){return this._isRejected||this._isFulfilled},isRejected:function(){return this._isRejected},isFulfilled:function(){return this._isFulfilled},isCanceled:function(){return this._isCanceled},fulfilled:function(c){if(!this._isCanceled&&(this._isFulfilled=!0,this.data=c,this._deferreds))for(;0<this._deferreds.length;){var d=this._deferreds.shift();this._fulfilled(d[0],d[1],d[2],c)}},rejected:function(c){if(!this._canceled&&(this._isRejected=!0,this.error=c,this._deferreds))for(;0<
this._deferreds.length;){var d=this._deferreds.shift();this._rejected(d[1],d[2],c)}},_fulfilled:function(c,d,b,a){if(c)try{var j=c(a);j instanceof e?j.then(function(a){b.fulfilled(a)},function(a){b.rejected(a)}):b.fulfilled(j)}catch(k){b.rejected(k)}else b.fulfilled(a)},_rejected:function(c,d,b){if(c)try{var a=c(b);a||d.rejected(a)}catch(j){d.rejected(j)}else d.rejected(b)}});return e})},"sbt/Endpoint":function(){define("./declare,./lang,./ErrorTransport,./Promise,./pathUtil,./compat,./log,./stringUtil,sbt/i18n!sbt/nls/Endpoint,./xml".split(","),
function(g,e,c,d,b,a,j,k,i,q){return g(null,{baseUrl:null,proxy:null,proxyPath:null,transport:null,authenticator:null,authType:null,loginUi:"",loginPage:null,dialogLoginPage:null,autoAuthenticate:null,isAuthenticated:!1,authenticationErrorCode:null,constructor:function(a){e.mixin(this,a||{})},request:function(a,c){var j=a;0!=j.indexOf("http")&&(j=this.proxy?this.proxy.rewriteUrl(this.baseUrl,a,this.proxyPath):b.concat(this.baseUrl,a));c||(c={method:"GET",handleAs:"text"});var f=new d;f.response=new d;
var k=this;this.transport.request(j,c).response.then(function(b){"form"==k.authType&&k._isAuthRequiredFormBasedEP(b,c)&&k._authenticate(a,c,f);f.fulfilled(b.data);f.response.fulfilled(b)},function(b){if(!b.message)b.message=k.getErrorMessage(b.cause);k._isAuthRequired(b,c).then(function(j){j?k._authenticate(a,c,f):(f.rejected(b),f.response.rejected(b))},function(a){f.rejected(a);f.response.rejected(a)})});return f},xhr:function(a,c,j){var f=this,d=e.mixin({},c);if(!d.url)d.url=this.proxy?this.proxy.rewriteUrl(this.baseUrl,
d.serviceUrl,this.proxyPath):b.concat(this.baseUrl,d.serviceUrl);delete d.load;delete d.error;d.handle=function(b,k){if(b instanceof Error){if(!b.message)b.message=f.getErrorMessage(b.cause);var e=!1;403==b.code&&403==f.authenticationErrorCode&&f.isAuthenticated&&(e=!0);if(401==b.code||!e&&b.code==f.authenticationErrorCode)if(e=d.autoAuthenticate||f.autoAuthenticate,void 0==e&&(e=!0),e&&f.authenticator&&(options={dialogLoginPage:f.loginDialogPage,loginPage:f.loginPage,transport:f.transport,proxy:f.proxy,
proxyPath:f.proxyPath,loginUi:d.loginUi||f.loginUi,name:f.name,callback:function(){f.xhr(a,c,j)}},f.authenticator.authenticate(options)))return;f._notifyError(c,b,k)}else f._notifyResponse(c,b,k)};this.transport.xhr(a,d,j)},xhrGet:function(a){this.xhr("GET",a)},xhrPost:function(a){this.xhr("POST",a,!0)},xhrPut:function(a){this.xhr("PUT",a,!0)},xhrDelete:function(a){this.xhr("DELETE",a)},authenticate:function(a){var b=new d,a=a||{};a.forceAuthentication||!this.isAuthenticated?this.authenticator.authenticate({dialogLoginPage:this.loginDialogPage,
loginPage:this.loginPage,transport:this.transport,proxy:this.proxy,proxyPath:this.proxyPath,loginUi:a.loginUi||this.loginUi,name:this.name,callback:function(a){b.fulfilled(a)},cancel:function(a){b.rejected(a)}}):b.fulfilled(!0);return b},logout:function(){var a=new d,b=this,c=this.proxy.proxyUrl;this.transport.xhr("POST",{handleAs:"json",url:c.substring(0,c.lastIndexOf("/"))+"/authHandler/"+this.proxyPath+"/logout",load:function(c){b.isAuthenticated=!1;a.fulfilled(c)},error:function(c){b.isAuthenticated=
!1;a.rejected(c)}},!0);return a},isAuthenticated:function(){var a=new d,b=this,c=this.proxy.proxyUrl;this.transport.xhr("POST",{handleAs:"json",url:c.substring(0,c.lastIndexOf("/"))+"/authHandler/"+this.proxyPath+"/isAuth",load:function(c){b.isAuthenticated=!0;a.fulfilled(c)},error:function(b){a.rejected(b)}},!0);return a},isAuthenticationValid:function(){var a=new d,b=this,c=this.proxy.proxyUrl;this.transport.xhr("POST",{handleAs:"json",url:c.substring(0,c.lastIndexOf("/"))+"/authHandler/"+this.proxyPath+
"/isAuthValid",load:function(c){b.isAuthenticated=c.result;a.fulfilled(c)},error:function(b){a.rejected(b)}},!0);return a},_notifyError:function(a,b,c){if(a.handle)try{a.handle(b,c)}catch(f){}if(a.error)try{a.error(b,c)}catch(j){}},_notifyResponse:function(a,b,c){if(a.handle)try{a.handle(b,c)}catch(f){}if(a.load)try{a.load(b,c)}catch(j){}},_authenticate:function(a,b,c){var f=this;return this.authenticator.authenticate({dialogLoginPage:this.loginDialogPage,loginPage:this.loginPage,transport:this.transport,
proxy:this.proxy,proxyPath:this.proxyPath,loginUi:b.loginUi||this.loginUi,name:this.name,callback:function(){f.request(a,b).response.then(function(a){c.fulfilled(a.data);c.response.fulfilled(a)},function(a){c.rejected(a);c.response.rejected(a)})},cancel:function(){f._authRejected=!0;var a=Error();a.message="Authentication is required and has failed or has not yet been provided.";a.code=401;c.rejected(a);c.response.rejected(a)}})},_isAuthRequired:function(a,b){var c=new d,f=a.response.status||null,
f=401==f||f==this.authenticationErrorCode;if(this.isAuthenticated)f?this.isAuthenticationValid().then(function(a){c.fulfilled(!a.result)},function(a){c.rejected(a)}):c.fulfilled(!1);else{var j=b.autoAuthenticate||this.autoAuthenticate;void 0==j&&(j=!0);c.fulfilled(f&&j&&this.authenticator&&!this._authRejected)}return c},_isAuthRequiredFormBasedEP:function(a){return 200==a.status&&"text/html"==a.getHeader("Content-Type")?!0:!1},getErrorMessage:function(a){var b=a.responseText||a.response&&a.response.text;
if(b){try{var c=q.parse(b).getElementsByTagName("message");c&&0!=c.length&&(b=c[0].text||c[0].textContent,b=e.trim(b))}catch(f){}return b.replace(/(\r\n|\n|\r)/g,"")?b:a.message}return a}})})},"sbt/ErrorTransport":function(){define("./declare,./lang,./Promise,./stringUtil,./log,sbt/i18n!sbt/nls/ErrorTransport".split(","),function(g,e,c,d,b,a){return g(null,{_called:!1,_endpointName:null,_message:null,constructor:function(b,c){this._endpointName=b;this._message=c?c:d.substitute(a.endpoint_not_available,
[b])},request:function(){if(!this._called)alert(this._message),this._called=!0;var a=new c,b=Error(this._message);b.status=400;a.rejected(b);return a},xhr:function(a,c){if(!this._called)b.error(this._message),this._called=!0;var d=c.handle,g=c.error;if(e.isFunction(g)||e.isFunction(d)){var m=Error(this._message);m.status=400;e.isFunction(g)&&g(m);e.isFunction(d)&&d(m)}}})})},"sbt/pathUtil":function(){define(["./stringUtil"],function(g){return{concat:function(e,c){if(!e)return c;if(!c)return e;g.endsWith(e,
"/")&&(e=e.substring(0,e.length-1));g.startsWith(c,"/")&&(c=c.substring(1));return e+"/"+c},isAbsolute:function(e){return 0<=e.indexOf("://")}}})},"sbt/compat":function(){define([],function(){if(!Array.prototype.indexOf)Array.prototype.indexOf=function(g,e){for(var c=e||0,d=this.length;c<d;c++)if(this[c]===g)return c;return-1};return{}})},"sbt/Gadget":function(){define(function(){})},"sbt/GadgetTransport":function(){define(["./declare","./lang"],function(g,e){var c={POST:gadgets.io.MethodType.POST,
PUT:gadgets.io.MethodType.PUT,DELETE:gadgets.io.MethodType.DELETE,GET:gadgets.io.MethodType.GET},d={XML:gadgets.io.ContentType.DOM,JSON:gadgets.io.ContentType.JSON,TEXT:gadgets.io.ContentType.TEXT,"JSON-COMMENT-OPTIONAL":gadgets.io.ContentType.JSON,"JSON-COMMENT-FILTERED":gadgets.io.ContentType.JSON,JAVASCRIPT:gadgets.io.ContentType.JSON},b={NONE:gadgets.io.AuthorizationType.NONE,OAUTH:gadgets.io.AuthorizationType.OAUTH,OAUTH2:gadgets.io.AuthorizationType.OAUTH2,SIGNED:gadgets.io.AuthorizationType.SIGNED};
return g(null,{serviceName:null,constructor:function(a){this.serviceName=a.serviceName||null},xhr:function(a,j){if(j.sync)throw Error("Gadget transport does not support synchronous requests.");var k={};k[gadgets.io.RequestParameters.METHOD]=c[a.toUpperCase()]||gadgets.io.MethodType.GET;k[gadgets.io.RequestParameters.CONTENT_TYPE]=d[j.handleAs?j.handleAs.toUpperCase():"TEXT"];k[gadgets.io.RequestParameters.HEADERS]=j.headers||{};k[gadgets.io.RequestParameters.POST_DATA]=this.getPostData(k[gadgets.io.RequestParameters.METHOD],
j.postData||j.putData);j.preventCache&&(k[gadgets.io.RequestParameters.REFRESH_INTERVAL]=0);if(this.serviceName||j.serviceName)k[gadgets.io.RequestParameters.OAUTH_SERVICE_NAME]=this.serviceName||j.serviceName;if(j.authType){var e=j.authType.toUpperCase();k[gadgets.io.RequestParameters.AUTHORIZATION]=b[e]||b.NONE}var g=this,e=this.buildUrl(j);gadgets.io.makeRequest(e,function(a){g.handleResponse(j,a)},k)},handleResponse:function(a,b){if(b.errors&&0<b.errors.length){if(a.error||a.handle){var c=this.createError(b);
this.notifyError(a,c)}}else b.oauthApprovalUrl?this.handleApproval(a,b):this.notifyResponse(a,b)},handleApproval:function(a,b){var c=Error();c.code=401;c.response=e.mixin({},b);this.notifyError(a,c)},notifyResponse:function(a,b){if(a.load||a.handle){var c={args:a,headers:b.headers,_ioargs:b};a.handle&&a.handle(b.data||b.text,c);a.load&&a.load(b.data||b.text,c)}},notifyError:function(a,b){a.handle&&a.handle(b);a.error&&a.error(b)},createError:function(a){var b=Error();b.code=a.rc;b.message=a.errors[0];
b.response=e.mixin({},a);return b},getPostData:function(a,b){return a==gadgets.io.MethodType.POST||a==gadgets.io.MethodType.PUT?b:""},buildUrl:function(a){var b=[],c=a.url;if(a.content){for(name in a.content){var d=encodeURIComponent(name)+"="+encodeURIComponent(a.content[name]);b.push(d)}0<b.length&&(a=b.join("&"),c+=(~c.indexOf("?")?"&":"?")+a)}return c}})})},"sbt/IWidget":function(){define([],function(){sbt.getUserPref=function(){}})},"sbt/Jsonpath":function(){define(["./declare"],function(){return function(g,
e,c){var d={resultType:c&&c.resultType||"VALUE",result:[],normalize:function(a){var b=[];return a.replace(/[\['](\??\(.*?\))[\]']/g,function(a,c){return"[#"+(b.push(c)-1)+"]"}).replace(/'?\.'?|\['?/g,";").replace(/;;;|;;/g,";..;").replace(/;$|'?\]|'$/g,"").replace(/#([0-9]+)/g,function(a,c){return b[c]})},asPath:function(a){for(var a=a.split(";"),b="$",c=1,d=a.length;c<d;c++)b+=/^[0-9*]+$/.test(a[c])?"["+a[c]+"]":"['"+a[c]+"']";return b},store:function(a,b){a&&(d.result[d.result.length]="PATH"==d.resultType?
d.asPath(a):b);return!!a},trace:function(a,b,c){if(a){var a=a.split(";"),e=a.shift(),a=a.join(";");if(b&&b.hasOwnProperty(e))d.trace(a,b[e],c+";"+e);else if("*"===e)d.walk(e,a,b,c,function(a,b,c,j,o){d.trace(a+";"+c,j,o)});else if(".."===e)d.trace(a,b,c),d.walk(e,a,b,c,function(a,b,c,j,o){"object"===typeof j[a]&&d.trace("..;"+c,j[a],o+";"+a)});else if(/,/.test(e))for(var e=e.split(/'?,'?/),g=0,m=e.length;g<m;g++)d.trace(e[g]+";"+a,b,c);else/^\(.*?\)$/.test(e)?d.trace(d.eval(e,b,c.substr(c.lastIndexOf(";")+
1))+";"+a,b,c):/^\?\(.*?\)$/.test(e)?d.walk(e,a,b,c,function(a,b,c,j,o){d.eval(b.replace(/^\?\((.*?)\)$/,"$1"),j[a],a)&&d.trace(a+";"+c,j,o)}):/^(-?[0-9]*):(-?[0-9]*):?([0-9]*)$/.test(e)&&d.slice(e,a,b,c)}else d.store(c,b)},walk:function(a,b,c,d,e){if(c instanceof Array)for(var g=0,n=c.length;g<n;g++)g in c&&e(g,a,b,c,d);else if("object"===typeof c)for(g in c)c.hasOwnProperty(g)&&e(g,a,b,c,d)},slice:function(a,b,c,e){if(c instanceof Array){var g=c.length,m=0,n=g,p=1;a.replace(/^(-?[0-9]*):(-?[0-9]*):?(-?[0-9]*)$/g,
function(a,b,c,d){m=parseInt(b||m);n=parseInt(c||n);p=parseInt(d||p)});m=0>m?Math.max(0,m+g):Math.min(g,m);n=0>n?Math.max(0,n+g):Math.min(g,n);for(a=m;a<n;a+=p)d.trace(a+";"+b,c,e)}},eval:function(a,c){try{return b&&c&&eval(a.replace(/@/g,"_v"))}catch(d){throw new SyntaxError("jsonPath: "+d.message+": "+a.replace(/@/g,"_v").replace(/\^/g,"_a"));}}},b=g;if(e&&g&&("VALUE"==d.resultType||"PATH"==d.resultType))return d.trace(d.normalize(e).replace(/^\$;/,""),g,"$"),d.result.length?d.result:!1}})},"sbt/MockTransport":function(){define("./declare,./lang,./dom,./xml,./json,./stringUtil,./Promise".split(","),
function(g,e,c,d,b,a,j){return g(null,{requestMap:{},request:function(d,e){var g=this.createQuery(e.query);d&&g&&(d+=(~d.indexOf("?")?"&":"?")+g);g=new j;g.response=new j;var m=d,n=a.hashCode(m);this.requestMap[n]?(this.requestMap[n]+=1,m+="#"+this.requestMap[n]):this.requestMap[n]=1;var p=c.byId(m);if(p){m=p.text||p.textContent;"json"==p.getAttribute("handleAs")&&(m=b.parse(m));var n=p.getAttribute("status"),f=p.getAttribute("error");"true"==f?(f=Error(),f.code=Number(n||400),f.message=this.getErrorText(m),
f.response=this.createResponse(d,e,m,Number(n||400),{}),g.rejected(f),g.response.rejected(f)):(f={Location:p.getAttribute("location")},g.fulfilled(m),g.response.fulfilled(this.createResponse(d,e,m,Number(n||200),f)))}else m="Unable to find mock response for: "+d,f=Error(m),f.response={status:400,message:m},g.rejected(f),g.response.rejected(f);return g},createResponse:function(a,b,c,d,j){return{url:a,options:b,data:c,text:"text"==(b.handleAs||"text")?c:null,status:d,getHeader:function(a){return j[a]}}},
createQuery:function(a){if(!a)return null;var b=[],c;for(c in a){var d=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")},getErrorText:function(a){if(a){try{var b=d.parse(a).getElementsByTagName("message");b&&0!=b.length&&(a=b[0].text||b[0].textContent,a=e.trim(a))}catch(c){}return a.replace(/(\r\n|\n|\r)/g,"")}return a}})})},"sbt/Portlet":function(){define([],function(){sbt.getUserPref=function(){}})},"sbt/Proxy":function(){define(["./declare","./lang","./pathUtil"],
function(g,e,c){return g(null,{proxyUrl:null,constructor:function(c){e.mixin(this,c)},rewriteUrl:function(d,b,a){d=b;return this.proxyUrl?(0==d.indexOf("http://")?d="/http/"+d.substring(7):0==d.indexOf("https://")&&(d="/https/"+d.substring(8)),a&&(d=c.concat(a,d)),c.concat(this.proxyUrl,d)):d}})})},"sbt/config":function(){define(["./defer!./_config"],function(g){return g})},"sbt/defer":function(){define([],function(){return{load:function(g,e,c){e([g],function(d){c(d)})}}})},"sbt/emailService":function(){define(["./declare",
"./lang","./config","./_bridge/Transport","./json"],function(g,e,c,d,b){var a=new d;return{send:function(d){var e=c.Properties.serviceUrl+"/mailer",d={method:"POST",data:b.stringify(d),headers:{"Content-Type":"application/json"},handleAs:"json"};return a.request(e,d)}}})},"sbt/i18n":function(){define(["./_bridge/i18n"],function(g){g.getUpdatedLabel=function(e){var e=new Date(e),c=new Date(e.getTime()),d=new Date;return c.setHours(0,0,0,0)==d.setHours(0,0,0,0)?"today at "+this.getLocalizedTime(e):
"on "+this.getLocalizedDate(e)};g.getSearchUpdatedLabel=function(e){var e=new Date(e),c=new Date(e.getTime()),d=new Date;return c.setHours(0,0,0,0)==d.setHours(0,0,0,0)?"today at "+this.getLocalizedTime(e):this.getLocalizedDate(e)};return g})},"sbt/itemFactory":function(){define(["./lang","./xpath","./base/core"],function(g,e,c){var d=/^count\(.*\)$/;return{createItems:function(b,a,d,k){var i=e.selectNodes(b,c.feedXPath.entry,c.namespaces),g=[];0==i.length&&(i=e.selectNodes(b,"a:entry",c.namespaces));
for(b=0;b<i.length;b++)g.push(this.createItem(i[b],a,d,k));return g},createItem:function(b,a,j,k){for(var i={element:b,getValue:function(a){return this[a]}},q=this.getAttribs(a),m=0;m<q.length;m++){var n=q[m],p=a[n];if(g.isFunction(p))i[n]=p(j,i);else if(p.match(d))i[n]=e.selectNumber(b,p,c.namespaces);else if((p=e.selectNodes(b,p,c.namespaces))&&1==p.length)i[n]=p[0].text||p[0].textContent;else if(p){i[n]=[];for(var f=0;f<p.length;f++)i[n].push(p[f].text||p[f].textContent)}else i[n]=null;i[n]=k?
k.decode(i[n]):i[n]}return i},getAttribs:function(b){var a=[],c;for(c in b)b.hasOwnProperty(c)&&a.push(c);return a}}})},"sbt/xpath":function(){define(["./declare"],function(g){var e=g(null,{ie:!1,constructor:function(c,d){this.xpath=c;this.nsArray=d||{};if(!document.createExpression&&(this.ie=!0,this.nsString="",this.nsArray))for(var b in this.nsArray)this.nsString+=" xmlns:"+b+'="'+this.nsArray[b]+'"'},selectSingleNode:function(c){var d=c.ownerDocument||c;if(this.ie)try{d.setProperty("SelectionLanguage",
"XPath");d.setProperty("SelectionNamespaces",this.nsString);if(c===d)c=d.documentElement;return c.selectSingleNode(this.xpath)}catch(b){throw"XPath is not supported";}else{var a=this;return d.evaluate(this.xpath,c,function(b){return a.nsArray[b]},XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}},selectNumber:function(c){var d=c.ownerDocument||c;if(this.ie)return this.selectText(c);var b=this;return d.evaluate(this.xpath,c,function(a){return b.nsArray[a]},XPathResult.NUMBER_TYPE,null).numberValue},
selectNodes:function(c){var d=c.ownerDocument||c;if(this.ie)try{d.setProperty("SelectionLanguage","XPath");d.setProperty("SelectionNamespaces",this.nsString);if(c===d)c=d.documentElement;return c.selectNodes(this.xpath)}catch(b){throw"XPath is not supported";}else{for(var a=this,c=d.evaluate(this.xpath,c,function(b){return a.nsArray[b]},XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null),d=[],e=0;e<c.snapshotLength;e++)d.push(c.snapshotItem(e));return d}},selectText:function(c){return(c=this.selectSingleNode(c))?
c.text||c.textContent:null}});return{selectNodes:function(c,d,b){return(new e(d,b)).selectNodes(c)},selectSingleNode:function(c,d,b){return(new e(d,b)).selectSingleNode(c)},selectText:function(c,d,b){return(new e(d,b)).selectText(c)},selectNumber:function(c,d,b){return(new e(d,b)).selectNumber(c)}}})},"sbt/base/core":function(){define(["../config"],function(){return{namespaces:{o:"http://ns.opensocial.org/2008/opensocial",app:"http://www.w3.org/2007/app",thr:"http://purl.org/syndication/thread/1.0",
fh:"http://purl.org/syndication/history/1.0",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/",a:"http://www.w3.org/2005/Atom",h:"http://www.w3.org/1999/xhtml",td:"urn:ibm.com/td",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",ibmsc:"http://www.ibm.com/search/content/2010",xhtml:"http://www.w3.org/1999/xhtml"},feedXPath:{entry:"/a:feed/a:entry",entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",
itemsPerPage:"/a:feed/opensearch:itemsPerPage"},entryXPath:{title:"a:title",summaryText:"a:summary[@type='text']",selfUrl:"a:link[@rel='self']/@href",terms:"a:category/@term",contentHtml:"a:content[@type='html']",published:"a:published",updated:"a:updated",authorId:"a:author/snx:userid",contributorId:"a:contributor/snx:userid"}}})},"sbt/ready":function(){define(["./_bridge/ready"],function(g){return g})},"sbt/_bridge/ready":function(){define(["dojo/ready"],function(g){return function(e){g(e)}})},
"sbt/text":function(){define(["./_bridge/text"],function(g){return g})},"sbt/_bridge/text":function(){define(["dojo/text"],function(g){return{load:function(e,c,d){g.load(e,c,d)}}})},"sbt/url":function(){define(["./declare"],function(g){var e=/^(?:([A-z]+)(:))?(\/\/)(?:([^?#]*)(:)([^?#]*)(@))?([\w.\-]+)(?:(:)(\d{0,5}))?([\w.\/\-]+)?(?:(\?)([^?#]*))?(?:(#)(.*))?$/;return g(null,{_resultStore:[],constructor:function(c){this.setUrl(c)},getUrl:function(){return this._resultStore.slice(1).join("")},setUrl:function(c){this._resultStore=
e.exec(c)},getScheme:function(){return this._resultStore[1]},setScheme:function(c){this._resultStore[1]=c},getUser:function(){return this._resultStore[4]},setUser:function(c){this._resultStore[4]=c},getPassword:function(){return this._resultStore[6]},setPassword:function(c){this._resultStore[6]=c},getHostName:function(){return this._resultStore[8]},setHostName:function(c){this._resultStore[8]=c},getPort:function(){return this._resultStore[10]},setPort:function(c){this._resultStore[10]=c},getQuery:function(){return this._resultStore[13]},
setQuery:function(c){this._resultStore[13]=c},getFragment:function(){return this._resultStore[15]},setFragment:function(c){this._resultStore[15]=c},getBaseUrl:function(){return this._resultStore.slice(1,13).join("")}})})},"sbt/validate":function(){define(["./log","./stringUtil","sbt/i18n!sbt/nls/validate","./util"],function(g,e,c,d){return{_validateInputTypeAndNotify:function(b,a,j,k,i,g){return!k||"object"==typeof k&&k.declaredClass&&k.declaredClass!=i||"object"==typeof k&&!k.declaredClass&&typeof k!=
i||"object"!=typeof k&&typeof k!=i?(b=k?e.substitute(c.validate_expectedType,[b,a,"object"==typeof k&&k.declaredClass?k.declaredClass:typeof k,i,j]):e.substitute(c.validate_nullObject,[b,a,j,i]),d.notifyError({code:400,message:b},g),!1):!0},_validateInputTypesAndNotify:function(b,a,c,d,e,g){for(var m in d)if(!this._validateInputTypeAndNotify(b,a,c[m],d[m],e[m],g))return!1;return!0}}})},"sbt/xsl":function(){define(["./Cache","./xml","./lang"],function(g,e,c){return{xsltTransform:function(d,b){if(!d)return null;
c.isString(d)&&(d=e.parse(sbt.cache.get(d)));if(!b)return c.clone(d);b=sbt.cache.get(b);if(window.ActiveXObject)return d.transformNode(b);if(document.implementation&&document.implementation.createDocument){var a=new XSLTProcessor;a.importStyleSheet(b);return a.transformToFragment(d,document)}return c.clone(d)}}})},"sbt/_bridge/IFrameTransport":function(){define(["./declare","dojo/ready","dojo/_base/lang"],function(g,e){return g(null,{idCounter:0,iframe:null,ready:!1,requests:{},pendings:[],constructor:function(c){var d=
this;e(function(){var b=d.iframe=dojo.create("iframe");b.src=c;b.className="dijitBackgroundIframe";dojo.style(b,"opacity",0.1);dojo.body().appendChild(b);window.addEventListener?window.addEventListener("message",dojo.hitch(d,d.processMessage),!1):window.attachEvent("onmessage",dojo.hitch(d,d.processMessage))})},processMessage:function(c){if(c.source==this.iframe.contentWindow)if(c=dojo.fromJson(c.data),"ready"==c.method){this.ready=!0;for(var d in this.pendings)this._xhr(this.pendings[d]);this.pendings=
[]}else if("load"==c.method)d=this.requests[c.id],this.requests[c.id]=null,d.handle(c.data,c.ioArgs);else if("error"==c.method){d=this.requests[c.id];this.requests[c.id]=null;var b=Error();dojo.mixin(b,c.data);d.handle(b,c.ioArgs)}},xhr:function(c,d,b){var a=this.idCounter++;this.requests[a]=d;c={id:a,method:c,args:d,hasBody:b};this.ready?this._xhr(c):this.pendings.push(c)},_xhr:function(c){this.iframe.contentWindow.postMessage(dojo.toJson(c),"*")}})})},"sbt/_bridge/RequestTransport":function(){define(["dojo/_base/declare",
"dojo/_base/lang","dojo/request","sbt/util"],function(g,e,c){return g(null,{request:function(d,b){return c(d,b)},xhr:function(d,b){var b=e.mixin({},b),a=this;c(b.url,{data:b.putData||b.postData||b.content||null,query:b.content||{},preventCache:b.preventCache||!1,method:d,timeout:b.timeout||null,handleAs:b.handleAs||"text",headers:b.headers||null}).response.then(function(a){return b.handle(a.data||a.text,{args:b,headers:{},_ioargs:a})},function(c){return b.handle(a.createError(c))})},createError:function(c){var b=
Error();b.code=c.status||c.response&&c.response.status||400;b.message=this.getErrorMessage(c);b.cause=c;if(c.response)b.response=e.mixin({},c.response);return b},getErrorMessage:function(c){var b=c.responseText||c.response&&c.response.text;if(b){try{var a=parser.parse(b).getElementsByTagName("message");if(a&&0!=a.length)b=a[0].textContent,b=e.trim(b)}catch(j){console.log(j)}return b}return c}})})},"sbt/authenticator/Basic":function(){define(["../declare","../lang","../util","../i18n!../nls/loginForm"],
function(g,e,c,d){return g(null,{loginUi:"",loginPage:"/sbt/authenticator/templates/login.html",dialogLoginPage:"authenticator/templates/loginDialog.html",url:"",constructor:function(b){e.mixin(this,b||{})},authenticate:function(b){var a=this;require(["sbt/config"],function(c){var d=b.loginUi||c.Properties.loginUi||a.loginUi,e=b.loginPage||c.Properties.loginPage||a.loginPage,g=b.dialogLoginPage||c.Properties.dialogLoginPage||a.dialogLoginPage;"popup"==d?a._authPopup(b,e,c,a.url):"dialog"==d?a._authDialog(b,
g,c):a._authMainWindow(b,e,a.url)});return!0},_authDialog:function(b,a,c){require(["sbt/_bridge/ui/BasicAuth_Dialog","sbt/dom"],function(e,g){if(b.cancel)c.cancel=b.cancel;e.show(b,a);g.setText("wrongCredsMessage",d.wrong_creds_message);g.setText("basicLoginFormUsername",d.username);g.setText("basicLoginFormPassword",d.password);g.setAttr(g.byId("basicLoginFormOK"),"value",d.login_ok);g.setAttr(g.byId("basicLoginFormCancel"),"value",d.login_cancel)});return!0},_authPopup:function(b,a,e,g){var i=b.proxy.proxyUrl,
i={actionURL:i.substring(0,i.lastIndexOf("/"))+"/basicAuth/"+b.proxyPath+"/JSApp",redirectURL:"empty",loginUi:"popup",showWrongCredsMessage:"false"},i=c.createQuery(i,"&"),a=g+a+"?"+i,g=c.createQuery({width:window.screen.availWidth/2,height:window.screen.availHeight/2,left:window.screen.availWidth/4,top:window.screen.availHeight/4,menubar:0,toolbar:0,status:0,location:0,scrollbars:1,resizable:1},","),a=window.open(a,"Authentication",g);if(b.callback)e.callback=b.callback,a.callback=b.callback;if(b.cancel)e.cancel=
b.cancel,a.cancel=b.cancel;a.globalLoginFormStrings=d;a.globalEndpointAlias=b.name;a.focus();return!0},_authMainWindow:function(b,a,e){var g=b.proxy.proxyUrl,b={actionURL:g.substring(0,g.lastIndexOf("/"))+"/basicAuth/"+b.proxyPath+"/JSApp",redirectURL:document.URL,loginUi:"mainWindow",showWrongCredsMessage:"false",username:d.username,password:d.password,login_ok:d.login_ok,login_cancel:d.login_cancel,wrong_creds_message:d.wrong_creds_message},b=c.createQuery(b,"&");window.location.href=e+a+"?"+b;
return!0}})})},"sbt/authenticator/GadgetOAuth":function(){define(["../declare","../lang"],function(g,e){return g(null,{constructor:function(c){e.mixin(this,c||{})},authenticate:function(c){(new gadgets.oauth.Popup(c.error.response.oauthApprovalUrl,null,function(){},function(){})).createOpenerOnClick()}})})},"sbt/authenticator/OAuth":function(){define(["../declare","../lang","../util"],function(g,e,c){return g(null,{url:"",loginUi:"",constructor:function(c){e.mixin(this,c||{})},authenticate:function(c){var b=
this;require(["sbt/config"],function(a){a=c.loginUi||a.Properties.loginUi||this.loginUi;return"popup"==a?b._authPopup(c,b.url):"dialog"==a?b._authDialog(c,b.url):b._authMainWindow(c,b.url)})},_authMainWindow:function(c,b){var a=b+"?oaredirect="+encodeURIComponent(window.location.href);newwindow=window.location.href=a;return!0},_authPopup:function(d,b){require(["sbt/config"],function(a){a.callback=d.callback;var a=b+"?loginUi=popup",e=c.createQuery({height:window.screen.availHeight/2,width:window.screen.availWidth/
3},",");newwindow=window.open(a,"Authentication",e);return!0})},_authDialog:function(c,b){require(["sbt/_bridge/ui/OAuth10_Dialog"],function(a){a.show(b)});return!0}})})},"sbt/authenticator/SSO":function(){define(["../declare","../lang","../util","../i18n!../nls/messageSSO"],function(g,e,c,d){return g(null,{loginUi:"",messageSSO:"/sbt/authenticator/templates/MessageSSO.html",dialogMessageSSO:"authenticator/templates/MessageDialogSSO.html",url:"",constructor:function(b){e.mixin(this,b||{})},authenticate:function(b){var a=
this;require(["sbt/config"],function(c){var d=b.loginUi||c.Properties.loginUi||a.loginUi,e=b.messageSSO||c.Properties.messageSSO||a.messageSSO,c=b.dialogMessageSSO||c.Properties.dialogMessageSSO||a.dialogMessageSSO;"popup"==d?a._authPopup(b,e,a.url):"dialog"==d?a._authDialog(b,c):a._authMainWindow(b,e,a.url)});return!0},_authPopup:function(b,a,e){var g=c.createQuery({loginUi:"popup"},"&"),a=e+a+"?"+g,e=c.createQuery({width:window.screen.availWidth/2,height:window.screen.availHeight/2,left:window.screen.availWidth/
4,top:window.screen.availHeight/4,menubar:0,toolbar:0,status:0,location:0,scrollbars:1,resizable:1},","),a=window.open(a,"Authentication",e);a.globalSSOStrings=d;a.globalEndpointAlias=b.name;a.focus();return!0},_authDialog:function(b,a){require(["sbt/_bridge/ui/SSO_Dialog","sbt/dom"],function(c,e){c.show(b,a,d);e.setText("reloginMessage",d.message);e.setAttr(e.byId("ssoLoginFormOK"),"value",d.relogin_button_text)});return!0},_authMainWindow:function(b,a,e){b=c.createQuery({redirectURL:document.URL,
loginUi:"mainWindow",message_title:d.message_title,message:d.message,relogin_button_text:d.relogin_button_text},"&");window.location.href=e+a+"?"+b;return!0}})})},"sbt/base/AtomEntity":function(){define("../declare,../lang,../stringUtil,./BaseConstants,./BaseEntity,./XmlDataHandler".split(","),function(g,e,c,d,b,a){return g(b,{contentType:"html",categoryScheme:null,constructor:function(b){this.dataHandler=new a({service:b.service,data:b.data,namespaces:e.mixin(d.Namespaces,b.namespaces||{}),xpath:e.mixin({},
d.AtomEntryXPath,b.xpath||this.xpath||{})})},getId:function(){return this.getAsString("id")},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",a)},getSummary:function(){return this.getAsString("summary")},setSummary:function(a){return this.setAsString("summary",a)},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",a)},getCategoryTerms:function(){return this.getAsArray("categoryTerm")},
setCategoryTerms:function(a){return this.setAsArray("categoryTerm",a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName","authorEmail","authorUserState"],["userid","name","email","userState"])},getContributor:function(){return this.getAsObject(["contributorUserid","contributorName","contributorEmail","contributorUserState"],["userid","name","email","userState"])},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},
getAlternateUrl:function(){return this.getAsString("alternateUrl")},getSelfUrl:function(){return this.getAsString("selfUrl")},getEditUrl:function(){return this.getAsString("editUrl")},createPostData:function(){var a=c.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" ${createNamespaces}><title type="text">${getTitle}</title><content type="${contentType}">${getContent}</content><summary type="text">${getSummary}</summary>${categoryScheme}${createEntryData}</entry>',
this,function(a,b){"getContent"==b&&"html"==this.contentType&&(a=a&&e.isString(a)?a.replace(/</g,"&lt;").replace(/>/g,"&gt;"):a);return a},this);return c.trim(a)},createEntryData:function(){return""},createNamespaces:function(){if(!this.dataHandler)return"";var a="",b=this.dataHandler.namespaces;for(prefix in b)a+="xmlns:"+prefix+'="'+b[prefix]+'" ';return a}})})},"sbt/base/BaseConstants":function(){define(["../config"],function(){return{sbtErrorCodes:{badRequest:400},Namespaces:{o:"http://ns.opensocial.org/2008/opensocial",
app:"http://www.w3.org/2007/app",thr:"http://purl.org/syndication/thread/1.0",fh:"http://purl.org/syndication/history/1.0",snx:"http://www.ibm.com/xmlns/prod/sn",opensearch:"http://a9.com/-/spec/opensearch/1.1/",a:"http://www.w3.org/2005/Atom",h:"http://www.w3.org/1999/xhtml",td:"urn:ibm.com/td",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",ibmsc:"http://www.ibm.com/search/content/2010",xhtml:"http://www.w3.org/1999/xhtml",spelling:"http://a9.com/-/opensearch/extensions/spelling/1.0/",
ca:"http://www.ibm.com/xmlns/prod/composite-applications/v1.0 namespace"},AtomFeedXPath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},AtomEntryXPath:{entry:"/a:entry",uid:"a:id",id:"a:id",title:"a:title",updated:"a:updated",published:"a:published",authorName:"a:author/a:name",authorEmail:"a:author/a:email",authorUserid:"a:author/snx:userid",authorUserState:"a:author/snx:userState",
contributorName:"a:contributor/a:name",contributorEmail:"a:contributor/a:email",contributorUserid:"a:contributor/snx:userid",contributorUserState:"a:contributor/snx:userState",content:"a:content[@type='html']",summary:"a:summary[@type='text']",categoryTerm:"a:category/@term",editUrl:"a:link[@rel='edit']/@href",selfUrl:"a:link[@rel='self']/@href",alternateUrl:"a:link[@rel='alternate']/@href"},AtomXmlHeaders:{"Content-Type":"application/atom+xml"}}})},"sbt/base/BaseEntity":function(){define(["../declare",
"../lang","../log","../stringUtil"],function(g,e,c,d){return g(null,{id:null,service:null,dataHandler:null,_fields:null,constructor:function(b){e.mixin(this,b);if(!this._fields)this._fields={};if(!this.service)throw Error("Invalid BaseEntity, an associated service must be specified.");},setDataHandler:function(b){this._fields={};this.dataHandler=b},setData:function(b){this._fields={};this.dataHandler.setData(b)},isLoaded:function(){return this.dataHandler?this.dataHandler.getData()?!0:!1:!1},getAsString:function(b){this._validateFieldName(b,
"getAsString");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsString(b):null},getAsNumber:function(b){this._validateFieldName(b,"getAsNumber");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsNumber(b):null},getAsDate:function(b){this._validateFieldName(b,"getAsDate");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsDate(b):null},getAsBoolean:function(b){this._validateFieldName(b,
"getAsBoolean");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsBoolean(b):!1},getAsArray:function(b){this._validateFieldName(b,"getAsArray");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsArray(b):null},getAsNodesArray:function(b){this._validateFieldName(b,"getAsNodesArray");return this._fields.hasOwnProperty(b)?this._fields[b]:this.dataHandler?this.dataHandler.getAsNodesArray(b):null},getAsObject:function(b,
a){for(var c={},d=0;d<b.length;d++){this._validateFieldName(b[d],"getAsObject");var e=this.getAsString(b[d]);e&&(a?c[a[d]]=e:c[b[d]]=e)}return c},setAsString:function(b,a){this._validateFieldName(b,"setAsString",a);null===a||void 0===a?delete this._fields[b]:this._fields[b]=a.toString();return this},setAsNumber:function(b,a){this._validateFieldName(b,"setAsNumber",a);if(a instanceof Number)this._fields[b]=a;else if(a){var c=new Number(a);if(isNaN(c))throw c=d.substitute("Invalid argument for BaseService.setAsNumber {0},{1}",
[b,a]),Error(c);this._fields[b]=c}else delete this._fields[b];return this},setAsDate:function(b,a){this._validateFieldName(b,"setAsDate",a);if(a instanceof Date)this._fields[b]=a;else if(a){var c=new Date(a);if(isNaN(c.getDate()))throw c=d.substitute("Invalid argument for BaseService.setAsDate {0},{1}",[b,a]),Error(c);this._fields[b]=c}else delete this._fields[b];return this},setAsBoolean:function(b,a){this._validateFieldName(b,"setAsBoolean",a);null!=a?this._fields[b]=a?!0:!1:delete this._fields[b];
return this},setAsArray:function(b,a){this._validateFieldName(b,"setAsArray",a);e.isArray(a)?this._fields[b]=a.slice(0):e.isString(a)?this._fields[b]=0<a.length?a.split(/[ ,]+/):[]:a?this._fields[b]=[a]:delete this._fields[b];return this},setAsObject:function(b){for(var a in b)if(b.hasOwnProperty(a)){var c=b[a];c?this._fields[a]=c:delete this._fields[a]}},remove:function(b){delete this._fields[b]},toJson:function(){return this.dataHandler?this.dataHandler.toJson():{}},_validateFieldName:function(b,
a,c){if(!b)throw b=d.substitute("Invalid argument for BaseService.{1} {0},{2}",[b,a,c||""]),Error(b);}})})},"sbt/base/XmlDataHandler":function(){define("../declare,../lang,../stringUtil,../xml,../xpath,./DataHandler".split(","),function(g,e,c,d,b,a){return g(a,{dataType:"xml",xpath:null,namespaces:null,_values:null,_summary:null,constructor:function(a){e.mixin(this,a);this._values={};this.data=this._fromNodeOrString(a.data)},setData:function(a){this._values={};this.data=this._fromNodeOrString(a)},
getAsString:function(a){this._validateProperty(a,"getAsString");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectText(a)),this._values[a]):_selectText(a)},getAsNumber:function(a){this._validateProperty(a,"getAsNumber");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectNumber(a)),this._values[a]):this._selectNumber(a)},getAsDate:function(a){this._validateProperty(a,"getAsDate");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=
this._selectDate(a)),this._values[a]):this._selectDate(a)},getAsBoolean:function(a){this._validateProperty(a,"getAsBoolean");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectBoolean(a)),this._values[a]):this._selectBoolean(a)},getAsArray:function(a){this._validateProperty(a,"getAsArray");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectArray(a)),this._values[a]):this._selectArray(a)},getAsNodesArray:function(a){this._validateProperty(a,
"getNodesArray");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._selectNodesArray(a)),this._values[a]):this._selectNodesArray(a)},getEntityId:function(){return c.trim(this.getAsString("uid"))},getEntityData:function(a){var c=this.xpath.entry;if(!c)return a;this._values.entry||(this._values.entry=b.selectNodes(a,c,this.namespaces)[0]||[]);return this._values.entry},getSummary:function(){if(!this._summary&&this._getXPath("totalResults"))this._summary={totalResults:b.selectNumber(this.data,
this._getXPath("totalResults"),this.namespaces),startIndex:b.selectNumber(this.data,this._getXPath("startIndex"),this.namespaces),itemsPerPage:b.selectNumber(this.data,this._getXPath("itemsPerPage"),this.namespaces)};return this._summary},getEntitiesDataArray:function(){var a=this.xpath.entries;if(!a)return this.data;this._values.entries||(this._values.entries=b.selectNodes(this.data,a,this.namespaces));return this._values.entries},toJson:function(){var a={},b;for(b in this.xpath)this.xpath.hasOwnProperty(b)&&
(a[b]=this.getAsString(b));return a},_fromNodeOrString:function(a){return e.isString(a)?(a=c.trim(a),this.getEntityData(d.parse(a))):a},_getXPath:function(a){return this.xpath[a]||a},_validateProperty:function(a,b){if(!a){var d=c.substitute("Invalid argument for XmlDataHandler.{1} {0}",[a,b]);throw Error(d);}},_selectText:function(a){return!this.data?null:c.trim(b.selectText(this.data,this._getXPath(a),this.namespaces))},_selectNumber:function(a){return!this.data?null:b.selectNumber(this.data,this._getXPath(a),
this.namespaces)},_selectDate:function(a){return!this.data?null:(a=this._selectText(a))?new Date(a):null},_selectBoolean:function(a){if(!this.data)return!1;var a=b.selectNodes(this.data,this._getXPath(a),this.namespaces),c=!1;a&&(c=0<a.length);return c},_selectArray:function(a){if(!this.data)return null;var a=b.selectNodes(this.data,this._getXPath(a),this.namespaces),d=null;if(a)for(var d=[],e=0;e<a.length;e++)d.push(c.trim(a[e].text||a[e].textContent));return d},_selectNodesArray:function(a){return!this.data?
null:b.selectNodes(this.data,this._getXPath(a),this.namespaces)}})})},"sbt/base/DataHandler":function(){define(["../declare","../lang"],function(g,e){return g(null,{dataType:null,data:null,constructor:function(c){e.mixin(this,c)},setData:function(c){this.data=c},getData:function(){return this.data},getAsString:function(){return null},getAsNumber:function(){return null},getAsDate:function(){return null},getAsBoolean:function(){return null},getAsArray:function(){return null},getEntityId:function(){return null},
getEntityData:function(){return data},getSummary:function(){return null},getEntitiesDataArray:function(){return[]},toJson:function(){}})})},"sbt/base/BaseService":function(){define("../config,../declare,../lang,../log,../stringUtil,../Cache,../Promise,../util".split(","),function(g,e,c,d,b,a,j,k){var i={};return e(null,{endpoint:null,_cache:null,_regExp:/\/{2}/,contextRootMap:{},constructor:function(b){if(b&&b.endpoint)this.endpoint=g.findEndpoint(b.endpoint);if(b&&b.cacheSize)this._cache=new a(b.cacheSize)},
constructUrl:function(a,d,e){if(!a)throw Error("BaseService.constructUrl: Invalid argument, url is undefined or null.");this.endpoint&&(c.mixin(this.contextRootMap,this.endpoint.serviceMappings),a=b.transform(a,this.contextRootMap,function(a,b){return a?a:b},this));e&&(a=b.replace(a,e),-1!=a.indexOf("//")&&(a=a.replace(this._regExp,"/")));if(d)for(param in d)-1==a.indexOf("?")?a+="?":a.indexOf("&")!=a.length-1&&(a+="&"),(e=encodeURIComponent(d[param]))&&(a+=param+"="+e);return a},getEntities:function(a,
b,c){var a=this.constructUrl(a),d=this,f=new j;this.request(a,b,null,f).response.then(function(a){f.response=a;try{for(var b=c.createEntities.apply(d,[d,a.data,a]),e=b.getEntitiesDataArray(),s=[],h=0;h<e.length;h++){var v=c.createEntity.apply(d,[d,e[h],a]);s.push(v)}f.summary=b.getSummary();f.fulfilled(s)}catch(r){a=Error("Invalid response"),a.cause=r,f.rejected(a)}},function(a){f.rejected(a)});return f},getEntity:function(a,b,c,d){var a=this.constructUrl(a),f=this._validateEntityId(c);if(f)return f;
var f=new j,e=this.getFromCache(c);if(e)return f.fulfilled(e),f;var o=this;this.request(a,b,c,f).response.then(function(a){f.response=a;try{var b=d.createEntity.apply(o,[o,a.data,a]);o._cache&&c?o.fullFillOrRejectPromises.apply(o,[c,b,a]):f.fulfilled(b)}catch(h){a=Error("Invalid response"),a.cause=h,o._cache&&c?o.fullFillOrRejectPromises.apply(o,[c,a]):f.rejected(a)}},function(a){o._cache&&c?o.fullFillOrRejectPromises.apply(o,[c,a]):f.rejected(a)});return f},updateEntity:function(a,b,c){var a=this.constructUrl(a),
d=this,f=new j;this.endpoint.request(a,b,null,f).response.then(function(a){f.response=a;a=c.createEntity.apply(d,[d,a.data,a]);a instanceof j?a.then(function(a){f.fulfilled(a)},function(a){f.rejected(a)}):(a.id&&d.removeFromCache(a.id),a.id&&a.data&&d.addToCache(a.id,a),f.fulfilled(a))},function(a){f.rejected(a)});return f},deleteEntity:function(a,b,c){var a=this.constructUrl(a),d=this._validateEntityId(c);if(d)return d;var f=this,d=new j;this.endpoint.request(a,b,c,d).response.then(function(a){d.response=
a;d.fulfilled(c);f.removeFromCache(c)},function(a){d.rejected(a)});return d},request:function(a,b,c,d){a=this.constructUrl(a);this._cache&&c&&this.pushPromise(c,d);return this.endpoint.request(a,b)},pushPromise:function(a,b){d.debug("pushPromise, id : {0}, promise : {1}",a,b);i[a]||(i[a]=[]);i[a].push(b)},fullFillOrRejectPromises:function(a,b,c){d.debug("fullFillOrRejectPromises, id : {0}, data : {1}, response : {2}",a,b,c);this.addToCache(a,b);var e=i[a];if(e){delete i[a];for(a=0;a<e.length;a++)this.fullFillOrReject.apply(this,
[e[a],b,c])}},fullFillOrReject:function(a,b,c){if(a)try{a.response=c,b instanceof Error?a.rejected(b):a.fulfilled(b)}catch(e){d.debug("fullFillOrReject: "+e.message)}},addToCache:function(a,b){this._cache&&!(b instanceof Error)&&this._cache.put(a,b)},removeFromCache:function(a){this._cache&&this._cache.remove(a)},getFromCache:function(a){if(this._cache)return this._cache.get(a)},createBadRequestError:function(a){var b=Error();b.code=400;b.message=a;return b},createBadRequestPromise:function(a){return new j(this.createBadRequestError(a))},
isEmail:function(a){return a&&0<=a.indexOf("@")},getLocationParameter:function(a,b){var c=a.getHeader("Location")||void 0;if(c)return this.getUrlParameter(c,b)},getUrlParameter:function(a,b){return decodeURIComponent((RegExp("[?|&]"+b+"=([^&;]+?)(&|#|;|$)").exec(a)||[,""])[1].replace(/\+/g,"%20"))||null},validateField:function(a,c){if(!c){var d;d=b.substitute("Invalid value {0} for field {1}, the field must not be empty or undefined.",[c||"'undefined'",a]);return this.createBadRequestPromise(d)}},
validateFields:function(a){for(var b in a){var c=this.validateField(b,a[b]);if(c)return c}},validateHTML5FileSupport:function(){if(!window.File||!window.FormData)return this.createBadRequestPromise("HTML 5 File API is not supported by the Browser.");if(-1!=k.getJavaScriptLibrary().indexOf("Dojo 1.4"))return this.createBadRequestPromise("Dojo 1.4.* is not supported for Update Profile Photo")},_validateEntityId:function(a){if(!a||!c.isString(a))return a=b.substitute("Invalid argument {0}, expected valid entity identifier.",
[a||"'undefined'"]),this.createBadRequestPromise(a)}})})},"sbt/base/ConnEntity":function(){define(["../declare","../lang","../stringUtil","./AtomEntity"],function(g,e,c,d){return g(BaseEntity,{entity:null,constructor:function(b){entity=new d(b);e.mixin(this,entity)}})})},"sbt/base/JsonDataHandler":function(){define("../declare,../lang,../json,./DataHandler,../Jsonpath,../stringUtil".split(","),function(g,e,c,d,b,a){return g(d,{dataType:"json",jsonpath:null,_values:null,constructor:function(a){e.mixin(this,
a);this._values={};this.data=a.data},getAsString:function(a){this._validateProperty(a,"getAsString");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._get(a).toString()),this._values[a]):_get(a)},getAsNumber:function(a){this._validateProperty(a,"getAsNumber");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._getNumber(a)),this._values[a]):_getNumber(a)},getAsDate:function(a){this._validateProperty(a,"getAsDate");return this._values?(this._values.hasOwnProperty(a)||
(this._values[a]=this._getDate(a)),this._values[a]):_getDate(a)},getAsBoolean:function(a){this._validateProperty(a,"getAsBoolean");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._getBoolean(a)),this._values[a]):_getBoolean(a)},getAsArray:function(a){this._validateProperty(a,"getAsArray");return this._values?(this._values.hasOwnProperty(a)||(this._values[a]=this._get(a)),this._values[a]):_get(a)},getEntityId:function(){return a.trim(this.getAsString(this.jsonpath.id))},
getEntityData:function(){return this.data},getSummary:function(){if(!this._summary&&this._get("totalResults")[0])this._summary={totalResults:this.getAsNumber("totalResults"),startIndex:this.getAsNumber("startIndex"),itemsPerPage:this.getAsNumber("itemsPerPage")};return this._summary},getEntitiesDataArray:function(){return this._get(this._getJPath("entry"))[0]},toJson:function(){return this.data},_getDate:function(a){a=this._get(a)[0];return a instanceof Date?a:new Date(a)},_getBoolean:function(a){return this._get(a)[0]?
!0:!1},_getNumber:function(a){a=this._get(a)[0];return"number"===typeof a?a:e.isArray(a)?a.length:Number(a)},_validateProperty:function(b,c){if(!b){var d=a.substitute("Invalid argument for JsonDataHandler.{1} {0}",[b,c]);throw Error(d);}},_validateObject:function(b){if(!b)throw b=a.substitute("Invalid argument for JsonDataHandler.{0}",[b]),Error(b);},_evalJson:function(a){return b(this.data,a)},_evalJsonWithData:function(a,c){return b(c,a)},_get:function(a){this._validateObject(this.data);return this._evalJson(this._getJPath(a))},
_getJPath:function(a){return this.jsonpath[a]||a},extractFirstElement:function(a){return this._evalJsonWithData("$[0]",a)}})})},"sbt/base/MyAtomEntity":function(){define(["../declare","../lang","./BaseConstants","./BaseEntity","./XmlDataHandler"],function(g){return g(null,{})})},"sbt/base/VCardDataHandler":function(){define(["../declare","../lang","../config","../stringUtil","./XmlDataHandler"],function(g,e,c,d,b){return g(b,{lineDelim:"\n",itemDelim:":",_vcard:null,constructor:function(){this.parseVCard()},
parseVCard:function(){var a=d.trim(this.getAsString("vcard")).split(this.lineDelim);this._vcard={};for(var b=1;b<a.length-1;b++){var c=d.trim(a[b]),e=c.indexOf(this.itemDelim),g=c.substring(0,e),c=c.substring(e+1);this._vcard[g]=c}},_selectText:function(a){var b=this._getXPath(a);if(this._vcard&&this._vcard.hasOwnProperty(b))return this._vcard[b];try{return this.inherited(arguments,[a])}catch(c){return null}}})})},"sbt/connections/ActivityConstants":function(){define(["../lang","./ConnectionsConstants"],
function(g,e){return g.mixin(e,{ActivityNodeTypes:{Activity:"activity",Chat:"chat",Email:"email",Entry:"entry",EntryTemplate:"entrytemplate",Reply:"reply",Section:"section",ToDo:"todo"},ActivitiesFeedXPath:e.ConnectionsFeedXPath,PersonFieldXPath:{name:"a:name",userId:"snx:userid",email:"a:email"},FileFieldXPath:{url:"a:link[@rel='enclosure']/@href",type:"a:link[@rel='enclosure']/@type",size:"a:link[@rel='enclosure']/@size",length:"a:link/@length"},LinkFieldXPath:{url:"a:link/@href",title:"a:link/@title"},
TextFieldXPath:{summary:"a:summary"},ActivityNodeXPath:{entry:"/a:entry",uid:"a:id",activityUuid:"snx:activity",title:"a:title",updated:"a:updated",published:"a:published",categoryFlagCompleted:"a:category[@term='completed']/@label",categoryFlagTemplate:"a:category[@term='template']/@label",categoryFlagDelete:"a:category[@term='deleted']/@label",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",authorUserState:"a:author/snx:userState",authorLdapid:"a:author/snx:ldapid",
contributorName:"a:contributor/a:name",contributorUserId:"a:contributor/snx:userid",contributorEmail:"a:contributor/a:email",contributorUserState:"a:contributor/snx:userState",contributorLdapid:"a:contributor/snx:ldapid",type:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@label",priority:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/priority']/@label",coummunityUuid:"snx:communityUuid",communityUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container']/@href",dueDate:"snx:duedate",
membersUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/member-list']/@href",historyUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/history']/@href",templatesUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/templates']/@href",editUrl:"a:link[@rel='edit']/@href",selfUrl:"a:link[@rel='self']/@href",recentUpdatesUrl:"a:link[@rel='alternate']/@href",position:"snx:position",depth:"snx:depth",permissions:"snx:permissions",iconUrl:"snx:icon",content:"a:content",tags:"a:category[not(@scheme)]/@term",
inReplyToId:"thr:in-reply-to/@ref",inReplyToUrl:"thr:in-reply-to/@href",inReplyToActivity:"thr:in-reply-to/snx:activity",assignedToName:"snx:assignedto/@name",assignedToUserId:"snx:assignedto/@userid",assignedToEmail:"snx:assignedto",textFields:"snx:field[@type='text']",linkFields:"snx:field[@type='link']",personFields:"snx:field[@type='person']",dateFields:"snx:field[@type='date']",fileFields:"snx:field[@type='file']"},TagXPath:{term:"@term",frequency:"@snx:frequency",entries:"app:categories/a:category",
uid:"@term",bin:"@snx:bin"},MemberXPath:{uid:"a:id",entry:"a:feed/a:entry",name:"a:contributor/a:name",email:"a:contributor/a:email",userId:"a:contributor/snx:userid",role:"a:contributor/snx:role",userState:"a:contributor/snx:userState",title:"a:title",updated:"a:updated",summary:"a:summary",editUrl:"a:link[@rel='edit']/@href",category:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",role:"snx:role",permissions:"snx:permissions"},AtomActivitiesEverything:"/${activities}/service/atom2/everything",
AtomActivitiesMy:"${activities}/service/atom2/activities",AtomActivitiesTrash:"${activities}/service/atom2/trash",AtomActivitiesCompleted:"${activities}/service/atom2/completed",AtomActivityNode:"${activities}/service/atom2/activitynode",AtomActivityNodes:"${activities}/service/atom2/descendants",AtomActivityNodeTrash:"${activities}/service/atom2/trashednode",AtomCreateActivityNode:"${activities}/service/atom2/activity",AtomActivitiesToDos:"${activities}/service/atom2/todos",AtomActivitiesMembers:"${activities}/service/atom2/acl",
AtomActivitiesMember:"${activities}/service/atom2/acl?activityUuid={activityUuid}&amp;memberid={memberId}",AtomActivitiesTags:"${activities}/service/atom2/tags"},e)})},"sbt/connections/ConnectionsConstants":function(){define(["../lang","../base/BaseConstants"],function(g,e){return g.mixin(e,{BadRequest:400,ConnectionsFeedXPath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/opensearch:totalResults",startIndex:"/a:feed/opensearch:startIndex",itemsPerPage:"/a:feed/opensearch:itemsPerPage"},AuthTypes:{OAuth:"oauth",
Basic:"basic"},TagsXPath:{entries:"app:categories/a:category",term:"@term",frequency:"@snx:frequency",uid:"@term"}})})},"sbt/connections/ActivityService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./ActivityConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler,../xml".split(","),function(g,e,c,d,b,a,j,k,i,q){var m=function(a,b){if(a){var c=a.indexOf(b);-1!=c&&(a=a.substring(c+b.length))}return a},n=g(null,{name:null,fid:null,position:null,type:null,
getName:function(){return this.name},setName:function(a){this.name=a},getFid:function(){return this.fid},getPosition:function(){return this.position},getType:function(){return this.type}}),p=g(n,{summary:null,getSummary:function(){return this.summary},setSummary:function(){this.summary=newSummary}}),f=g(n,{date:null,getDate:function(){return this.date},setDate:function(a){this.date=a}}),t=g(n,{url:null,title:null,getUrl:function(){return this.url},setUrl:function(a){this.url=a},getTitle:function(){return this.title},
setTitle:function(a){this.title=a}}),o=g(n,{url:null,fileType:null,size:null,length:null,getUrl:function(){return this.url},getFileType:function(){return this.type},getSize:function(){return this.size},getLength:function(){return this.length}}),u=g(n,{personName:null,userId:null,email:null,getPersonName:function(){return this.personName},setPersonName:function(a){this.personName=a},getUserId:function(){return this.userId},setUserId:function(a){this.userId=a},getEmail:function(){return this.email},
setEmail:function(a){this.email=a}}),s=g(k,{constructor:function(){},getTerm:function(){return this.getAsString("term")},getFrequency:function(){return this.getAsString("frequency")},getBin:function(){return this.getAsString("bin")}}),h=g(k,{constructor:function(){},getUuid:function(){var a=this.id||this._fields.id||this.getAsString("uid");this.id=a;return this._fields.id=a},getActivityUuid:function(){return m(this.getUuid(),"urn:lsid:ibm.com:oa:")},getTitle:function(){return this.getAsString("title")},
setTitle:function(a){return this.setAsString("title",a)},getUpdated:function(){return this.getAsDate("updated")},getPublished:function(){return this.getAsDate("published")},getAuthor:function(){return this.getAsObject(["authorName","authorUserId","authorEmail","authorUserState","authorLdapid"])},getContributor:function(){return this.getAsObject(["contributorName","contributorUserId","contributorEmail","contributorUserState","contributorLdapid"])},getType:function(){return this.getAsString("type")},
setType:function(a){return this.setAsString("type",a)},getPriority:function(){return this.getAsString("priority")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getDueDate:function(){return this.getAsDate("dueDate")},setDueDate:function(a){return this.setAsDate("dueDate",a)},getMembersUrl:function(){return this.getAsString("membersUrl")},getHistoryUrl:function(){return this.getAsString("historyUrl")},getTemplatesUrl:function(){return this.getAsString("templatesUrl")},
getEditUrl:function(){return this.getAsString("editUrl")},getSelfUrl:function(){return this.getAsString("selfUrl")},getAlternateUrl:function(){return this.getAsString("alternateUrl")},getPosition:function(){return this.getAsString("position")},setPosition:function(a){return this.setAsString("position",a)},isCompleted:function(){return this.getAsBoolean("categoryFlagCompleted")},setCompleted:function(a){return this.setAsBoolean("categoryFlagCompleted",a)},isDeleted:function(){return this.getAsBoolean("categoryFlagDelete")},
isTemplate:function(){return this.getAsBoolean("categoryFlagTemplate")},setTemplate:function(a){return this.setAsBoolean("categoryFlagTemplate",a)},getDepth:function(){return this.getAsString("depth")},getPermissions:function(){return this.getAsString("permissions")},getIconUrl:function(){return this.getAsString("iconUrl")},setIconUrl:function(a){return this.setAsString("iconUrl",a)},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",
a)},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getCommunityUrl:function(){return this.getAsString("communityUrl")},setCommunityUrl:function(a){return this.setAsString("communityUrl",a)},load:function(){var b=this.service.validateField("activityUuid",this.getActivityUuid());if(b)return b;b={method:"GET",handleAs:"text",query:{activityNodeUuid:this.getActivityUuid()}};return this.service.getEntity(a.AtomActivityNode,
b,this.getActivityUuid(),w)},create:function(){return this.service.createActivity(this)},update:function(){return this.service.updateActivity(this)},deleteActivity:function(){return this.service.deleteActivity(this.getActivityUuid())},restore:function(){return this.service.restoreActivity(this.getActivityUuid())},addMember:function(a){return this.service.addMember(this.getActivityUuid(),a)},removeMember:function(a){return this.service.deleteMember(this.getActivityUuid(),a)},updateMember:function(a){return this.service.updateMember(this.getActivityUuid(),
a)},getMember:function(a){return this.service.getMember(this.getActivityUuid(),a)},getMembers:function(a){return this.service.getMembers(this.getActivityUuid(),a)},createActivityNode:function(a){return this.service.createActivityNode(this.getActivityUuid(),a)},getActivityTags:function(a){return this.service.getActivityTags(this.getActivityUuid(),a)}}),v=g(h,{constructor:function(){},getActivityNodeUuid:function(){return m(this.getUuid(),"urn:lsid:ibm.com:oa:")},getActivityUuid:function(){return this.getAsString("activityUuid")},
setActivityUuid:function(a){return this.setAsString("activityUuid",a)},getInReplyToId:function(){return this.getAsString("inReplyToId")},getInReplyToUrl:function(){return this.getAsString("inReplyToUrl")},setInReplyTo:function(a,b){return this.setAsObject({inReplyToId:"urn:lsid:ibm.com:oa:"+a,inReplyToUrl:b})},getAssignedToUserId:function(){return this.getAsString("assignedToUserId")},getAssignedToName:function(){return this.getAsString("assignedToName")},getAssignedToEmail:function(){return this.getAsString("assignedToEmail")},
setAssignedTo:function(a,b,c){return this.setAsObject({assignedToUserId:a,assignedToName:b,assignedToEmail:c})},getTextFields:function(){var b=this.getAsNodesArray("textFields"),c=[],r;for(r in b){for(var f=b[r],h=new p,d=0;d<f.attributes.length;d++){var o=f.attributes[d];h[o.name]=o.value}f=new i({service:this.service,data:f,namespaces:a.Namespaces,xpath:a.TextFieldXPath});h.summary=f.getAsString("summary");c.push(h);this.addTextField(h)}return c},addTextField:function(a){return this._fields.fields?
(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getDateFields:function(){var a=this.getAsNodesArray("dateFields"),b=[],c;for(c in a){for(var r=a[c],h=new f,o=0;o<r.attributes.length;o++){var e=r.attributes[o];h[e.name]=e.value}h.date=new Date(d.trim(r.textContent));b.push(h);this.addDateField(h)}return b},addDateField:function(a){return this._fields.fields?(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getLinkFields:function(){var b=this.getAsNodesArray("linkFields"),
c=[],r;for(r in b){for(var h=b[r],f=new t,d=0;d<h.attributes.length;d++){var o=h.attributes[d];f[o.name]=o.value}h=new i({service:this.service,data:h,namespaces:a.Namespaces,xpath:a.LinkFieldXPath});f.url=h.getAsString("url");f.title=h.getAsString("title");c.push(f);this.addLinkField(f)}return c},addLinkField:function(a){return this._fields.fields?(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getPersonFields:function(){var b=this.getAsNodesArray("personFields"),c=[],r;for(r in b){for(var h=
b[r],f=new u,d=0;d<h.attributes.length;d++){var o=h.attributes[d];f[o.name]=o.value}h=new i({service:this.service,data:h,namespaces:a.Namespaces,xpath:a.PersonFieldXPath});f.personName=h.getAsString("name");f.userId=h.getAsString("userId");f.email=h.getAsString("email");c.push(f);this.addPersonField(f)}return c},addPersonField:function(a){return this._fields.fields?(this._fields.fields.push(a),this):this.setAsArray("fields",[a])},getFileFields:function(){var b=this.getAsNodesArray("fileFields"),c=
[],r;for(r in b){for(var h=b[r],f=new o,d=0;d<h.attributes.length;d++){var e=h.attributes[d];f[e.name]=e.value}h=new i({service:this.service,data:h,namespaces:a.Namespaces,xpath:a.FileFieldXPath});f.url=h.getAsString("url");f.size=h.getAsString("size");f.type=h.getAsString("type");f.length=h.getAsString("length");c.push(f)}return c},getFields:function(){if(this._fields.fields&&0<this._fields.fields.length)return this._fields.fields;var a=this.getTextFields(),b=this.getPersonFields(),c=this.getLinkFields(),
h=this.getFileFields(),r=this.getDateFields(),f;for(f in a){var d=a[f];feilds.push(d)}for(f in b)d=b[f],feilds.push(d);for(f in c)d=c[f],feilds.push(d);for(f in h)d=h[f],feilds.push(d);for(f in r)d=r[f],feilds.push(d);return[]},setFields:function(a){this._fields.fields=a},load:function(){var b=this.service.validateField("activityNodeUuid",this.getActivityNodeUuid());if(b)return b;b={method:"GET",handleAs:"text",query:{activityNodeUuid:this.getActivityNodeUuid()}};return this.service.getEntity(a.AtomActivityNode,
b,this.getActivityNodeUuid(),y)},create:function(a){return this.service.createActivityNode(a,this)},update:function(){return this.service.updateActivityNode(this)},deleteActivityNode:function(){return this.service.deleteActivityNode(this.getActivityNodeUuid())},restore:function(){return this.service.restoreActivityNode(this.getActivityNodeUuid())},changeType:function(a){this.setType(a);return this.service.changeType(this)},moveToSection:function(a){return this.service.moveEntryToSection(this,a)}}),
r=g(k,{getId:function(){return this.id||this._fields.id||this.getAsString("uid")},getMemberId:function(){return m(this.getId(),"&memberid=")},getName:function(){return this.getAsString("name")},setName:function(a){return this.setAsString("name",a)},getEmail:function(){return this.getAsString("email")},setEmail:function(a){return this.setAsString("email",a)},getUserId:function(){return this.getAsString("userId")},setUserId:function(a){return this.setAsString("userId",a)},getRole:function(){return this.getAsString("role")},
setRole:function(a){return this.setAsString("role",a)},getUserState:function(){return this.getAsString("userState")},getTitle:function(){return this.getAsString("title")},getUpdated:function(){return this.getAsDate("updated")},getSummary:function(){return this.getAsString("summary")},getEditUrl:function(){this.getAsString("editUrl")},getCategory:function(){this.getAsString("category")},setCategory:function(a){this.setAsString("category",a)},getPermissions:function(){var a=this.getAsString("permissions");
return a?a.split(", "):a},load:function(b){var c=this.service.validateField("memberId",this.getMemberId());c||(c=this.service.validateField("activityUuid",b));return c?c:this.service.getEntity(this.service.constructUrl(a.AtomActivitiesMember,null,{activityUuid:b,memberId:this.getMemberId()}),{method:"GET",handleAs:"text"},this.getMemberId(),B)},addToActivity:function(a){return this.service.addMember(a,this)},removeFromActivity:function(a){return this.service.deleteMember(a,this.getMemberId())},updateInActivity:function(a){return this.service.updateMember(a,
this)}}),A={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.TagXPath})},createEntity:function(b,c){var f=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.TagXPath});return new s({service:b,dataHandler:f})}},B={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.ActivitiesFeedXPath})},createEntity:function(b,c){var f=null,f="object"==typeof c?c:(new i({data:c,namespaces:a.Namespaces,xpath:a.MemberXPath})).data,
f=new i({data:f,namespaces:a.Namespaces,xpath:a.MemberXPath});return new r({service:b,dataHandler:f})}},w={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.ActivitiesFeedXPath})},createEntity:function(b,c){var f=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.ActivityNodeXPath});return new h({service:b,dataHandler:f})}},y={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.ActivitiesFeedXPath})},createEntity:function(b,
c){var f=null,f="object"==typeof c?c:(new i({data:c,namespaces:a.Namespaces,xpath:a.ActivityNodeXPath})).data,f=new i({data:f,namespaces:a.Namespaces,xpath:a.ActivityNodeXPath});return new v({service:b,dataHandler:f})}};return g(j,{contextRootMap:{activities:"activities"},constructor:function(){if(!this.endpoint)this.endpoint=e.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getMyActivities:function(b){return this.getEntities(a.AtomActivitiesMy,
{method:"GET",handleAs:"text",query:b||{}},w)},getActivityNodes:function(b,f){var h={method:"GET",handleAs:"text",query:c.mixin(f||{},{nodeUuid:b})};return this.getEntities(a.AtomActivityNodes,h,y)},getAllActivities:function(b){return this.getEntities(a.AtomActivitiesEverything,{method:"GET",handleAs:"text",query:b||{}},w)},getCompletedActivities:function(b){return this.getEntities(a.AtomActivitiesCompleted,{method:"GET",handleAs:"text",query:b||{}},w)},getActivityNode:function(a){var b=this.validateField("activityNodeUuid",
a);return b?b:this.newActivityNode(a).load()},getActivity:function(a){var b=this.validateField("activityUuid",a);return b?b:this.newActivity(a).load()},createActivityNode:function(b,c){var f=this.validateField("activityUuid",b);f||(f=this.validateField("activityNodeOrJson",c));if(f)return f;f=this.newActivityNode(c);f.setActivityUuid(b);f=this._constructPayloadActivityNode(f);return this.updateEntity(a.AtomCreateActivityNode,{method:"POST",headers:a.AtomXmlHeaders,query:{activityUuid:b},data:f},y)},
createActivity:function(b){var c=this.validateField("activityOrJson",b);if(c)return c;b=this.newActivity(b);b.setType(a.ActivityNodeTypes.Activity);b=this._constructPayloadActivityNode(b);return this.updateEntity(a.AtomActivitiesMy,{method:"POST",headers:a.AtomXmlHeaders,data:b},w)},_validateActivityNode:function(a,b,c){if(b&&!a.getActivityNodeUuid())return this.createBadRequestPromise("Invalid argument, activity node with UUID must be specified.");if(c&&!a.getType())return this.createBadRequestPromise("Invalid argument, activity node with Type must be specified.")},
_validateActivity:function(a,b){if(b&&!a.getActivityUuid())return this.createBadRequestPromise("Invalid argument, activity with UUID must be specified.")},updateActivityNode:function(a){var b=this.validateField("activityNodeOrJson",a);if(b)return b;a=this.newActivityNode(a);return(b=this._validateActivityNode(a,!0))?b:this._update(a,y)},updateActivity:function(a){var b=this.validateField("activityOrJson",a);return b?b:(b=this._validateActivity(this.newActivity(a),!0))?b:this._update(a,w)},_update:function(c,
f){var h=new b,r=this,d=m(c.getUuid()),o=function(){var b=r._constructPayloadActivityNode(c);r.updateEntity(a.AtomActivityNode,{method:"PUT",headers:a.AtomXmlHeaders,query:{activityNodeUuid:d},data:b},f).then(function(a){h.fulfilled(a)},function(a){h.rejected(a)})};c.isLoaded()?o():c.load().then(function(){o()},function(a){h.rejected(a)});return h},changeEntryType:function(a){var b=this.validateField("activityNodeOrJson",a);if(b)return b;a=this.newActivityNode(a);this._validateActivityNode(a,!0,!0);
return this.updateActivityNode(a)},moveEntryToSection:function(a,c){var f=this,h=this.validateField("activityNodeOrJson",a);h||(h=this.validateField("sectionNodeOrJsonOrId",c));if(h)return h;var r=this.newActivityNode(a),d=this.newActivityNode(c),h=new b,o=function(){r.setInReplyTo(d.getActivityNodeUuid(),d.getSelfUrl());f.updateActivityNode(r).then(function(a){h.fulfilled(a)},function(a){h.rejected(a)})};d.isLoaded()?o():d.load().then(function(){o()},function(a){h.rejected(a)});return h},deleteActivityNode:function(b){var c=
this.validateField("activityNodeUuid",b);return c?c:this.deleteEntity(a.AtomActivityNode,{method:"DELETE",headers:a.AtomXmlHeaders,query:{activityNodeUuid:b}},b)},deleteActivity:function(a){var b=this.validateField("activityUuid",a);return b?b:this.deleteActivityNode(a)},restoreActivity:function(c){var f=this.validateField("activityUuid",c);if(f)return f;var h=this,f=new b;this.getActivityNodeFromTrash(c).then(function(a){return a}).then(function(b){b.isDeleted()?(b={method:"PUT",headers:a.AtomXmlHeaders,
query:{activityNodeUuid:c},data:h._constructPayloadActivityNode(b)},h.updateEntity(a.AtomActivityNodeTrash,b,{createEntity:function(a,b,c){return c}}).then(function(a){f.fulfilled(a)},function(a){f.rejected(a)})):f.rejected("Activity is not in Trash")});return f},restoreActivityNode:function(c){var f=this.validateField("activityNodeUuid",c);if(f)return f;var h=this,f=new b;this.getActivityNodeFromTrash(c).then(function(a){return a}).then(function(b){b.isDeleted()?(b={method:"PUT",headers:a.AtomXmlHeaders,
query:{activityNodeUuid:c},data:h._constructPayloadActivityNode(b)},h.updateEntity(a.AtomActivityNodeTrash,b,{createEntity:function(a,b,c){return c}}).then(function(a){f.fulfilled(a)},function(a){f.rejected(a)})):f.rejected("Activity Node is not in Trash")});return f},getActivityNodeFromTrash:function(b){var c=this.validateField("activityNodeUuid",b);return c?c:this.getEntity(a.AtomActivityNodeTrash,{method:"GET",handleAs:"text",query:{activityNodeUuid:b}},b,y)},newActivityNode:function(a){if(a instanceof
v||a instanceof h)return a;c.isString(a)&&(a={id:a});return new v({service:this,_fields:c.mixin({},a)})},getActivityNodesInTrash:function(b,f){var h=this.validateField("activityUuid",b);if(h)return h;h={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityUuid:b})||{}};return this.getEntities(a.AtomActivitiesTrash,h,y)},newActivity:function(a){if(a instanceof h)return a;c.isString(a)&&(a={id:a});return new h({service:this,_fields:c.mixin({},a)})},getAllToDos:function(b){return this.getEntities(a.AtomActivitiesToDos,
{method:"GET",handleAs:"text",query:b||{}},w)},getAllTags:function(b){return this.getEntities(a.AtomActivitiesTags,{method:"GET",handleAs:"text",query:b||{}},A)},getActivitiesInTrash:function(b){return this.getEntities(a.AtomActivitiesTrash,{method:"GET",handleAs:"text",query:b||{}},w)},getActivityTags:function(b,f){var h=this.validateField("activityUuid",b);if(h)return h;h={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityUuid:b})||{}};return this.getEntities(a.AtomActivitiesTags,h,A)},
getActivityNodeTags:function(b,f){var h=this.validateField("activityNodeUuid",b);if(h)return h;h={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityNodeUuid:b})||{}};return this.getEntities(a.AtomActivitiesTags,h,A)},getMembers:function(b,f){var h=this.validateField("activityUuid",b);if(h)return h;h={method:"GET",handleAs:"text",query:c.mixin(f||{},{activityUuid:b})||{}};return this.getEntities(a.AtomActivitiesMembers,h,B)},_validateMember:function(a,b,c){if(b&&!a.getMemberId())return this.createBadRequestPromise("Invalid argument, member with ID must be specified.");
if(c&&!a.getUserId()&&!a.getEmail())return this.createBadRequestPromise("Invalid argument, member with User ID or Email must be specified.")},getMember:function(a,b){var c=this.validateField("memberId",b);c||(c=this.validateField("activityUuid",a));return c?c:this._toMember(b).load(a)},addMember:function(b,c){var f=this.validateField("memberOrJson",c);f||(f=this.validateField("activityUuid",b));if(f)return f;var h=this._toMember(c);if(f=this._validateMember(h,!1,!0))return f;h.getRole()||h.setRole("member");
f=this._constructPayloadMember(h);return this.updateEntity(a.AtomActivitiesMembers,{method:"POST",headers:a.AtomXmlHeaders,query:{activityUuid:b},data:f},{createEntity:function(a,b,c){return c}})},updateMember:function(b,c){var f=this.validateField("memberOrJson",c);f||(f=this.validateField("activityUuid",b));if(f)return f;var h=this._toMember(c);if(f=this._validateMember(h,!0,!0))return f;f=this._constructPayloadMember(h);h={activityUuid:b,memberid:h.getMemberId()};return this.updateEntity(a.AtomActivitiesMembers,
{method:"PUT",headers:a.AtomXmlHeaders,query:h,data:f},{createEntity:function(a,b,c){return c}})},deleteMember:function(b,c){var f=this.validateField("activityUuid",b);f||(f=this.validateField("memberId",c));return f?f:this.deleteEntity(a.AtomActivitiesMembers,{method:"DELETE",headers:a.AtomXmlHeaders,query:{activityUuid:b,memberid:c}},c)},_toMember:function(a){if(a){if(a instanceof r)return a;var b=new r({service:this});c.isString(a)&&(a={id:a});b._fields=c.mixin({},a);return b}},newMember:function(a){return this._toMember(a)},
_constructPayloadMember:function(a){var b=this;return d.transform('<?xml version="1.0" encoding="UTF-8"?> <entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"> <contributor> ${getEmail} ${getUserid} </contributor> ${getRole} ${getCategory} </entry>',this,function(c,f){var h=null,r=null,o=function(){return q.encodeXmlEntry(r)};"getEmail"==f&&a.getEmail()?(h="<email>${email}</email>",
r=a.getEmail()):"getUserid"==f&&a.getUserId()?(h='<snx:userid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${userid}</snx:userid>',r=a.getUserId()):"getRole"==f&&a.getRole()?(h='<snx:role xmlns:snx="http://www.ibm.com/xmlns/prod/sn" component="http://www.ibm.com/xmlns/prod/sn/activities">${role}</snx:role>',r=a.getRole()):"getCategory"==f&&a.getCategory()&&(h='<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="${category}" label="${category}" />',r=a.getCategory());h&&(c=d.transform(h,
b,o,b));return c},this)},_constructPayloadActivityNode:function(a){var b="",c="",f="",h="",r="",o="",e="",w="",v="";if(a.getFields&&0<a.getFields().length){var s=a.getFields(),g;for(g in s){var u=s[g],A="",i=function(a,b){u[b]?a=q.encodeXmlEntry(u[b]):""!=A&&(a=A);return a},y='<summary type="text">${summary}</summary>';"person"==u.type?y="<name>${personName}</name> <email>{email}</email> <snx:userid>${userId}</snx:userid>":"link"==u.type?y='<link href="${url}" title="${title}" />':"date"==u.type&&
(y="${date}");A=d.transform(y,this,i,this);b+=d.transform('<snx:field name="${name}" fid="${fid}" position="${position}" type="${type}">${getText}${getPerson}${getDate}${getLink}${getFile}</snx:field>',this,i,this)}}a.getPosition()&&(f=d.transform("<snx:position>${position}</snx:position>",this,function(b,c){"position"==c&&(b=a.getPosition());return b},this));a.getCommunityUrl()&&(h=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="community_activity" label="Community Activity"/><snx:communityUuid>${coummunityUuid}</communityUuid><link rel="http://www.ibm.com/xmlns/prod/sn/container" type="application/atom+xml" href="${communityUrl}"/>',
this,function(b,c){"communityUrl"==c&&(b=a.getCommunityUrl());"communityUuid"==c&&(b=a.getCommunityUuid());return b},this));a.isCompleted()&&(o='<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="completed"/>');a.isTemplate()&&(e='<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="template"/>');a.getDueDate()&&(w=d.transform("<snx:duedate>${dueDate}</duedate>",this,function(b,c){"dueDate"==c&&(b=a.getDueDate());return b},this));a.getIconUrl()&&(v=d.transform("<snx:icon>${iconUrl}</snx:icon>",
this,function(b,c){"iconUrl"==c&&(b=a.getIconUrl());return b},this));if(a.getTags())for(g in s=a.getTags(),s)var k=s[g],i=function(a,b){"tag"==b&&(a=k);return a},r=r+d.transform('<category term="${tag}" /> ',this,i,this);a.getInReplyToId&&a.getInReplyToId()&&-1==a.getInReplyToId().indexOf(a.getActivityUuid())&&(c=d.transform('<thr:in-reply-to ref="${inReplyToId}" type="application/atom+xml" href="${inReplyToUrl}" source="${activityUuid}" />',this,function(b,c){"inReplyToId"==c?b=a.getInReplyToId():
"inReplyToUrl"==c?b=a.getInReplyToUrl():"activityUuid"==c&&(b=a.getActivityUuid());return b},this));a.getAssignedToUserId&&a.getAssignedToUserId()&&(assignedToxml=d.transform('<snx:assignedto name="${name}" userid="${userId}">${email}</snx:assignedto>',this,function(b,c){"name"==c?b=a.getAssignedToName():"userId"==c?b=a.getAssignedToUserId():"email"==c&&(b=a.getAssignedToEmail());return b},this));return d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app" xmlns:snx="http://www.ibm.com/xmlns/prod/sn" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:thr="http://purl.org/syndication/thread/1.0"><category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="${type}" label="${type}" /> <content type="html">${content}</content><title type="text">${title}</title>${getPosition}${getCommunity}${getTags}${getCompleted}${getCompleted}${getDueDate}${getInReplyTo}${getAssignedTo}${getIcon}${getFields}</entry>',
this,function(d,s){"title"==s&&a.getTitle()?d=q.encodeXmlEntry(a.getTitle()):"content"==s&&a.getContent()?d=q.encodeXmlEntry(a.getContent()):"type"==s&&a.getType()?d=q.encodeXmlEntry(a.getType()):"getFields"==s&&""!=b?d=b:"getInReplyTo"==s&&""!=c?d=c:"getPosition"==s&&""!=f?d=f:"getCommunity"==s&&""!=h?d=h:"getTags"==s&&""!=r?d=r:"getTemplate"==s&&""!=e?d=e:"getCompleted"==s&&""!=o?d=o:"getDueDate"==s&&""!=w?d=w:"getIcon"==s&&""!=v&&(d=v);return d},this)}})})},"sbt/connections/ActivityStreamConstants":function(){define(["../lang",
"./ConnectionsConstants"],function(g,e){return g.mixin({ASUser:{ME:"@me",PUBLIC:"@public",COMMUNITY:"urn:lsid:lconn.ibm.com:communities.community:",UBLOG:"ublog"},ASGroup:{ALL:"@all",FOLLOWING:"@following",FRIENDS:"@friends",SELF:"@self",INVOLVED:"@involved",NOTESFORME:"@notesforme",NOTESFROMME:"@notesfromme",RESPONSES:"@responses",ACTIONS:"@actions",SAVED:"@saved"},ASApplication:{ALL:"@all",COMMUNITIES:"@communities",TAGS:"@tags",PEOPLE:"@people",STATUS:"@status",NOTESFORME:"@notesforme",NOTESFROMME:"@notesfromme",
RESPONSES:"@responses",COMMENTS:"comments"},Verb:{ACCEPT:"accept",ACCESS:"access",ACKNOWLEDGE:"acknowledge",ADD:"add",AGREE:"agree",APPEND:"append",APPROVE:"approve",ARCHIVE:"archive",ASSIGN:"assign",AT:"at",ATTACH:"attach",ATTEND:"attend",AUTHOR:"author",AUTHORIZE:"authorize",BORROW:"borrow",BUILD:"build",CANCEL:"cancel",CLOSE:"close",COMMENT:"comment",COMPLETE:"complete",CONFIRM:"confirm",CONSUME:"consume",CHECKIN:"checkin",CREATE:"create",DELETE:"delete",DELIVER:"deliver",DENY:"deny",DISAGREE:"disagree",
DISLIKE:"dislike",EXPERIENCE:"experience",FAVORITE:"favorite",FIND:"find",FLAG_AS_INAPPROPRIATE:"flag-as-inappropriate",FOLLOW:"follow",GIVE:"give",HOST:"host",IGNORE:"ignore",INSERT:"insert",INSTALL:"install",INTERACT:"interact",INVITE:"invite",JOIN:"join",LEAVE:"leave",LIKE:"like",LISTEN:"listen",LOSE:"lose",MAKE_FRIEND:"make-friend",OPEN:"open",POST:"post",PLAY:"play",PRESENT:"present",PURCHASE:"purchase",QUALIFY:"qualify",READ:"read",RECEIVE:"receive",REJECT:"reject",REMOVE:"remove",REMOVE_FRIEND:"remove-friend",
REPLACE:"replace",REQUEST:"request",REQUEST_FRIEND:"request-friend",RESOLVE:"resolve",RETURN:"return",RETRACT:"retract",RSVP_MAYBE:"rsvp-maybe",RSVP_NO:"rsvp-no",RSVP_YES:"rsvp-yes",SATISFY:"satisfy",SAVE:"save",SCHEDULE:"schedule",SEARCH:"search",SELL:"sell",SEND:"send",SHARE:"share",SPONSOR:"sponsor",START:"start",STOP_FOLLOWING:"stop-following",SUBMIT:"submit",TAG:"tag",TERMINATE:"terminate",TIE:"tie",UNFAVORITE:"unfavorite",UNLIKE:"unlike",UNSAVE:"unsave",UNSATISFY:"unsatisfy",UNSHARE:"unshare",
UPDATE:"update",USE:"use",WATCH:"watch",WIN:"win"},ActivityStreamUrls:{activityStreamBaseUrl:"/${connections}/opensocial/",activityStreamRestUrl:"/rest/activitystreams/",activityStreamUBlogRestUrl:"/rest/ublog/"},errorMessages:{args_object:"argument passed to get stream should be an Object",required_communityid:"Community ID is required"}},e)})},"sbt/connections/ActivityStreamService":function(){define("../declare,../lang,../stringUtil,../config,../Promise,./ActivityStreamConstants,../base/BaseService,../base/BaseEntity,../base/DataHandler,sbt/json".split(","),
function(g,e,c,d,b,a,j,k,i,q){var m=g(i,{constructor:function(a){e.mixin(this,a);this.data=a.data},getSummary:function(){if(!this._summary&&this.data.totalResults)this._summary={totalResults:this.data.totalResults,startIndex:this.data.startIndex,itemsPerPage:this.data.itemsPerPage};return this._summary},getEntitiesDataArray:function(){return this.data.list}}),n=g(k,{data:null,getPublishedDate:function(){return this.dataHandler.data.published},getPlainTitle:function(){return this.dataHandler.data.connections.plainTitle},
getActorDisplayName:function(){return this.dataHandler.data.actor.displayName},getActor:function(){return this.dataHandler.data.actor},getVerb:function(){return this.dataHandler.data.verb},getId:function(){return this.dataHandler.data.id}}),p={createEntities:function(a,b){return new m({data:b})},createEntity:function(a,b){var c=new m({data:b});return new n({service:a,dataHandler:c})}};return g(j,{contextRootMap:{connections:"connections"},constructor:function(){if(!this.endpoint)this.endpoint=d.findEndpoint(this.getDefaultEndpointName())},
getDefaultEndpointName:function(){return"connections"},getActivityStreamCallbacks:function(){return p},getStream:function(b,c,d,e){return this.getEntities(this.constructUrl(a.ActivityStreamUrls.activityStreamBaseUrl+"{authType}"+a.ActivityStreamUrls.activityStreamRestUrl+"{userType}/{groupType}/{appType}",{},{authType:this.endpoint.authType,userType:b||a.ASUser.PUBLIC,groupType:c||a.ASGroup.ALL,appType:d||a.ASApplication.STATUS}),{method:"GET",handleAs:"json",query:e||{}},this.getActivityStreamCallbacks())},
getAllUpdates:function(b){return this.getStream(a.ASUser.PUBLIC,a.ASGroup.ALL,a.ASApplication.ALL,b)},getMyStatusUpdates:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ALL,a.ASApplication.STATUS,b)},getStatusUpdatesFromMyNetwork:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.FRIENDS,a.ASApplication.STATUS,b)},getUpdatesFromMyNetwork:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.FRIENDS,a.ASApplication.ALL,b)},getUpdatesFromPeopleIFollow:function(b){return this.getStream(a.ASUser.ME,
a.ASGroup.FOLLOWING,a.ASApplication.STATUS,b)},getUpdatesFromCommunitiesIFollow:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ALL,a.ASApplication.COMMUNITIES,b)},getUpdatesFromCommunity:function(b,c){var d=this._validateCommunityUuid(b);return d?d:this.getStream(a.ASUser.COMMUNITY+b,a.ASGroup.ALL,a.ASApplication.ALL,c)},getUpdatesFromUser:function(b,c){var d=this._validateUserId(b);return d?d:this.getStream(b,a.ASGroup.INVOLVED,a.ASApplication.ALL,c)},getNotificationsForMe:function(b){return this.getStream(a.ASUser.ME,
a.ASGroup.RESPONSES,a.ASApplication.ALL,b)},getNotificationsFromMe:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.NOTESFROMME,a.ASApplication.ALL,b)},getResponsesToMyContent:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.RESPONSES,a.ASApplication.ALL,b)},getMyActionableItems:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.ACTIONS,a.ASApplication.ALL,b)},getMyActionableItemsForApplication:function(b,c){var d=this._validateApplicationName(b);return d?d:this.getStream(a.ASUser.ME,
a.ASGroup.ACTIONS,b,c)},getMySavedItems:function(b){return this.getStream(a.ASUser.ME,a.ASGroup.SAVED,a.ASApplication.ALL,b)},getMySavedItemsForApplication:function(b,c){var d=this._validateApplicationName(b);return d?d:this.getStream(a.ASUser.ME,a.ASGroup.SAVED,b,c)},searchByQuery:function(a){var b=this._validateSearchQuery(a);return b?b:this.getStream(null,null,null,{query:a})},searchByFilters:function(a,b){var c=this._validateSearchQuery(a);if(c||(c=this._validateSearchFilters(b)))return c;c={};
c.query=a;c.filters=b;return this.getStream(null,null,null,c)},searchByTags:function(a){var b=this._validateSearchTags(a);if(b)return b;b={};b.filters="[{'type':'tag','values':['"+a+"']}]";return this.getStream(null,null,null,b)},searchByPattern:function(a){var b=this._validateSearchTags(a);if(b)return b;b={};b.custom=a;return this.getStream(null,null,null,b)},postEntry:function(b,c,d,e,s){c=a.ActivityStreamUrls.activityStreamBaseUrl+this.endpoint.authType+a.ActivityStreamUrls.activityStreamRestUrl+
(c||a.ASUser.ME)+"/"+(d||a.ASGroup.ALL)+"/"+(e||a.ASApplication.ALL);b={method:"POST",query:s||{},handleAs:"json",headers:{"Content-Type":"application/json"},data:q.stringify(b)};return this.updateEntity(c,b,{createEntity:function(a,b){return b}},s)},postMicroblogEntry:function(b,c,d,e,s){if("string"==typeof b)b={content:b};else if("object"!=typeof b)return this.createBadRequestPromise("Invalid argument with postMicroblogEntry, expected String or Object");c=a.ActivityStreamUrls.activityStreamBaseUrl+
this.endpoint.authType+a.ActivityStreamUrls.activityStreamUBlogRestUrl+(c||a.ASUser.ME)+"/"+(d||a.ASGroup.ALL)+"/"+(e||"");b={method:"POST",query:s||{},handleAs:"json",headers:{"Content-Type":"application/json"},data:q.stringify(b)};return this.updateEntity(c,b,{createEntity:function(a,b){return b}},s)},_validateCommunityUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateSearchQuery:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},
_validateApplicationName:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected application name.")},_validateSearchTags:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateSearchFilters:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateUserId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userId.")}})})},
"sbt/connections/BlogConstants":function(){define(["../lang","./ConnectionsConstants"],function(g,e){return g.mixin({BlogFeedXPath:e.ConnectionsFeedXPath,RecommendersFeedXpath:{entries:"/a:feed/a:entry",totalResults:"/a:feed/os:totalResults"},BlogXPath:{entry:"/a:entry",uid:"a:id",blogUuid:"a:id",title:"a:title",summary:"a:summary[@type='html']",blogUrl:"a:link[@rel='alternate']/@href",published:"a:published",updated:"a:updated",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",
handle:"snx:handle",timezone:"snx:timezone",rank:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",categoryupdates:"a:category[@term='updates']",categoryfaq:"a:category[@term='faq']",categorywith:"a:category[@term='with']",categoryshared:"a:category[@term='shared']"},BlogPostXPath:{entry:"/a:entry",uid:"a:id",postUuid:"a:id",title:"a:title",summary:"a:summary[@type='html']",blogEntryUrlAlternate:"a:link[@rel='alternate']/@href",blogEntryUrl:"a:link[@rel='self']/@href",replies:"a:link[@rel='replies']/@href",
recomendationsUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/recommendations']/@href",content:"a:content[@type='html']",published:"a:published",updated:"a:updated",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",authorState:"a:author/a:state",rankRecommendations:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",rankComment:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",rankHit:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/hit']",
sourceId:"a:source/a:id",sourceTitle:"a:source/a:title ",sourceLink:"a:source/a:link[@rel='self']/@href",sourceLinkAlternate:"a:source/a:link[@rel='alternate']/@href",sourceUpdated:"a:source/a:updated",sourceCategory:"a:source/a:link[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",blogHandle:"blogHandle"},CommentXPath:{entry:"/a:entry",uid:"a:id",commentUuid:"a:id",title:"a:title",summary:"a:summary[@type='html']",commentUrlAlternate:"a:link[@rel='alternate']/@href",commentUrl:"a:link[@rel='self']/@href",
recomendationsUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/recommendations']/@href",content:"a:content[@type='html']",published:"a:published",updated:"a:updated",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",authorState:"a:author/a:state",trackbacktitle:"snx:trackbacktitle",replyTo:"thr:in-reply-to/@ref",replyToSource:"thr:in-reply-to/@source",rankRecommendations:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",sourceId:"a:source/a:id",
sourceTitle:"a:source/a:title ",sourceLink:"a:source/a:link[@rel='self']/@href",sourceLinkAlternate:"a:source/a:link[@rel='alternate']/@href",blogHandle:"blogHandle",blogPostUuid:"blogPostUuid"},RecommendersXPath:{entry:"/a:entry",uid:"a:id",recommenderUuid:"a:id",title:"a:title",summary:"a:summary[@type='text']",updated:"a:updated",contributorUserid:"a:contributor/snx:userid",contributorName:"a:contributor/a:name",contributorEmail:"a:contributor/a:email",contributorState:"a:contributor/a:state",
category:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term"},AtomBlogsAll:"/${blogs}/${blogHomepageHandle}/feed/blogs/atom",AtomBlogsMy:"/${blogs}/${blogHomepageHandle}/api/blogs",AtomBlogInstance:"/${blogs}/${blogHomepageHandle}/api/blogs/{blogUuid}",AtomBlogPostInstance:"/${blogs}/${blogHomepageHandle}/api/entries/{postUuid}",AtomEntriesAll:"/${blogs}/${blogHomepageHandle}/feed/entries/atom",AtomBlogEntries:"/${blogs}/{blogHandle}/feed/entries/atom",AtomBlogComments:"/${blogs}/{blogHandle}/feed/comments/atom",
AtomBlogCommentsAll:"/${blogs}/${blogHomepageHandle}/feed/comments/atom",AtomBlogsFeatured:"/${blogs}/${blogHomepageHandle}/feed/featuredblogs/atom",AtomBlogsPostsFeatured:"/${blogs}/${blogHomepageHandle}/feed/featured/atom",AtomBlogsPostsRecommended:"/${blogs}/${blogHomepageHandle}/feed/recommended/atom",AtomBlogsTags:"/${blogs}/${blogHomepageHandle}/feed/tags/atom",AtomBlogTags:"/${blogs}/{blogHandle}/feed/tags/atom",AtomBlogCreate:"/${blogs}/${blogHomepageHandle}/api/blogs",AtomBlogEditDelete:"/${blogs}/${blogHomepageHandle}/api/blogs/{blogUuid}",
AtomBlogPostCreate:"/${blogs}/{blogHandle}/api/entries",AtomBlogPostEditDelete:"/${blogs}/{blogHandle}/api/entries/{postUuid}",AtomBlogCommentCreate:"/${blogs}/{blogHandle}/api/entrycomments/{postUuid}",AtomBlogCommentEditRemove:"/${blogs}/{blogHandle}/api/comments/{commentUuid}",AtomRecommendBlogPost:"/${blogs}/{blogHandle}/api/recommend/entries/{postUuid}"},e)})},"sbt/connections/BlogService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./BlogConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler,./Tag".split(","),
function(g,e,c,d,b,a,j,k,i,q){CategoryTmpl='<category term="${tag}"></category>';var m=g(k,{constructor:function(){},getHandle:function(){return this.getAsString("handle")},setHandle:function(a){return this.setAsString("handle",a)},getBlogUuid:function(){var a=this.getAsString("blogUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:blog-")&&(a=a.substring(28,a.length));return a},setBlogUuid:function(a){return this.setAsString("blogUuid",a)},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",
a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName","authorEmail"])},getSummary:function(){return this.getAsString("summary")},setSummary:function(){return this.setAsString("summary",summary)},getBlogUrl:function(){return this.getAsString("blogUrl")},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},load:function(b){var h=
this.getBlogUuid(),d=this.service._validateBlogUuid(h);if(d)return d;var f=this,b={handleAs:"text",query:c.mixin({},b||{})},d=null,d=this.service.constructUrl(a.AtomBlogInstance,null,{blogUuid:h});return this.service.getEntity(d,b,h,{createEntity:function(b,c){f.setDataHandler(new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogXPath}));return f}})},remove:function(a){return this.service.deleteBlog(this.getBlogUuid(),a)},update:function(a){return this.service.updateBlog(this,a)},save:function(a){return this.getBlogUuid()?
this.service.updateBlog(this,a):this.service.createBlog(this,a)}}),n=g(k,{constructor:function(){},getBlogPostUuid:function(){var a=this.getAsString("postUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:entry-")&&(a=a.substring(29,a.length));return a},setBlogPostUuid:function(a){return this.setAsString("postUuid",a)},getBlogHandle:function(){var a=this.getAsString("blogHandle");return a?a:a=this.service._extractBlogHandle(this.getAsString("blogEntryUrlAlternate"))},setBlogHandle:function(a){return this.setAsString("blogHandle",
a)},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName","authorEmail","authorState"])},getSummary:function(){return this.getAsString("summary")},getSelfUrl:function(){return this.getAsString("blogEntryUrl")},getAlternateUrl:function(){return this.getAsString("blogEntryUrlAlternate")},getRepliesUrl:function(){return this.getAsString("replies")},getTags:function(){return this.getAsArray("tags")},
setTags:function(a){return this.setAsArray("tags",a)},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",a)},getRecomendationsURL:function(){return this.getAsString("recomendationsUrl")},getRecomendationsCount:function(){return this.getAsString("rankRecommendations")},getCommentCount:function(){return this.getAsString("rankComment")},
getHitCount:function(){return this.getAsDate("rankHit")},getSource:function(){return this.getAsObject("sourceId,sourceTitle,sourceLink,sourceLinkAlternate,sourceUpdated,sourceCategory".split(","))},load:function(b){var h=this.getBlogPostUuid(),d=this.service._validateBlogUuid(h);if(d)return d;var f=this,b={handleAs:"text",query:c.mixin({},b||{})},d=null,d=this.service.constructUrl(a.AtomBlogPostInstance,null,{postUuid:h});return this.service.getEntity(d,b,h,{createEntity:function(b,c){f.setDataHandler(new i({service:b,
data:c,namespaces:a.Namespaces,xpath:a.BlogPostXPath}));return f}})},remove:function(a){return this.service.deletePost(this.getBlogPostUuid(),a)},update:function(a){return this.service.updatePost(this,a)},save:function(a){return this.getBlogPostUuid()?this.service.updatePost(this,a):this.service.createPost(this,a)}}),p=g(k,{constructor:function(){},getCommentUuid:function(){var a=this.getAsString("commentUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:comment-")&&(a=a.substring(31,a.length));return a},
setCommentUuid:function(a){return this.setAsString("CommentUuid",a)},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName","authorEmail","authorState"])},getSummary:function(){return this.getAsString("summary")},getSelfUrl:function(){return this.getAsString("commentUrl")},getAlternateUrl:function(){return this.getAsString("commentUrlAlternate")},getPublished:function(){return this.getAsDate("published")},
getUpdated:function(){return this.getAsDate("updated")},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",a)},getRecomendationsURL:function(){return this.getAsString("recomendationsUrl")},getRecomendationsCount:function(){return this.getAsString("rankRecommendations")},getReplyTo:function(){return this.getAsString("replyTo")},getPostUuid:function(){var a=this.getAsString("blogPostUuid");if(a)return a;(a=this.getAsString("replyTo"))&&
-1!=a.indexOf("urn:lsid:ibm.com:blogs:entry-")&&(a=a.substring(29,a.length));return a},setBlogPostUuid:function(a){return this.setAsString("blogPostUuid",a)},getBlogHandle:function(){var a=this.getAsString("blogHandle");return a?a:a=this.service._extractBlogHandle(this.getAsString("commentUrlAlternate"))},setBlogHandle:function(a){this.setAsString("blogHandle",a);return this.setAsString("blogHandle",a)},getTrackbackTitle:function(){return this.getAsDate("trackbacktitle")},getSource:function(){return this.getAsObject(["sourceId",
"sourceTitle","sourceLink","sourceLinkAlternate"])},load:function(b,h,d){var f=this.service._validateUuid(h);if(f)return f;var o=this,d={handleAs:"text",query:c.mixin({},d||{})},f=null,f=this.service.constructUrl(a.AtomBlogCommentEditRemove,null,{blogHandle:b,commentUuid:h});return this.service.getEntity(f,d,h,{createEntity:function(b,c){o.setDataHandler(new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommentXPath}));return o}})},remove:function(a){return this.service.deleteComment(this.getCommentUuid(),
a)},save:function(a){return this.service.createPost(this,a)}}),f=g(k,{constructor:function(){},getRecommenderUuid:function(){var a=this.getAsString("recommenderUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:blogs:person-")&&(a=a.substring(30,a.length));return a},getTitle:function(){return this.getAsString("title")},getContributor:function(){return this.getAsObject(["contributorUserid","contributorName","contributorEmail","contributorState"])},getSummary:function(){return this.getAsString("summary")},getUpdated:function(){return this.getAsDate("updated")}}),
t={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},createEntity:function(b,c){var h=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogXPath});return new m({service:b,dataHandler:h})}},o={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(b,c){var h=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogPostXPath});return new n({service:b,dataHandler:h})}},
u={createEntities:function(b,c){return new i({data:c,namespaces:a.Namespaces,xpath:a.TagsXPath})},createEntity:function(b,c){var h=new i({data:c,namespaces:a.Namespaces,xpath:a.TagsXPath});return new q({service:b,id:h.getEntityId(),dataHandler:h})}},s={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},createEntity:function(b,c){var h=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogPostXPath});return new n({service:b,dataHandler:h})}},
h={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},createEntity:function(b,c){var h=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.RecommendersXPath});return new f({service:b,dataHandler:h})}},v={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogFeedXPath})},createEntity:function(b,c){var h=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommentXPath});return new p({service:b,
dataHandler:h})}};return g(j,{contextRootMap:{blogs:"blogs"},constructor:function(){if(!this.endpoint&&(this.endpoint=e.findEndpoint(this.getDefaultEndpointName()),!this.endpoint.serviceMappings.blogHomepageHandle))this.endpoint.serviceMappings.blogHomepageHandle=this.getDefaultHandle()},getDefaultEndpointName:function(){return"connections"},getDefaultHandle:function(){return"homepage"},getBlogs:function(b){return this.getEntities(a.AtomBlogsAll,{method:"GET",handleAs:"text",query:b||{}},this.getBlogFeedCallbacks())},
getMyBlogs:function(b){return this.getEntities(a.AtomBlogsMy,{method:"GET",handleAs:"text",query:b||{}},this.getBlogFeedCallbacks())},getFeaturedBlogs:function(b){return this.getEntities(a.AtomBlogsFeatured,{method:"GET",handleAs:"text",query:b||{}},this.getBlogFeedCallbacks())},getFeaturedPosts:function(b){return this.getEntities(a.AtomBlogsPostsFeatured,{method:"GET",handleAs:"text",query:b||{}},this.getBlogPostsCallbacks())},getRecommendedPosts:function(b){return this.getEntities(a.AtomBlogsPostsRecommended,
{method:"GET",handleAs:"text",query:b||{}},this.getBlogPostsCallbacks())},getBlogsPosts:function(b){return this.getEntities(a.AtomEntriesAll,{method:"GET",handleAs:"text",query:b||{}},this.getBlogPostsCallbacks())},getBlogPosts:function(b,c){var h={method:"GET",handleAs:"text",query:c||{}},d=null,d=this.constructUrl(a.AtomBlogEntries,null,{blogHandle:b});return this.getEntities(d,h,this.getBlogPostsCallbacks())},getBlogPostRecommenders:function(b,c){var h=this._toBlogPost(b),d=this._validateBlogPost(h);
if(d)return d;var d={method:"GET",handleAs:"text",query:c||{}},f=null,f=this.constructUrl(a.AtomRecommendBlogPost,null,{postUuid:h.getBlogPostUuid(),blogHandle:h.getBlogHandle()});return this.getEntities(f,d,this.getBlogPostRecommendersCallbacks())},getBlogsComments:function(b){return this.getEntities(a.AtomBlogCommentsAll,{method:"GET",handleAs:"text",query:b||{}},this.getBlogPostCommentsCallbacks())},getBlogComments:function(b,c){var h={method:"GET",handleAs:"text",query:c||{}},d=null,d=this.constructUrl(a.AtomBlogComments,
null,{blogHandle:b});return this.getEntities(d,h,this.getBlogPostCommentsCallbacks())},getBlog:function(a,b){return(new m({service:this,_fields:{blogUuid:a}})).load(b)},createBlog:function(b,c){var h=this._toBlog(b),d=this._validateBlog(h,!1,c);if(d)return d;d={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:this._constructBlogPostData(h)};return this.updateEntity(a.AtomBlogCreate,d,{createEntity:function(b,c){if(c){var d=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogXPath});
h.setDataHandler(d)}h.setData(c);return h}},c)},updateBlog:function(b,h){var d=this._toBlog(b),f=this._validateBlog(d,!0,h);if(f)return f;var f={method:"PUT",query:c.mixin({},h||{}),headers:a.AtomXmlHeaders,data:this._constructBlogPostData(d)},o=d.getBlogUuid(),e=null,e=this.constructUrl(a.AtomBlogEditDelete,null,{blogUuid:o});return this.updateEntity(e,f,{createEntity:function(b,c){var h=d.getBlogUuid();if(c){var f=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogXPath});d.setDataHandler(f)}d.setBlogUuid(h);
return d}},h)},deleteBlog:function(b,h){var d=this._validateBlogUuid(b);if(d)return d;var d={method:"DELETE",query:c.mixin({},h||{}),handleAs:"text"},f=null,f=this.constructUrl(a.AtomBlogEditDelete,null,{blogUuid:b});return this.deleteEntity(f,d,b)},getBlogPost:function(a,b){return(new n({service:this,_fields:{postUuid:a}})).load(b)},createPost:function(b,c){var h=this._toBlogPost(b),d=this._validateBlog(h,!1,c);if(d)return d;var d={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:this._constructBlogPostPostData(h)},
f=null,f=this.constructUrl(a.AtomBlogPostCreate,null,{blogHandle:b.getBlogHandle()});return this.updateEntity(f,d,{createEntity:function(b,c){if(c){var d=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogPostXPath});h.setDataHandler(d)}h.setData(c);return h}},c)},updatePost:function(b,h){var d=this._toBlogPost(b),f=this._validateBlogPost(d,!0,h);if(f)return f;var f={method:"PUT",query:c.mixin({},h||{}),headers:a.AtomXmlHeaders,data:this._constructBlogPostPostData(d)},o=null,o=this.constructUrl(a.AtomBlogPostEditDelete,
null,{postUuid:d.getBlogPostUuid(),blogHandle:d.getBlogHandle()});return this.updateEntity(o,f,{createEntity:function(b,c){var h=d.getBlogPostUuid();if(c){var f=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BlogPostXPath});d.setDataHandler(f)}d.setBlogPostUuid(h);return d}},h)},recommendPost:function(b){var b=this._toBlogPost(b),c=this._validateBlogPost(b);if(c)return c;var c={method:"POST",headers:a.AtomXmlHeaders},h=null,h=this.constructUrl(a.AtomRecommendBlogPost,null,{postUuid:b.getBlogPostUuid(),
blogHandle:b.getBlogHandle()});return this.updateEntity(h,c,this.getRecommendBlogPostCallbacks())},unrecommendPost:function(b){var c=this._toBlogPost(b),h=this._validateBlogPost(c);if(h)return h;var h={method:"DELETE",headers:a.AtomXmlHeaders},d=null,d=this.constructUrl(a.AtomRecommendBlogPost,null,{postUuid:c.getBlogPostUuid(),blogHandle:c.getBlogHandle()});return this.deleteEntity(d,h,b.getBlogPostUuid())},deletePost:function(b,h,d){var f=this._validateUuid(h);if(f)return f;d={method:"DELETE",query:c.mixin({},
d||{}),handleAs:"text"};f=null;f=this.constructUrl(a.AtomBlogPostEditDelete,null,{blogHandle:b,postUuid:h});return this.deleteEntity(f,d,h)},deleteComment:function(b,h,d){var f=this._validateUuid(h);if(f)return f;d={method:"DELETE",query:c.mixin({},d||{}),handleAs:"text"};f=null;f=this.constructUrl(a.AtomBlogCommentEditRemove,null,{blogHandle:b,commentUuid:h});return this.deleteEntity(f,d,h)},createComment:function(b,c){var h=this._toComment(b),d=this._validateComment(h);if(d)return d;var d={method:"POST",
query:c||{},headers:a.AtomXmlHeaders,data:this._constructCommentBlogPostData(h)},f=null,f=this.constructUrl(a.AtomBlogCommentCreate,null,{blogHandle:b.getBlogHandle(),postUuid:b.getPostUuid()});return this.updateEntity(f,d,{createEntity:function(b,c){if(c){var d=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommentXPath});h.setDataHandler(d)}h.setData(c);return h}},c)},getComment:function(a,b,c){return(new p({service:this,_fields:{commentUuid:b}})).load(a,b,c)},getBlogsTags:function(b){return this.getEntities(a.AtomBlogsTags,
{method:"GET",handleAs:"text",query:b||{}},this.getTagsFeedCallbacks(),b)},getBlogTags:function(b,c){var h={method:"GET",handleAs:"text",query:c||{}},d=null,d=this.constructUrl(a.AtomBlogTags,null,{blogHandle:b});return this.getEntities(d,h,this.getTagsFeedCallbacks(),c)},newBlog:function(a){return this._toBlog(a)},newBlogPost:function(a){return this._toBlogPost(a)},newComment:function(a){return this._toComment(a)},getBlogFeedCallbacks:function(){return t},getTagsFeedCallbacks:function(){return u},
getRecommendBlogPostCallbacks:function(){return o},getBlogPostsCallbacks:function(){return s},getBlogPostRecommendersCallbacks:function(){return h},getBlogPostCommentsCallbacks:function(){return v},_toBlog:function(a){if(a instanceof m)return a;c.isString(a)&&(a={blogUuid:a});return new m({service:this,_fields:c.mixin({},a)})},_toBlogPost:function(a){if(a instanceof n)return a;c.isString(a)&&(a={postUuid:a});return new n({service:this,_fields:c.mixin({},a)})},_toComment:function(a){if(a instanceof
p)return a;c.isString(a)&&(a={commentUuid:a});return new p({service:this,_fields:c.mixin({},a)})},_validateBlogUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected blogUuid.")},_validateUuid:function(a){if(!a)return this.createBadRequestPromise("Invalid argument, blog post id must be specified.")},_validateBlogPost:function(a){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, blog post with title must be specified.")},_validateComment:function(a){if(!a||
!a.getContent())return this.createBadRequestPromise("Invalid argument, blog comment with content must be specified.")},_validateBlog:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, blog with title must be specified.");if(b&&!a.getBlogUuid())return this.createBadRequestPromise("Invalid argument, blog with UUID must be specified.")},_constructBlogPostData:function(a){a=d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app"  xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><title type="text">${getTitle}</title><snx:timezone>${getTimezone}</snx:timezone><snx:handle>${getHandle}</snx:handle><summary type="html">${getSummary}</summary>${getTags}</entry>',
a,function(a,b){if("getTags"==b){var c=a,a="",h;for(h in c)a+=d.transform(CategoryTmpl,{tag:c[h]})}return a},a);return d.trim(a)},_constructBlogPostPostData:function(a){a=d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app"  xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><title type="text">${getTitle}</title><content type="html">${getContent}</content>${getTags}</entry>',
a,function(a,b){if("getTags"==b){var c=a,a="",h;for(h in c)a+=d.transform(CategoryTmpl,{tag:c[h]})}return a},a);return d.trim(a)},_constructCommentBlogPostData:function(a){a=d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app"  xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><content type="html">${getContent}</content></entry>',a,function(a){return a},a);return d.trim(a)},
_extractBlogHandle:function(a){a=a.substring(0,a.indexOf("/entry/"));return a.substring(a.lastIndexOf("/")+1,a.length)}})})},"sbt/connections/Tag":function(){define(["../declare","../base/BaseEntity"],function(g,e){return g(e,{constructor:function(){},getTerm:function(){return this.getAsString("term")},getFrequency:function(){return this.getAsNumber("frequency")}})})},"sbt/connections/BookmarkConstants":function(){define(["../lang","./ConnectionsConstants"],function(g,e){return g.mixin({BookmarkFeedXPath:e.ConnectionsFeedXPath,
BookmarkXPath:{entry:"/a:entry",uid:"a:id",BookmarkUuid:"a:id",title:"a:title",privateFlag:"a:category[@term='private' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",categoryType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",content:"a:content",updated:"a:updated",published:"a:published",link:"a:link[not(@rel)]/@href",linkEdit:"a:link[@rel='edit']/@href",linkSame:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/same']/@href",url:"a:link[1]/@href",authorId:"a:author/snx:userid",
authorName:"a:author/a:name",authorEmail:"a:author/a:email",authorUri:"a:author/a:uri",tags:"a:category[not(@scheme)]/@term",clickcount:"snx:clickcount"},AtomBookmarksAll:"/${dogear}/atom",AtomBookmarksPopular:"/${dogear}/atom/popular",AtomBookmarksMyNotifications:"/${dogear}/atom/mynotifications",AtomBookmarksINotifiedMySentNotifications:"/${dogear}/atom/mysentnotifications",AtomBookmarksTags:"/${dogear}/tags",AtomBookmarkCreateUpdateDelete:"/${dogear}/api/app"},e)})},"sbt/connections/BookmarkService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./BookmarkConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler,./Tag".split(","),
function(g,e,c,d,b,a,j,k,i,q){CategoryTmpl='<category term="${tag}"></category>';var m=g(k,{constructor:function(){},getBookmarkUuid:function(){return this.getAsString("BookmarkUuid")},setBookmarkUuid:function(a){return this.setAsString("BookmarkUuid",a)},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",a)},isPrivate:function(){return this.getAsBoolean("privateFlag")},setPrivate:function(a){return this.setAsBoolean("privateFlag",a)},getUrl:function(){return this.getAsString("link")},
setUrl:function(a){return this.setAsString("link",a)},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",a)},getClickCount:function(){return this.getAsString("clickcount")},getCategoryType:function(){return this.getAsString("categoryType")},getEditLink:function(){return this.getAsString("linkEdit")},getSameLink:function(){return this.getAsString("linkSame")},getAuthor:function(){return this.getAsObject(["authorId","authorName","authorEmail",
"authorUri"])},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},load:function(b){var d=this.getUrl(),o=this.service._validateBookmarkUrl(d);if(o)return o;var e=this,b={handleAs:"text",query:c.mixin({url:d},b||{})};return this.service.getEntity(a.AtomBookmarkCreateUpdateDelete,b,d,{createEntity:function(b,c){e.setDataHandler(new i({service:b,
data:c,namespaces:a.Namespaces,xpath:a.BookmarkXPath}));return e}})},remove:function(a){return this.service.deleteBookmark(this.getUrl(),a)},update:function(a){return this.service.updateBookmark(this,a)},save:function(a){return this.getBookmarkUuid()?this.service.updateBookmark(this,a):this.service.createBookmark(this,a)}}),n={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BookmarkFeedXPath})},createEntity:function(b,c){var d=new i({service:b,data:c,namespaces:a.Namespaces,
xpath:a.BookmarkXPath});return new m({service:b,dataHandler:d})}},p={createEntities:function(b,c){return new i({data:c,namespaces:a.Namespaces,xpath:a.TagsXPath})},createEntity:function(b,c){var d=new i({data:c,namespaces:a.Namespaces,xpath:a.TagsXPath});return new q({service:b,id:d.getEntityId(),dataHandler:d})}};return g(j,{contextRootMap:{dogear:"dogear"},constructor:function(){if(!this.endpoint)this.endpoint=e.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},
getAllBookmarks:function(b){return this.getEntities(a.AtomBookmarksAll,{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getPopularBookmarks:function(b){return this.getEntities(a.AtomBookmarksPopular,{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getBookmarksMyNotifications:function(b){return this.getEntities(a.AtomBookmarksMyNotifications,{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getBookmarksMySentNotifications:function(b){return this.getEntities(a.AtomBookmarksINotifiedMySentNotifications,
{method:"GET",handleAs:"text",query:b||{}},this.getBookmarkFeedCallbacks())},getBookmark:function(a,b){return(new m({service:this,_fields:{link:a}})).load(b)},createBookmark:function(b,c){var d=this._toBookmark(b),e=this._validateBookmark(d,!1,c);if(e)return e;e={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:this._constructBookmarkPostData(d)};return this.updateEntity(a.AtomBookmarkCreateUpdateDelete,e,{createEntity:function(b,c){if(c){var f=new i({service:b,data:c,namespaces:a.Namespaces,
xpath:a.BookmarkXPath});d.setDataHandler(f)}d.setData(c);return d}},c)},updateBookmark:function(b,d){var o=this._toBookmark(b),e=this._validateBookmark(o,!0,d);if(e)return e;e={method:"PUT",query:c.mixin({url:o.getUrl()},d||{}),headers:a.AtomXmlHeaders,data:this._constructBookmarkPostData(o)};return this.updateEntity(a.AtomBookmarkCreateUpdateDelete,e,{createEntity:function(b,c){var d=o.getBookmarkUuid();if(c){var f=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.BookmarkXPath});o.setDataHandler(f)}o.setBookmarkUuid(d);
return o}},d)},deleteBookmark:function(b,d){var o=this._validateBookmarkUrl(b);if(o)return o;o={method:"DELETE",query:c.mixin({url:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomBookmarkCreateUpdateDelete,o,b)},getBookmarksTags:function(b){return this.getEntities(a.AtomBookmarksTags,{method:"GET",handleAs:"text",query:b||{}},this.getTagsFeedCallbacks(),b)},newBookmark:function(a){return this._toBookmark(a)},getBookmarkFeedCallbacks:function(){return n},getTagsFeedCallbacks:function(){return p},
_toBookmark:function(a){if(a instanceof m)return a;c.isString(a)&&(a={bookmarkUuid:a});return new m({service:this,_fields:c.mixin({},a)})},_validateBookmarkUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected bookmarkUuid.")},_validateBookmarkUrl:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected bookmarkUrl.")},_validateBookmark:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, bookmark with title must be specified.");
if(b&&!a.getBookmarkUuid())return this.createBadRequestPromise("Invalid argument, bookmark with UUID must be specified.")},_constructBookmarkPostData:function(a){var b=d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom"><title type="text">${getTitle}</title><category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="bookmark"/><link href=\'${getUrl}\'/>${isPrivate}<content type="html">${getContent}</content>${getTags}</entry>',a,function(b,c){if("getTags"==
c){var e=b,b="",h;for(h in e)b+=d.transform(CategoryTmpl,{tag:e[h]})}else"getTitle"==c&&!b?b=a.getTitle():"getUrl"==c&&!b?b=a.getUrl():"getContent"==c&&!b?b=a.getContent():"isPrivate"==c&&!b&&(b=a.isPrivate()?!0:!1);return b},a);return d.trim(b)}})})},"sbt/connections/CommunityConstants":function(){define(["../lang","./ConnectionsConstants"],function(g,e){return g.mixin({Public:"public",Moderated:"publicInviteOnly",Restricted:"private",Owner:"owner",Member:"member",CommunityFeedXPath:e.ConnectionsFeedXPath,
CommunityXPath:{entry:"/a:entry",uid:"a:id",communityUuid:"a:id",communityTheme:"snx:communityTheme",title:"a:title",summary:"a:summary[@type='text']",communityUrl:"a:link[@rel='alternate']/@href",communityAtomUrl:"a:link[@rel='self']/@href",logoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/logo']/@href",tags:"a:category[not(@scheme)]/@term",content:"a:content[@type='html']",memberCount:"snx:membercount",communityType:"snx:communityType",published:"a:published",updated:"a:updated",authorUserid:"a:author/snx:userid",
authorName:"a:author/a:name",authorEmail:"a:author/a:email",contributorUserid:"a:contributor/snx:userid",contributorName:"a:contributor/a:name",contributorEmail:"a:contributor/a:email"},MemberXPath:{entry:"/a:entry",uid:"a:contributor/snx:userid",userid:"a:contributor/snx:userid",name:"a:contributor/a:name",email:"a:contributor/a:email",role:"snx:role"},InviteXPath:{entry:"/a:entry",uid:"a:id",inviteUuid:"a:id",title:"a:title",content:"a:content[@type='text']",updated:"a:updated",authorUserid:"a:author/snx:userid",
authorName:"a:author/a:name",contributorUserid:"a:contributor/snx:userid",contributorName:"a:contributor/a:name",contributorEmail:"a:contributor/a:email",contributorUserState:"a:contributor/snx:userState",communityUuid:"snx:communityUuid",communityUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/community']/@href",editUrl:"a:link[@rel='edit']/@href"},EventXPath:{entry:"/a:entry",uid:"a:id",eventUuid:"snx:eventUuid",eventInstUuid:"snx:eventInstUuid",title:"a:title",eventAtomUrl:"a:link[@rel='self']/@href",
content:"a:content[@type='html']",location:"snx:location",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",authorState:"a:author/snx:userState",updated:"a:updated",communityLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container']/@href",eventAtomInstances:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/instances']/@href",eventAtomAttendees:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/attend']/@href",eventAtomFollowers:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/calendar/event/follow']/@href",
frequency:"snx:recurrence/@frequency",interval:"snx:recurrence/@interval",until:"snx:recurrence/snx:until",allDay:"snx:recurrence/snx:allday",startDate:"snx:recurrence/snx:startDate",endDate:"snx:recurrence/snx:endDate",byDay:"snx:recurrence/snx:byDay"},AtomCommunitiesAll:"/${communities}/service/atom/communities/all",AtomCommunitiesMy:"/${communities}/service/atom/communities/my",AtomCommunityInvitesMy:"/${communities}/service/atom/community/invites/my",AtomCommunityInvites:"${communities}/service/atom/community/invites",
AtomCommunitySubCommunities:"${communities}/service/atom/community/subcommunities",AtomCommunityMembers:"${communities}/service/atom/community/members",AtomCommunityInstance:"${communities}/service/atom/community/instance",AtomCommunityForumTopics:"/${communities}/service/atom/community/forum/topics",AtomCommunityBookmarks:"/${communities}/service/atom/community/bookmarks",AtomCommunityEvents:"/${communities}/calendar/atom/calendar/event",AtomCommunityEvent:"/${communities}/calendar/atom/calendar/event",
AtomCommunityInvites:"/${communities}/service/atom/community/invites"},e)})},"sbt/connections/CommunityService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./CommunityConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler,./ForumService,../pathUtil".split(","),function(g,e,c,d,b,a,j,k,i,q){var m=g(i,{getEntityId:function(){var a=d.trim(this.getAsString("uid"));return o(this.service,a)}}),n=g(k,{constructor:function(){},getCommunityUuid:function(){var a=
this.getAsString("communityUuid");return o(this.service,a)},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",a)},getCommunityType:function(){return this.getAsString("communityType")},setCommunityType:function(a){return this.setAsString("communityType",a)},getCommunityTheme:function(){return this.getAsString("communityTheme")},setCommunityTheme:function(a){return this.setAsString("communityTheme",
a)},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",a)},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getAuthor:function(){return this.getAsObject(["authorUserid","authorName","authorEmail"])},getContributor:function(){return this.getAsObject(["contributorUserid","contributorName","contributorEmail"])},getSummary:function(){return this.getAsString("summary")},getCommunityUrl:function(){return this.getAsString("communityUrl")},
getLogoUrl:function(){return this.getAsString("logoUrl")},getMemberCount:function(){return this.getAsNumber("memberCount")},getPublished:function(){return this.getAsDate("published")},getUpdated:function(){return this.getAsDate("updated")},getForumTopics:function(a){return this.service.getForumTopics(this.getCommunityUuid(),a)},createForumTopic:function(a,b,c){return this.service.createForumTopic(this.getCommunityUuid(),b,c)},getSubCommunities:function(a){return this.service.getSubCommunities(this.getCommunityUuid(),
a)},getMembers:function(a){return this.service.getMembers(this.getCommunityUuid(),a)},addMember:function(a,b){return this.service.addMember(this.getCommunityUuid(),a,b)},removeMember:function(a,b){return this.service.removeMember(this.getCommunityUuid(),a,b)},getMember:function(a,b){return this.service.getMember(this.getCommunityUuid(),a,b)},getAllInvites:function(a){return this.service.getAllInvites(this.getCommunityUuid(),a)},getForums:function(a){var b=this.service.getForumService(),a=c.mixin(a||
{},{communityUuid:this.getCommunityUuid()});return b.getForums(a)},load:function(b){var h=this.getCommunityUuid(),d=this.service._validateCommunityUuid(h);if(d)return d;var f=this,b={handleAs:"text",query:c.mixin({communityUuid:h},b||{})};return this.service.getEntity(a.AtomCommunityInstance,b,h,{createEntity:function(b,c){f.setDataHandler(new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommunityXPath}));return f}})},remove:function(a){return this.service.deleteCommunity(this.getCommunityUuid(),
a)},update:function(a){return this.service.updateCommunity(this,a)},save:function(a){return this.getCommunityUuid()?this.service.updateCommunity(this,a):this.service.createCommunity(this,a)}}),p=g(k,{communityUuid:null,constructor:function(){this.getRole()||this.setRole(a.Member)},getCommunityUuid:function(){return this.communityUuid},getName:function(){return this.getAsString("name")},setName:function(a){return this.setAsString("name",a)},getUserid:function(){return this.getAsString("userid")},setUserid:function(a){return this.setAsString("userid",
a)},getEmail:function(){return this.getAsString("email")},setEmail:function(a){return this.setAsString("email",a)},getRole:function(){return this.getAsString("role")},setRole:function(a){return this.setAsString("role",a)},load:function(b){var h=this.communityUuid,d=this.service._validateCommunityUuid(h);if(d)return d;var f=this,h={communityUuid:h},d=null,d=this.getUserid()?h.userid=this.getUserid():h.email=this.getEmail(),h=c.mixin(h,b||{});return this.service.getEntity(a.AtomCommunityMembers,{handleAs:"text",
query:h},d,{createEntity:function(b,c){f.setDataHandler(new i({data:c,namespaces:a.Namespaces,xpath:a.MemberXPath}));f.id=f.dataHandler.getEntityId();return f}})},remove:function(a){var b=this.getUserid()||this.getEmail();return this.service.removeMember(this.getCommunityUuid(),b,a)}}),f=g(k,{communityUuid:null,userid:null,inviteeUuid:null,constructor:function(a){this.inherited(arguments,[a])},getInviteUuid:function(){var a=this.getAsString("inviteUuid");return a&&0==a.indexOf("urn:lsid:ibm.com:communities:invite-")?
a.substring(36):a},setInviteUuid:function(a){return this.setAsString("inviteUuid",a)},setCommunityUuid:function(a){this.communityUuid=a;return this},getCommunityUuid:function(){if(!this.communityUuid)this.communityUuid=this.service.getUrlParameter(this.getAsString("communityUrl"),"communityUuid");return this.communityUuid},setInviteeUuid:function(a){this.inviteeUuid=a;return this},getInviteeUuid:function(){if(!this.inviteeUuid){var a=this.getInviteUuid(),b=this.getCommunityUuid();this.inviteeUuid=
a&&0==a.indexOf(b)?a.substring(b.length+1):a}return this.inviteeUuid},setUserid:function(a){this.userid=a;return this},getUserid:function(){if(!this.userid&&this.getContributor())this.userid=this.getContributor().userid||null;return this.userid},setEmail:function(a){this.email=a;return this},getEmail:function(){if(!this.email&&this.getContributor())this.email=this.getContributor().email||null;return this.email},getId:function(){return this.getAsString("uid")},getTitle:function(){return this.getAsString("title")},
setTitle:function(a){return this.setAsString("title",a)},getContent:function(){return this.getAsString("content")},setContent:function(a){return this.setAsString("content",a)},getUpdated:function(){return this.getAsDate("updated")},getAuthor:function(){return this.getAsObject(["authorUserid","authorName"],["userid","name"])},getContributor:function(){return this.getAsObject(["contributorUserid","contributorName","contributorEmail","contributorUserState"],["userid","name","email","userState"])},load:function(b){var h=
this.getCommunityUuid(),d=this.service._validateCommunityUuid(h);if(d)return d;var f=this.getInviteeUuid();if(d=this.service._validateUserid(f))return d;var e=this,b={handleAs:"text",query:c.mixin({communityUuid:h,userid:f},b||{})};return this.service.getEntity(a.AtomCommunityInvites,b,h+"-"+f,{createEntity:function(b,c){e.setDataHandler(new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.InviteXPath}));return e}})},remove:function(a){return this.service.removeInvite(this,a)},update:function(a){return this.service.updateInvite(this,
a)},save:function(a){return this.getInviteUuid()?this.service.updateInvite(this,a):this.service.createInvite(this,a)}}),t=g(k,{constructor:function(a){this.inherited(arguments,[a])},getCommunityUuid:function(){return this.getAsString("communityUuid")},getId:function(){return this.getAsString("uid")},getEventUuid:function(){return this.getAsString("eventUuid")},getEventInstUuid:function(){return this.getAsString("eventInstUuid")},getTitle:function(){return this.getAsString("title")},setTitle:function(a){return this.setAsString("title",
a)},getSummary:function(){return this.getAsString("summary")},setSummary:function(a){return this.setAsString("summary",a)},getEventAtomUrl:function(){return this.getAsString("eventAtomUrl")},getFullEvent:function(){return this.service.getEvent(this.getEventInstUuid())},getContent:function(){return this.getAsString("content")},getLocation:function(){return this.getAsString("location")},getAuthor:function(){if(!this._author)this._author={userid:this.getAsString("authorUserid"),name:this.getAsString("authorName"),
email:this.getAsString("authorEmail"),authorState:this.getAsString("authorState")};return this._author},getRecurrence:function(){if(!this._recurrence)this._recurrence={frequency:this.getAsString("frequency"),interval:this.getAsString("interval"),until:this.getAsString("until"),allDay:this.getAsString("allDay"),startDate:this.getAsString("startDate"),endDate:this.getAsString("endDate"),byDay:this.getAsString("byDay")};return this._recurrence},getContributor:function(){if(!this._contributor)this._contributor=
{userid:this.getAsString("contributorUserid"),name:this.getAsString("contributorName")};return this._contributor}}),o=function(a,b){return b&&0==b.indexOf("http")?a.getUrlParameter(b,"communityUuid"):b},u={createEntities:function(b,c){return new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(b,c){var h=new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommunityXPath});return new n({service:b,dataHandler:h})}},s={createEntities:function(b,c){return new i({service:b,
data:c,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})}},h={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(b,c){var h=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.InviteXPath});return new f({service:b,id:h.getEntityId(),dataHandler:h})}},v={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(b,c){var h=new i({service:b,
data:c,namespaces:a.Namespaces,xpath:a.EventXPath});return new t({service:b,id:h.getEntityId(),dataHandler:h})}},r={createEntity:function(b,c){var h=new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.EventXPath});return new t({service:b,id:h.getEntityId(),dataHandler:h})}},A={createEntity:function(b,c){var h=new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommunityXPath});return new n({service:b,id:h.getEntityId(),dataHandler:h})}},B={createEntities:function(b,c){return new i({service:b,
data:c,namespaces:a.Namespaces,xpath:a.CommunityFeedXPath})},createEntity:function(a,b){var c=a.getForumService().newForumTopic({});c.setData(b);return c}};return g(j,{forumService:null,contextRootMap:{communities:"communities"},constructor:function(){if(!this.endpoint)this.endpoint=e.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getForumService:function(){if(!this.forumService)this.forumService=new q,this.forumService.endpoint=this.endpoint;return this.forumService},
getPublicCommunities:function(b){return this.getEntities(a.AtomCommunitiesAll,{method:"GET",handleAs:"text",query:b||{}},this._getCommunityFeedCallbacks())},getMyCommunities:function(b){return this.getEntities(a.AtomCommunitiesMy,{method:"GET",handleAs:"text",query:b||{}},this._getCommunityFeedCallbacks())},getMembers:function(b,h){var d=this._validateCommunityUuid(b);if(d)return d;var d={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},h||{})},f=this._getMemberFeedCallbacks(b);return this.getEntities(a.AtomCommunityMembers,
d,f)},getMember:function(a,b,c){a=new p({service:this,communityUuid:a});this.isEmail(b)?a.setEmail(b):a.setUserid(b);return a.load(c)},getCommunityEvents:function(b,h,d,f){var e=this._validateCommunityUuid(b)||this._validateDateTimes(h,d);if(e)return e;b={calendarUuid:b};h&&c.mixin(b,{startDate:h});d&&c.mixin(b,{endDate:d});f=c.mixin(f,b);return this.getEntities(a.AtomCommunityEvents,{method:"GET",handleAs:"text",query:f||{}},this._getEventFeedCallbacks())},getEvent:function(b){return this.getEntity(a.AtomCommunityEvent,
{method:"GET",handleAs:"text",query:{eventInstUuid:b}},b,this._getEventCallbacks())},getMyInvites:function(b){return this.getEntities(a.AtomCommunityInvitesMy,{method:"GET",handleAs:"text",query:b||{}},this._getInviteFeedCallbacks())},getAllInvites:function(b,h){var d=this._validateCommunityUuid(b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},h||{})};return this.getEntities(a.AtomCommunityInvites,d,this._getInviteFeedCallbacks())},getSubCommunities:function(b,h){var d=
this._validateCommunityUuid(b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},h||{})};return this.getEntities(a.AtomCommunitySubCommunities,d,this._getCommunityFeedCallbacks())},getForumTopics:function(b,h){var d=this._validateCommunityUuid(b);if(d)return d;d={method:"GET",handleAs:"text",query:c.mixin({communityUuid:b},h||{})};return this.getEntities(a.AtomCommunityForumTopics,d,this._getForumTopicFeedCallbacks())},newCommunity:function(a){return this._toCommunity(a)},
newMember:function(a){return this._toMember(a)},newInvite:function(a,b){return this._toInvite(a,b)},getCommunity:function(a,b){return(new n({service:this,_fields:{communityUuid:a}})).load(b)},createCommunity:function(b,c){var h=this._toCommunity(b),d=this._validateCommunity(h,!1,c);if(d)return d;d={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:this._constructCommunityPostData(h)};return this.updateEntity(a.AtomCommunitiesMy,d,{createEntity:function(a,b,c){a=this.getLocationParameter(c,"communityUuid");
h.setCommunityUuid(a);return h}},c)},updateCommunity:function(b,h){var d=this._toCommunity(b),f=this._validateCommunity(d,!0,h);if(f)return f;f={method:"PUT",query:c.mixin({communityUuid:d.getCommunityUuid()},h||{}),headers:a.AtomXmlHeaders,data:this._constructCommunityPostData(d)};return this.updateEntity(a.AtomCommunityInstance,f,{createEntity:function(b,c){var h=d.getCommunityUuid();if(c){var f=new m({service:b,data:c,namespaces:a.Namespaces,xpath:a.CommunityXPath});d.setDataHandler(f)}d.setCommunityUuid(h);
return d}},h)},deleteCommunity:function(b,h){var d=this._validateCommunityUuid(b);if(d)return d;d={method:"DELETE",query:c.mixin({communityUuid:b},h||{}),handleAs:"text"};return this.deleteEntity(a.AtomCommunityInstance,d,b)},addMember:function(b,h,d){var f=this._validateCommunityUuid(b);if(f)return f;var e=this._toMember(h);if(f=this._validateMember(e))return f;h={method:"POST",query:c.mixin({communityUuid:b},d||{}),headers:a.AtomXmlHeaders,data:this._constructMemberPostData(e)};return this.updateEntity(a.AtomCommunityMembers,
h,{createEntity:function(a,c,h){a=this.getLocationParameter(h,"userid");e.setUserid(a);e.communityUuid=b;return e}},d)},updateMember:function(b,h,d){var f=this.validateField("communityUuid",b);if(f)return f;h=this._toMember(h);if(f=this._validateMember(h,!0,!0))return f;var f=this._constructMemberPostData(h),b={communityUuid:b},e=h.getEmail()?"email":"userid",h=h.getEmail()?h.getEmail():h.getUserid();b[e]=h;b=c.mixin(b,d||{});return this.updateEntity(a.AtomCommunityMembers,{method:"PUT",headers:a.AtomXmlHeaders,
query:b,data:f},{createEntity:function(a,b,c){return c}})},removeMember:function(b,h,d){var f=this._validateCommunityUuid(b);if(f)return f;h=this._toMember(h);if(f=this._validateMember(h))return f;b={communityUuid:b};f=h.getEmail()?"email":"userid";h=h.getEmail()?h.getEmail():h.getUserid();b[f]=h;b=c.mixin(b,d||{});return this.deleteEntity(a.AtomCommunityMembers,{method:"DELETE",query:b,handleAs:"text"},h)},getInvite:function(a,b){return(new f({service:this,_fields:{communityUuid:a,userid:b}})).load()},
createInvite:function(b,h){var d=this._toInvite(b),f=this._validateInvite(d,!0);if(f)return f;f={method:"POST",query:c.mixin({communityUuid:d.getCommunityUuid()},h||{}),headers:a.AtomXmlHeaders,data:this._constructInvitePostData(d)};return this.updateEntity(a.AtomCommunityInvites,f,{createEntity:function(b,c){var h=new i({data:c,namespaces:a.Namespaces,xpath:a.InviteXPath});d.setDataHandler(h);return d}},h)},removeInvite:function(b,h){var d=this._toInvite(b),f=this._validateInvite(d,!0);if(f)return f;
f={method:"DELETE",query:c.mixin({communityUuid:d.getCommunityUuid(),userid:d.getInviteeUuid()},h||{}),handleAs:"text"};d=d.getCommunityUuid()+"-"+d.getInviteeUuid();return this.deleteEntity(a.AtomCommunityInvites,f,d)},acceptInvite:function(b,h){var d=this._toInvite(b),f=this._validateInvite(d,!0);if(f)return f;f={method:"POST",query:c.mixin({communityUuid:d.getCommunityUuid()},h||{}),headers:a.AtomXmlHeaders,data:this._constructInvitePostData(d)};return this.updateEntity(a.AtomCommunityMembers,
f,{createEntity:function(){return d}},h)},createForumTopic:function(b,h,d){var f=this._validateCommunityUuid(b);if(f)return f;var f=this.getForumService(),e=f.newForumTopic(h);if(f=f._validateForumTopic(e,!1,d))return f;b={method:"POST",query:c.mixin({communityUuid:b},d||{}),headers:a.AtomXmlHeaders,data:e.createPostData()};return this.updateEntity(a.AtomCommunityForumTopics,b,{createEntity:function(a,b,c){a=this.getLocationParameter(c,"topicUuid");e.setTopicUuid(a);e.setData(b);return e}},d)},updateCommunityLogo:function(b,
c){var h=this.validateField("File Control Or Id",b);if(h||(h=this.validateHTML5FileSupport()))return h;if(h=this.validateField("CommunityUuid",c))return h;h=null;h=this.getFileControl(b);if(!h)return this.createBadRequestPromise("File Control or ID is required");filePath=h.value;h=h.files;if(1!=h.length)return this.createBadRequestPromise("Only one file needs to be provided to this API");var d=h[0],h=new FormData;h.append("file",d);var f={communityUuid:c},d=this.constructUrl(a.AtomUpdateCommunityLogo,
null,{endpointName:this.endpoint.proxyPath,fileName:encodeURIComponent(d.name)});if(this.endpoint.proxy)d=e.Properties.serviceUrl+d;else return this.createBadRequestPromise("File Proxy is required to run this API");return this.updateEntity(d,{method:"PUT",headers:{"Content-Type":!1,"Process-Data":!1},query:f,data:h},{createEntity:function(a,b){return b}})},_getCommunityFeedCallbacks:function(){return u},_getForumTopicFeedCallbacks:function(){return B},_getMemberFeedCallbacks:function(b){return c.mixin({createEntity:function(c,
h){var d=new m({data:h,namespaces:a.Namespaces,xpath:a.MemberXPath});return new p({service:c,id:d.getEntityId(),communityUuid:b,dataHandler:d})}},s)},_getInviteFeedCallbacks:function(){return h},_getEventFeedCallbacks:function(){return v},_getEventCallbacks:function(){return r},getCommunityCallbacks:function(){return A},_toCommunity:function(a){if(a instanceof n)return a;c.isString(a)&&(a={communityUuid:a});return new n({service:this,_fields:c.mixin({},a)})},_toInvite:function(a){if(a instanceof f)return a;
c.isString(a)&&(a={communityUuid:a});return new f({service:this,_fields:c.mixin({},a)})},_toCommunityUuid:function(a){var b=null;a&&(c.isString(a)?b=a:a instanceof n&&(b=a.getCommunityUuid()));return b},_toMember:function(a){if(a){if(a instanceof p)return a;var b=new p({service:this});if(c.isString(a))this.isEmail(a)?b.setEmail(a):b.setUserid(a);else{if(a.id&&!a.userid&&!a.email)this.isEmail(a.id)?a.email=a.id:a.userid=a.id,delete a.id;b._fields=c.mixin({},a)}return b}},_validateCommunityUuid:function(a){if(!a||
0==a.length)return this.createBadRequestPromise("Invalid argument, expected communityUuid.")},_validateUserid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid.")},_validateDateTimes:function(a,b){if((!a||0===a.length)&&(!b||0===b.length))return this.createBadRequestPromise("Invalid date arguments, expected either a startDate, endDate or both as parameters.")},_validateContributorId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected contributorId.")},
_validateCommunity:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, community with title must be specified.");if(b&&!a.getCommunityUuid())return this.createBadRequestPromise("Invalid argument, community with UUID must be specified.")},_validateInvite:function(a,b){if(!a||!a.getEmail()&&!a.getUserid()&&!a.getInviteeUuid())return this.createBadRequestPromise("Invalid argument, invite with email or userid or invitee must be specified.");if(b&&!a.getCommunityUuid())return this.createBadRequestPromise("Invalid argument, invite with community UUID must be specified.")},
_validateMember:function(a){if(!a||!a.getUserid()&&!a.getEmail())return this.createBadRequestPromise("Invalid argument, member with userid or email must be specified.")},_constructCommunityPostData:function(b){b=d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><title type="text">${getTitle}</title><content type="html">${getContent}</content><category term="community" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>${getTags}<snx:communityType>${getCommunityType}</snx:communityType><snx:isExternal>false</snx:isExternal>${getCommunityUuid}${getCommunityTheme}</entry>',
b,function(b,c){if("getTags"==c){var h=b,b="",f;for(f in h)b+=d.transform('<category term="${tag}"></category>',{tag:h[f]})}else"getCommunityType"==c&&!b?b=a.Restricted:"getCommunityUuid"==c&&b?b=d.transform('<snx:communityUuid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${communityUuid}</snx:communityUuid>',{communityUuid:b}):"getCommunityTheme"==c&&b&&(b=d.transform('<snx:communityTheme xmlns:snx="http://www.ibm.com/xmlns/prod/sn" snx:uuid="default">${ommunityTheme}</snx:communityTheme>',{communityTheme:b}));
return b},b);return d.trim(b)},_constructMemberPostData:function(a){return d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><contributor>${getEmail}${getUserid}</contributor><snx:role xmlns:snx="http://www.ibm.com/xmlns/prod/sn" component="http://www.ibm.com/xmlns/prod/sn/communities">${getRole}</snx:role><category term="person" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category></entry>',
a,function(b,c){"getEmail"==c&&b&&(b=d.transform("<email>${email}</email>",{email:b}));"getUserid"==c&&b&&(b=d.transform('<snx:userid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${userid}</snx:userid>',{userid:b}));"getRole"==c&&(b=a.getRole());return b},a)},_constructInvitePostData:function(a){return d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom" xmlns:app="http://www.w3.org/2007/app" xmlns:snx="http://www.ibm.com/xmlns/prod/sn"><category term="invite" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category>${getTitle}${getContent}<contributor>${getEmail}${getUserid}</contributor></entry>',
a,function(b,c){var h=null;"getTitle"==c&&a.getTitle()&&(h=d.transform('<title type="text">${title}</title>',{title:a.getTitle()}));"getContent"==c&&a.getContent()&&(h=d.transform('<content type="text">${content}</content>',{content:a.getContent()}));"getEmail"==c&&a.getEmail()&&(h=d.transform("<email>${email}</email>",{email:a.getEmail()}));"getUserid"==c&&a.getUserid()&&(h=d.transform('<snx:userid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${userid}</snx:userid>',{userid:a.getUserid()}));return h},
null)}})})},"sbt/connections/ForumService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./ForumConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler".split(","),function(g,e,c,d,b,a,j,k,i){var q=g(k,{xpath:a.ForumXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-forum"></category>',constructor:function(){},createEntryData:function(){if(!this.getCommunityUuid())return"";var a=d.transform('<snx:communityUuid xmlns:snx="http://www.ibm.com/xmlns/prod/sn">${getCommunityUuid}</snx:communityUuid>',
this,function(a){return a},this);return d.trim(a)},getForumUuid:function(){var a=this.getAsString("forumUuid");return f(a)},setForumUuid:function(a){return this.setAsString("forumUuid",a)},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getModeration:function(){return this.getAsDate("moderation")},getThreadCount:function(){return this.getAsNumber("threadCount")},getForumUrl:function(){return this.getAlternateUrl()},
getTopics:function(a){return this.service.getTopics(this.getForumUuid(),a)},load:function(b){var d=this.getForumUuid(),f=this.service._validateForumUuid(d);if(f)return f;var e=this,b={handleAs:"text",query:c.mixin({forumUuid:d},b||{})};return this.service.getEntity(a.AtomForum,b,d,{createEntity:function(a,b){e.setData(b);return e}})},remove:function(a){return this.service.deleteForum(this.getForumUuid(),a)},update:function(a){return this.service.updateForum(this,a)},save:function(a){return this.getForumUuid()?
this.service.updateForum(this,a):this.service.createForum(this,a)}}),m=g(k,{xpath:a.ForumTopicXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-topic"></category>',constructor:function(){},createEntryData:function(){var b="";this.isPinned()&&(b+=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',this,function(){return a.FlagPinned},this));this.isLocked()&&(b+=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',
this,function(){return a.FlagLocked},this));this.isQuestion()&&(b+=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',this,function(){return a.FlagQuestion},this));return d.trim(b)},getTopicUuid:function(){var a=this.getAsString("topicUuid");return f(a)},setTopicUuid:function(a){return this.setAsString("topicUuid",a)},getForumUuid:function(){var a=this.getAsString("forumUuid");return f(a)},setForumUuid:function(a){return this.setAsString("forumUuid",
a)},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getTopicUrl:function(){return this.getAsString("alternateUrl")},getPermisisons:function(){return this.getAsString("permissions")},isPinned:function(){return this.getAsBoolean("pinned")},setPinned:function(a){return this.setAsBoolean("pinned",a)},isLocked:function(){return this.getAsBoolean("locked")},setLocked:function(a){return this.setAsBoolean("locked",
a)},isQuestion:function(){return this.getAsBoolean("question")},setQuestion:function(a){return this.setAsBoolean("question",a)},isAnswered:function(){return this.getAsBoolean("answered")},isNotRecommendedByCurrentUser:function(){return this.getAsBoolean("notRecommendedByCurrentUser")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getRecommendationsUrl:function(){return this.getAsString("recommendationsUrl")},getRecommendations:function(a){return this.service.getForumRecommendations(this.getTopicUuid(),
a)},getReplies:function(a){return this.service.getForumTopicReplies(this.getTopicUuid(),a)},createRecommendation:function(a){return this.service.createForumRecommendation(this.getTopicUuid(),a)},deleteRecommendation:function(a){return this.service.deleteForumRecommendation(this.getTopicUuid(),a)},load:function(b){var d=this.getTopicUuid(),f=this.service._validateTopicUuid(d);if(f)return f;var e=this,b={handleAs:"text",query:c.mixin({topicUuid:d},b||{})};return this.service.getEntity(a.AtomTopic,b,
d,{createEntity:function(a,b){e.setData(b);return e}})},remove:function(a){return this.service.deleteForumTopic(this.getTopicUuid(),a)},update:function(a){return this.service.updateForumTopic(this,a)},save:function(a){return this.getTopicUuid()?this.service.updateForumTopic(this,a):this.service.createForumTopic(this,a)}}),n=g(k,{xpath:a.ForumReplyXPath,contentType:"html",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="forum-reply"></category>',constructor:function(){},
createEntryData:function(){if(!this.getTopicUuid())return"";var b="";this.isAnswer()&&(b+=d.transform('<category scheme="http://www.ibm.com/xmlns/prod/sn/flags" term="${flag}"></category>',this,function(){return a.FlagAnswer},this));b+=d.transform('<thr:in-reply-to xmlns:thr="http://purl.org/syndication/thread/1.0" ref="urn:lsid:ibm.com:forum:${getTopicUuid}" type="application/atom+xml" href=""></thr:in-reply-to>',this,function(a){return a},this);return d.trim(b)},getReplyUuid:function(){var a=this.getAsString("replyUuid");
return f(a)},setReplyUuid:function(a){return this.setAsString("replyUuid",a)},getTopicUuid:function(){var a=this.getAsString("topicUuid");return f(a)},setTopicUuid:function(a){return this.setAsString("topicUuid",a)},getReplyToPostUuid:function(){var a=this.getAsString("replyTo");return f(a)},setReplyToPostUuid:function(a){return this.setAsString("replyTo",a)},getReplyUrl:function(){return this.getAlternateUrl()},getPermisisons:function(){return this.getAsString("permissions")},isAnswer:function(){return this.getAsBoolean("answer")},
setAnswer:function(a){return this.setAsBoolean("answer",a)},isNotRecommendedByCurrentUser:function(){return this.getAsBoolean("notRecommendedByCurrentUser")},getRecommendationsUrl:function(){return this.getAsString("recommendationsUrl")},getRecommendations:function(a){return this.service.getForumRecommendations(this.getReplyUuid(),a)},getReplies:function(a){return this.service.getForumReplyReplies(this.getReplyUuid(),a)},createRecommendation:function(a){return this.service.createForumRecommendation(this.getReplyUuid(),
a)},deleteRecommendation:function(a){return this.service.deleteForumRecommendation(this.getReplyUuid(),a)},load:function(b){var d=this.getReplyUuid(),f=this.service._validateReplyUuid(d);if(f)return f;var e=this,b={handleAs:"text",query:c.mixin({replyUuid:d},b||{})};return this.service.getEntity(a.AtomReply,b,d,{createEntity:function(a,b){e.setData(b);return e}})},remove:function(a){return this.service.deleteForumReply(this.getReplyUuid(),a)},update:function(a){return this.service.updateForumReply(this,
a)},save:function(a){return this.getReplyUuid()?this.service.updateForumReply(this,a):this.service.createForumReply(this,a)}});g(k,{categoryScheme:null,constructor:function(){}});var p=g(k,{xpath:a.ForumRecommendationXPath,contentType:"text",categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="recommendation"></category>',constructor:function(){},getTitle:function(){return this.getAsString("title")||"liked"},getRecommendationUuid:function(){var a=this.getAsString("id");return f(a)},
getPostUuid:function(){var a=this.getAsString("postUuid");return this.service.getUrlParameter(a,"postUuid")||a},setPostUuid:function(a){return this.setAsString("postUuid",a)}});g(k,{categoryScheme:null,constructor:function(){}});var f=function(a){return a&&0==a.indexOf("urn:lsid:ibm.com:forum:")?a.substring(23):a},t={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new q({service:a,data:b})}},o={createEntities:function(b,
c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new m({service:a,data:b})}},u={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new n({service:a,data:b})}},s={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.ForumsFeedXPath})},createEntity:function(a,b){return new p({service:a,data:b})}};return g(j,
{contextRootMap:{forums:"forums"},constructor:function(){if(!this.endpoint)this.endpoint=e.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},newForum:function(a){return this._toForum(a)},newForumTopic:function(a){return this._toForumTopic(a)},newForumReply:function(a){return this._toForumReply(a)},getMyForums:function(b){return this.getEntities(a.AtomForumsMy,{method:"GET",handleAs:"text",query:b||{}},t)},getMyTopics:function(b){return this.getEntities(a.AtomTopicsMy,
{method:"GET",handleAs:"text",query:b||{}},o)},getAllForums:function(b){return this.getEntities(a.AtomForums,{method:"GET",handleAs:"text",query:b||{}},t)},getPublicForums:function(b){return this.getEntities(a.AtomForumsPublic,{method:"GET",handleAs:"text",query:b||{}},t)},getForumTopics:function(b,d){var f=this._validateForumUuid(b);if(f)return f;f={method:"GET",handleAs:"text",query:c.mixin({forumUuid:b},d||{})};return this.getEntities(a.AtomTopics,f,o)},getForumRecommendations:function(b,d){var f=
this._validatePostUuid(b);if(f)return f;f={method:"GET",handleAs:"text",query:c.mixin({postUuid:b},d||{})};return this.getEntities(a.AtomRecommendationEntries,f,s)},getForumTopicReplies:function(b,d){var f=this._validateTopicUuid(b);if(f)return f;f={method:"GET",handleAs:"text",query:c.mixin({topicUuid:b},d||{})};return this.getEntities(a.AtomReplies,f,u)},getForumReplyReplies:function(b,d){var f=this._validateReplyUuid(b);if(f)return f;f={method:"GET",handleAs:"text",query:c.mixin({replyUuid:b},
d||{})};return this.getEntities(a.AtomReplies,f,u)},getForumReplies:function(b){return this.getEntities(a.AtomReplies,{method:"GET",handleAs:"text",query:b},u)},getForums:function(b){return this.getEntities(a.AtomForums,{method:"GET",handleAs:"text",query:b||{}},t)},getForum:function(a,b){return(new q({service:this,_fields:{forumUuid:a}})).load(b)},createForum:function(b,c){var d=this._toForum(b),f=this._validateForum(d,!1,c);if(f)return f;f={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:d.createPostData()};
return this.updateEntity(a.AtomForumsMy,f,{createEntity:function(a,b,c){d.setData(b);a=this.getLocationParameter(c,"forumUuid");d.setForumUuid(a);return d}},c)},updateForum:function(b,d){var f=this._toForum(b),e=this._validateForum(f,!0,d);if(e)return e;e={method:"PUT",query:c.mixin({forumUuid:f.getForumUuid()},d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomForum,e,{createEntity:function(a,b){var c=f.getForumUuid();f.setData(b);f.setForumUuid(c);return f}},
d)},deleteForum:function(b,d){var f=this._validateForumUuid(b);if(f)return f;f={method:"DELETE",query:c.mixin({forumUuid:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomForum,f,b)},getForumTopic:function(a,b){return(new m({service:this,_fields:{topicUuid:a}})).load(b)},createForumTopic:function(b,d){var f=this._toForumTopic(b),e=this._validateForumTopic(f,!1,d);if(e)return e;e={method:"POST",query:c.mixin({forumUuid:f.getForumUuid()},d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};
return this.updateEntity(a.AtomTopics,e,{createEntity:function(a,b,c){a=this.getLocationParameter(c,"topicUuid");f.setTopicUuid(a);f.setData(b);return f}},d)},updateForumTopic:function(b,d){var f=this._toForumTopic(b),e=this._validateForumTopic(f,!0,d);if(e)return e;e={method:"PUT",query:c.mixin({topicUuid:f.getTopicUuid()},d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomTopic,e,{createEntity:function(a,b){var c=f.getTopicUuid();f.setData(b);f.setTopicUuid(c);
return f}},d)},deleteForumTopic:function(b,d){var f=this._validateTopicUuid(b);if(f)return f;f={method:"DELETE",query:c.mixin({topicUuid:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomTopic,f,b)},getForumReply:function(a,b){return(new n({service:this,_fields:{replyUuid:a}})).load(b)},createForumReply:function(b,c){var d=this._toForumReply(b),f=this._validateForumReply(d,!1,c);if(f)return f;f={method:"POST",query:c||{topicUuid:d.getTopicUuid()},headers:a.AtomXmlHeaders,data:d.createPostData()};
return this.updateEntity(a.AtomReplies,f,{createEntity:function(a,b,c){a=this.getLocationParameter(c,"replyUuid");d.setReplyUuid(a);d.setData(b);return d}},c)},updateForumReply:function(b,d){var f=this._toForumReply(b),e=this._validateForumReply(f,!0,d);if(e)return e;e={method:"PUT",query:c.mixin({replyUuid:f.getReplyUuid()},d||{}),headers:a.AtomXmlHeaders,data:f.createPostData()};return this.updateEntity(a.AtomReply,e,{createEntity:function(a,b){var c=f.getReplyUuid();f.setData(b);f.setReplyUuid(c);
return f}},d)},deleteForumReply:function(b,d){var f=this._validateReplyUuid(b);if(f)return f;f={method:"DELETE",query:c.mixin({replyUuid:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomReply,f,b)},getForumRecommendation:function(a,b){return(new p({service:this,_fields:{postUuid:a}})).load(b)},createForumRecommendation:function(b,c){var d=this._toForumRecommendation(b),f=this._validateForumRecommendation(d,!1,c);if(f)return f;f={method:"POST",query:c||{postUuid:d.getPostUuid()},headers:a.AtomXmlHeaders,
data:d.createPostData()};return this.updateEntity(a.AtomRecommendationEntries,f,{createEntity:function(a,b){d.setData(b);return d}},c)},deleteForumRecommendation:function(b,d){var f=this._validatePostUuid(b);if(f)return f;f={method:"DELETE",query:c.mixin({postUuid:b},d||{}),handleAs:"text"};return this.deleteEntity(a.AtomRecommendationEntries,f,b)},_validateForum:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum with title must be specified.");if(b&&!a.getForumUuid())return this.createBadRequestPromise("Invalid argument, forum with UUID must be specified.")},
_validateForumTopic:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum topic with title must be specified.");if(b&&!a.getTopicUuid())return this.createBadRequestPromise("Invalid argument, forum topic with UUID must be specified.")},_validateForumReply:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, forum reply with title must be specified.");if(b&&!a.getReplyUuid())return this.createBadRequestPromise("Invalid argument, forum reply with UUID must be specified.")},
_validateForumRecommendation:function(a,b){if(!a||!a.getPostUuid())return this.createBadRequestPromise("Invalid argument, forum recommendation with postUuid must be specified.");if(b&&!a.getRecommendationUuid())return this.createBadRequestPromise("Invalid argument, forum recommendation with UUID must be specified.")},_validateForumUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected forumUuid.")},_validatePostUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected postUuid.")},
_validateTopicUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected topicUuid.")},_validateReplyUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected replyUuid.")},_toForum:function(a){if(a instanceof q)return a;c.isString(a)&&(a={forumUuid:a});return new q({service:this,_fields:c.mixin({},a)})},_toForumTopic:function(a){if(a instanceof m)return a;c.isString(a)&&(a={forumTopicUuid:a});return new m({service:this,
_fields:c.mixin({},a)})},_toForumReply:function(a){if(a instanceof n)return a;c.isString(a)&&(a={forumReplyUuid:a});return new n({service:this,_fields:c.mixin({},a)})},_toForumRecommendation:function(a){if(a instanceof p)return a;c.isString(a)&&(a={postUuid:a});a instanceof m&&(a={postUuid:a.getTopicUuid()});a instanceof n&&(a={postUuid:a.getReplyUuid()});return new p({service:this,_fields:c.mixin({},a)})}})})},"sbt/connections/ForumConstants":function(){define(["../lang","./ConnectionsConstants"],
function(g,e){return g.mixin(e,{FlagAnswer:"recommendation",FlagAnswer:"answer",FlagPinned:"pinned",FlagLocked:"locked",FlagQuestion:"question",FlagAnswered:"answered",ForumsFeedXPath:e.ConnectionsFeedXPath,ForumXPath:g.mixin({forumUuid:"a:id",content:"a:content[@type='text']",moderation:"snx:moderation/@status",threadCount:"a:link[@rel='replies']/@thr:count",forumUrl:"a:link[@rel='alternate']/@href",communityUuid:"snx:communityUuid"},e.AtomEntryXPath),ForumTopicXPath:g.mixin({topicUuid:"a:id",forumUuid:"thr:in-reply-to/@ref",
tags:"a:category[not(@scheme)]/@term",permissions:"snx:permissions",communityUuid:"snx:communityUuid",threadCount:"a:link[@rel='replies']/@thr:count",locked:"a:category[@term='locked' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",pinned:"a:category[@term='pinned' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",question:"a:category[@term='question' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",answered:"a:category[@term='answered' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",
notRecommendedByCurrentUser:"a:category[@term='NotRecommendedByCurrentUser']",threadRecommendationCount:"a:category[@term='ThreadRecommendationCount']/@label",recommendationsUrl:"a:link[@rel='recommendations']/@href"},e.AtomEntryXPath),ForumReplyXPath:g.mixin({replyUuid:"a:id",topicUuid:"thr:in-reply-to/@ref",permissions:"snx:permissions",communityUuid:"snx:communityUuid",answer:"a:category[@term='answer' and @scheme='http://www.ibm.com/xmlns/prod/sn/flags']",replyTo:"thr:in-reply-to/@ref",notRecommendedByCurrentUser:"a:category[@term='NotRecommendedByCurrentUser']",
recommendationsUrl:"a:link[@rel='recommendations']/@href"},e.AtomEntryXPath),ForumRecommendationXPath:g.mixin({postUuid:"a:link[@rel='self']/@href"},e.AtomEntryXPath),AtomForum:"${forums}/atom/forum",AtomTopic:"/${forums}/atom/topic",AtomReply:"/${forums}/atom/reply",AtomForums:"/${forums}/atom/forums",AtomForumsPublic:"/${forums}/atom/forums/public",AtomForumsMy:"/${forums}/atom/forums/my",AtomTopics:"/${forums}/atom/topics",AtomTopicsMy:"/${forums}/atom/topics/my",AtomReplies:"/${forums}/atom/replies",
AtomTagsForum:"/atom/tags/forums",AtomTagsTopics:"/atom/tags/topics",AtomRecommendationEntries:"/${forums}/atom/recommendation/entries"})})},"sbt/connections/FileConstants":function(){define(["../lang","./ConnectionsConstants"],function(g,e){return g.mixin({FileFeedXPath:e.ConnectionsFeedXPath,CommentFeedXPath:e.ConnectionsFeedXPath,FileXPath:{entry:"/a:entry",id:"a:id",uid:"td:uuid",label:"td:label",selfUrl:"a:link[@rel='self']/@href",alternateUrl:"a:link[@rel='alternate']/@href",downloadUrl:"a:link[@rel='enclosure']/@href",
type:"a:link[@rel='enclosure']/@type",length:"a:link[@rel='enclosure']/@length",editLink:"a:link[@rel='edit']/@href",editMediaLink:"a:link[@rel='edit-media']/@href",thumbnailUrl:"a:link[@rel='thumbnail']/@href",commentsUrl:"a:link[@rel='replies']/@href",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",authorUserState:"a:author/snx:userState",title:"a:title",published:"a:published",updated:"a:updated",created:"td:created",modified:"td:modified",lastAccessed:"td:lastAccessed",
modifierName:"td:modifier/td:name",modifierUserId:"td:modifier/snx:userid",modifierEmail:"td:modifier/td:email",modifierUserState:"td:modifier/snx:userState",visibility:"td:visibility",libraryId:"td:libraryId",libraryType:"td:libraryType",versionUuid:"td:versionUuid",versionLabel:"td:versionLabel",propagation:"td:propagation",recommendationsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",commentsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",sharesCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/share']",
foldersCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/collections']",attachmentsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/attachments']",versionsCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/versions']",referencesCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/references']",totalMediaSize:"td:totalMediaSize",summary:"a:summary",contentUrl:"a:content/@src",contentType:"a:content/@type",objectTypeId:"td:objectTypeId",lock:"td:lock/@type",acls:"td:permissions",
hitCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/hit']",anonymousHitCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/anonymous_hit']",tags:"a:category/@term",category:"a:category/@label"},CommentXPath:{entry:"a:entry",id:"a:id",uid:"td:uuid",title:"a:title",content:"a:content[@type='text']",created:"td:created",modified:"td:modified",versionLabel:"td:versionLabel",updated:"a:updated",published:"a:published",modifierName:"td:modifier/td:name",modifierUserId:"td:modifier/snx:userid",
modifierEmail:"td:modifier/td:email",modifierUserState:"td:modifier/snx:userState",authorName:"a:author/a:name",authorUserId:"a:author/snx:userid",authorEmail:"a:author/a:email",authorUserState:"a:author/snx:userState",language:"td:language",deleteWithRecord:"td:deleteWithRecord"},AtomFileInstance:"${files}/basic/api/myuserlibrary/document/{documentId}/entry",AtomFileInstancePublic:"${files}/basic/anonymous/api/library/{libraryId}/document/{documentId}/entry",AtomFilesMy:"/${files}/basic/api/myuserlibrary/feed",
AtomFilesShared:"/${files}/basic/api/documents/shared/feed",AtomFilesPublic:"/${files}/basic/anonymous/api/documents/feed?visibility=public",AtomFilesRecycled:"/${files}/basic/api/myuserlibrary/view/recyclebin/feed",AtomFoldersMy:"/${files}/basic/api/collections/feed",AtomFoldersPublic:"/${files}/basic/anonymous/api/collections/feed",AtomFoldersActive:"/${files}/basic/api/collections/addedto/feed",AtomFileCommentsPublic:"/${files}/basic/anonymous/api/userlibrary/{userId}/document/{documentId}/feed?category=comment",
AtomFileCommentsMy:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/feed?category=comment",AtomAddCommentToFile:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/feed",AtomAddCommentToMyFile:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomUpdateFileMetadata:"/${files}/basic/api/myuserlibrary/document/{documentId}/entry",AtomFilesMyPinned:"/${files}/basic/api/myfavorites/documents/feed",AtomPinFile:"/${files}/basic/api/myfavorites/documents/feed",AtomAddFilesToFolder:"/${files}/basic/api/collection/{collectionId}/feed",
AtomDeleteFile:"/${files}/basic/api/myuserlibrary/document/{documentId}/entry",AtomLockUnlockFile:"/${files}/basic/api/document/{documentId}/lock",AtomAddFileToFolders:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/feed",AtomAddMyFileToFolders:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomCreateFolder:"/${files}/basic/api/collections/feed",AtomDeleteAllFilesFromRecyclebBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/feed",AtomDeleteMyFilesFromRecyclebBin:"/${files}/basic/api/myuserlibrary/view/recyclebin/feed",
AtomDeleteAllVersionsOfAFile:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomDeleteComment:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/comment/{commentId}/entry",AtomDeleteMyComment:"/${files}/basic/api/myuserlibrary/document/{documentId}/comment/{commentId}/entry",AtomDeleteFileFromRecycleBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/{documentId}/entry",AtomDeleteMyFileFromRecycleBin:"/${files}/basic/api/myuserlibrary/view/recyclebin/{documentId}/entry",
AtomDeleteFileShare:"/${files}/basic/api/shares/feed",AtomDeleteFolder:"/${files}/basic/api/collection/{collectionId}/entry",AtomGetAllUsersFiles:"/${files}/basic/anonymous/api/userlibrary/{userId}/feed",AtomGetFileComment:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/comment/{commentId}/entry",AtomGetMyFileComment:"/${files}/basic/api/myuserlibrary/document/{documentId}/comment/{commentId}/entry",AtomGetFileFromRecycleBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/{documentId}/entry",
AtomGetFilesAwaitingApproval:"/${files}/basic/api/approval/documents",AtomGetFileShares:"/${files}/basic/api/documents/shared/feed",AtomGetFilesInFolder:"/${files}/basic/api/collection/{collectionId}/feed",AtomGetFilesInMyRecycleBin:"/${files}/basic/api/myuserlibrary/view/recyclebin/feed",AtomGetFileWithGivenVersion:"/${files}/basic/api/myuserlibrary/document/{documentId}/version/{versionId}/entry",AtomGetFolder:"/${files}/basic/api/collection/{collectionId}/entry",AtomGetFoldersWithRecentlyAddedFiles:"/${files}/basic/api/collections/addedto/feed",
AtomGetPinnedFolders:"/${files}/basic/api/myfavorites/collections/feed",AtomGetPublicFolders:"/${files}/basic/anonymous/api/collections/feed",AtomPinFolder:"/${files}/basic/api/myfavorites/collections/feed",AtomRemoveFileFromFolder:"/${files}/basic/api/collection/{collectionId}/feed",AtomRestoreFileFromRecycleBin:"/${files}/basic/api/userlibrary/{userId}/view/recyclebin/{documentId}/entry",AtomShareFileWithCommunities:"/${files}/basic/api/myuserlibrary/document/{documentId}/feed",AtomUpdateComment:"/${files}/basic/api/userlibrary/{userId}/document/{documentId}/comment/{commentId}/entry",
AtomUpdateMyComment:"/${files}/basic/api/myuserlibrary/document/{documentId}/comment/{commentId}/entry",AtomAddCommentToCommunityFile:"/${files}/basic/api/communitylibrary/{communityId}/document/{documentId}/feed",AtomGetAllFilesInCommunity:"/${files}/basic/api/communitylibrary/{communityId}/feed",AtomGetCommunityFile:"/${files}/basic/api/communitylibrary/{communityId}/document/{documentId}/entry",AtomUpdateCommunityFileMetadata:"/${files}/basic/api/library/{libraryId}/document/{documentId}/entry"},
e)})},"sbt/connections/FileService":function(){define("../declare,../lang,../stringUtil,../Promise,./FileConstants,../base/BaseService,../base/BaseEntity,../base/XmlDataHandler,../config,../util,../xml".split(","),function(g,e,c,d,b,a,j,k,i,q,m){var n=g(j,{getCommentId:function(){return this.id||this.getAsString("uid")},getTitle:function(){return this.getAsString("title")},getContent:function(){return this.getAsString("content")},getCreated:function(){return this.getAsDate("created")},getModified:function(){return this.getAsDate("modified")},
getVersionLabel:function(){return this.getAsString("versionLabel")},getUpdated:function(){return this.getAsDate("updated")},getPublished:function(){return this.getAsDate("published")},getModifier:function(){return this.getAsObject(["modifierName","modifierUserId","modifierEmail","modifierUserState"])},getAuthor:function(){return this.getAsObject(["authorName","authorUserId","authorEmail","authorUserState"])},getLanguage:function(){return this.getAsString("language")},getDeleteWithRecord:function(){return this.getAsBoolean("deleteWithRecord")}}),
p=g(j,{getFileId:function(){return this.id||this._fields.id||this.getAsString("uid")},getLabel:function(){return this.getAsString("label")},getSelfUrl:function(){return this.getAsString("selfUrl")},getAlternateUrl:function(){return this.getAsString("alternateUrl")},getDownloadUrl:function(){return i.Properties.serviceUrl+"/files/"+this.service.endpoint.proxyPath+"/connections/DownloadFile/"+this.getFileId()+"/"+this.getLibraryId()},getType:function(){return this.getAsString("type")},getCategory:function(){return this.getAsString("category")},
getSize:function(){return this.getAsNumber("length")},getEditLink:function(){return this.getAsString("editLink")},getEditMediaLink:function(){return this.getAsString("editMediaLink")},getThumbnailUrl:function(){return this.getAsString("thumbnailUrl")},getCommentsUrl:function(){return this.getAsString("commentsUrl")},getAuthor:function(){return this.getAsObject(["authorName","authorUserId","authorEmail","authorUserState"])},getTitle:function(){return this.getAsString("title")},getPublished:function(){return this.getAsDate("published")},
getUpdated:function(){return this.getAsDate("updated")},getCreated:function(){return this.getAsDate("created")},getModified:function(){return this.getAsDate("modified")},getLastAccessed:function(){return this.getAsDate("lastAccessed")},getModifier:function(){return this.getAsObject(["modifierName","modifierUserId","modifierEmail","modifierUserState"])},getVisibility:function(){return this.getAsString("visibility")},getLibraryId:function(){return this.getAsString("libraryId")},setLibraryId:function(a){return this.setAsString("libraryId",
a)},getLibraryType:function(){return this.getAsString("libraryType")},getVersionUuid:function(){return this.getAsString("versionUuid")},getVersionLabel:function(){return this.getAsString("versionLabel")},getPropagation:function(){return this.getAsString("propagation")},getRecommendationsCount:function(){return this.getAsNumber("recommendationsCount")},getCommentsCount:function(){return this.getAsNumber("commentsCount")},getSharesCount:function(){return this.getAsNumber("sharesCount")},getFoldersCount:function(){return this.getAsNumber("foldersCount")},
getAttachmentsCount:function(){return this.getAsNumber("attachmentsCount")},getVersionsCount:function(){return this.getAsNumber("versionsCount")},getReferencesCount:function(){return this.getAsNumber("referencesCount")},getTotalMediaSize:function(){return this.getAsNumber("totalMediaSize")},getSummary:function(){return this.getAsString("summary")},getContentUrl:function(){return this.getAsString("contentUrl")},getContentType:function(){return this.getAsString("contentType")},getObjectTypeId:function(){return this.getAsString("objectTypeId")},
getLockType:function(){return this.getAsString("lock")},getAcls:function(){return this.getAsString("acls")},getHitCount:function(){return this.getAsNumber("hitCount")},getAnonymousHitCount:function(){return this.getAsNumber("anonymousHitCount")},getTags:function(){return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},setLabel:function(a){return this.setAsString("label",a)},setSummary:function(a){return this.setAsString("summary",a)},setVisibility:function(a){return this.setAsString("visibility",
a)},setNotification:function(a){return this.setAsBoolean("notification",a?"on":"off")},load:function(a,c,d){var f=this.getFileId(),g=this.service.validateField("fileId",f);if(g||c&&(g=this.service.validateField("libraryId",this.getLibraryId())))return g;var i=this,a={query:e.mixin({fileUuid:f},a||{})};d||(d=c?this.service.constructUrl(b.AtomFileInstancePublic,null,{documentId:f,libraryId:this.getLibraryId()}):this.service.constructUrl(b.AtomFileInstance,null,{documentId:f}));return this.service.getEntity(d,
a,f,{createEntity:function(a,c){i.dataHandler=new k({data:c,namespaces:b.Namespaces,xpath:b.FileXPath});return i}})},save:function(a){if(this.getFileId())return this.service.updateFileMetadata(this,a)},addComment:function(a,b){return this.service.addCommentToFile(this.getAuthor().authorUserId,this.getFileId(),a,b)},pin:function(a){return this.service.pinFile(this.getFileId(),a)},unpin:function(a){return this.service.unpinFile(this.getFileId(),a)},lock:function(a){return this.service.lockFile(this.getFileId(),
a)},unlock:function(a){return this.service.unlockFile(this.getFileId(),a)},remove:function(a){return this.service.deleteFile(this.getFileId(),a)},update:function(a){return this.service.updateFileMetadata(this,a)},download:function(){return this.service.downloadFile(this.getFileId(),this.getLibraryId())}}),f={createEntities:function(a,c){return new k({data:c,namespaces:b.Namespaces,xpath:b.FileFeedXPath})},createEntity:function(a,c){var d=null,d="object"==typeof c?c:(new k({data:c,namespaces:b.Namespaces,
xpath:b.FileXPath})).data,d=new k({data:d,namespaces:b.Namespaces,xpath:b.FileXPath});return new p({service:a,dataHandler:d})}},t={createEntities:function(a,c){return new k({data:c,namespaces:b.Namespaces,xpath:b.CommentFeedXPath})},createEntity:function(a,c){var d=null,d="object"==typeof c?c:(new k({data:c,namespaces:b.Namespaces,xpath:b.CommentXPath})).data,d=new k({data:d,namespaces:b.Namespaces,xpath:b.CommentXPath});return new n({service:a,dataHandler:d})}};return g(a,{contextRootMap:{files:"files"},
constructor:function(a){a=a?a.endpoint?a.endpoint:this.getDefaultEndpointName():this.getDefaultEndpointName();if(!this.endpoint)this.endpoint=i.findEndpoint(a)},getDefaultEndpointName:function(){return"connections"},getFileFeedCallbacks:function(){return f},getCommentFeedCallbacks:function(){return t},newFile:function(a){if(a instanceof p)return a;e.isString(a)&&(a={id:a});return new p({service:this,_fields:e.mixin({},a)})},getFile:function(a,b){var c=this.validateField("fileId",a);return c?c:this.newFile({id:a}).load(b)},
getCommunityFile:function(a,c,d){var f=this.validateField("fileId",a);f||(f=this.validateField("communityId",c));if(f)return f;a=this.newFile({id:a});c=this.constructUrl(b.AtomGetCommunityFile,null,{communityId:c,documentId:a.getFileId()});return a.load(d,null,c)},getMyFiles:function(a){return this.getEntities(b.AtomFilesMy,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getCommunityFiles:function(a,c){var d={method:"GET",handleAs:"text",query:c||{}};return this.getEntities(this.constructUrl(b.AtomGetAllFilesInCommunity,
null,{communityId:a}),d,this.getFileFeedCallbacks())},getFilesSharedWithMe:function(a){a={method:"GET",handleAs:"text",query:e.mixin({direction:"inbound"},a?a:{})};return this.getEntities(b.AtomFilesShared,a,this.getFileFeedCallbacks())},getFilesSharedByMe:function(a){a={method:"GET",handleAs:"text",query:e.mixin({direction:"outbound"},a?a:{})};return this.getEntities(b.AtomFilesShared,a,this.getFileFeedCallbacks())},getPublicFiles:function(a){return this.getEntities(b.AtomFilesPublic,{method:"GET",
handleAs:"text",query:a||{},headers:{}},this.getFileFeedCallbacks())},getMyFolders:function(a){return this.getEntities(b.AtomFoldersMy,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getMyFileComments:function(a,b,c){return this.getFileComments(b,a,!1,null,c)},getPublicFileComments:function(a,b,c){return this.getFileComments(b,a,!0,null,c)},addCommentToFile:function(a,c,d,f,e){var g=this.validateField("fileId",c);g||(g=this.validateField("comment",d));if(g)return g;d={method:"POST",
query:e||{},headers:b.AtomXmlHeaders,data:this._constructPayloadForComment(!1,d)};f||(f=a?this.constructUrl(b.AtomAddCommentToFile,null,{userId:a,documentId:c}):this.constructUrl(b.AtomAddCommentToMyFile,null,{documentId:c}));return this.updateEntity(f,d,this.getCommentFeedCallbacks())},addCommentToMyFile:function(a,b,c){return this.addCommentToFile(null,a,b,null,c)},addCommentToCommunityFile:function(a,c,d,f){d=this.constructUrl(b.AtomAddCommentToCommunityFile,null,{communityId:d,documentId:a});
return this.addCommentToFile(null,a,c,d,f)},updateFileMetadata:function(a,c,d){var f=this.validateField("fileOrJson",a);if(f)return f;a=this.newFile(a);d={method:"PUT",query:d||{},headers:b.AtomXmlHeaders,data:this._constructPayload(a._fields,a.getFileId())};c||(c=this.constructUrl(b.AtomUpdateFileMetadata,null,{documentId:a.getFileId()}));return this.updateEntity(c,d,this.getFileFeedCallbacks())},updateCommunityFileMetadata:function(a,c,f){var h=this.validateField("fileOrJson",a);if(h)return h;var e=
this.newFile(a),h=new d,g=this,i=function(){var a=g.constructUrl(b.AtomUpdateCommunityFileMetadata,null,{libraryId:e.getLibraryId(),documentId:e.getFileId()});g.updateFileMetadata(e,a,f).then(function(a){h.fulfilled(a)},function(a){h.rejected(a)})};e.isLoaded()?i():(a=g.constructUrl(b.AtomGetCommunityFile,null,{communityId:c,documentId:e.getFileId()}),e.load(null,null,a).then(function(){i()},function(a){h.rejected(a)}));return h},pinFile:function(a,c){var d=this.validateField("fileId",a);if(d)return d;
d=c?e.mixin({},c):{};d.itemId=a;return this.updateEntity(b.AtomPinFile,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d},{createEntity:function(){return"Success"}})},unpinFile:function(a,c){var d=this.validateField("fileId",a);if(d)return d;d=c?e.mixin({},c):{};d.itemId=a;return this.deleteEntity(b.AtomPinFile,{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d},a)},addFilesToFolder:function(a,c){var d=this.validateField("fileIds",a);d||(d=this.validateField("folderId",
c));var d=this.constructUrl(b.AtomAddFilesToFolder,null,{collectionId:c}),f="?",e;for(e in a)d+=f+"itemId="+a[e],f="&";return this.updateEntity(d,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},{createEntity:function(){return"Success"}})},getPinnedFiles:function(a){return this.getEntities(b.AtomFilesMyPinned,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},deleteFile:function(a){var c=this.validateField("fileId",a);return c?c:this.deleteEntity(this.constructUrl(b.AtomDeleteFile,
null,{documentId:a}),{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},lockFile:function(a,c){var d=c?e.mixin({},c):{};d.type="HARD";var f={method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:c||{}};return this.updateEntity(this.constructUrl(b.AtomLockUnlockFile,d,{documentId:a}),f,{createEntity:function(){return"Success"}},c)},unlockFile:function(a,c){var d=c?e.mixin({},c):{};d.type="NONE";var f={method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:c||
{}};return this.updateEntity(this.constructUrl(b.AtomLockUnlockFile,d,{documentId:a}),f,{createEntity:function(){return"Success"}},c)},uploadFile:function(a,b){var c=this.validateField("File Control Or Id",a);if(c||(c=this.validateHTML5FileSupport()))return c;c=null;if("string"==typeof a)c=document.getElementById(a),filePath=c.value,c=c.files;else if("object"==typeof a)filePath=a.value,c=a.files;else return this.createBadRequestPromise("File Control or ID is required");var c=c[0],d=new FormData;d.append("file",
c);return this.uploadFileBinary(d,c.name,b)},uploadFileBinary:function(a,b,c){var d=this.validateField("Binary Content",a);return d?d:(d=this.validateField("File Name",b))?d:-1!=q.getJavaScriptLibrary().indexOf("Dojo 1.4.3")?this.createBadRequestPromise("Dojo 1.4.3 is not supported for File upload"):this.updateEntity(this.constructUrl(i.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/UploadFile/"+encodeURIComponent(b),c&&c.parameters?c.parameters:{}),{method:"POST",headers:{"Content-Type":!1,
"Process-Data":!1},query:c||{},data:a},this.getFileFeedCallbacks())},uploadNewVersion:function(a,b,c){var d=this.validateField("File Control Or Id",b);d||(d=this.validateField("File ID",a));if(d||(d=this.validateHTML5FileSupport()))return d;d=null;if("string"==typeof b)b=document.getElementById(b),filePath=b.value,d=b.files;else if("object"==typeof b)filePath=b.value,d=b.files;else return this.createBadRequestPromise("File Control or ID is required");b=d[0];d=new FormData;d.append("file",b);return this.uploadNewVersionBinary(d,
a,b.name,c)},uploadNewVersionBinary:function(a,b,c,f){var e=this.validateField("Binary Content",a);if(e||(e=this.validateField("File ID",b)))return e;if(e=this.validateField("File Name",c))return e;if(-1!=q.getJavaScriptLibrary().indexOf("Dojo 1.4.3"))return this.createBadRequestPromise("Dojo 1.4.3 is not supported for File Upload");var b=this.constructUrl(i.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/UploadNewVersion/"+encodeURIComponent(b)+"/"+encodeURIComponent(c),f&&
f.parameters?f.parameters:{}),a={method:"PUT",headers:{"Content-Type":!1,"Process-Data":!1},data:a},e=new d,g=this;this.updateEntity(b,a,this.getFileFeedCallbacks()).then(function(a){f?g.updateFile(a.getFileId(),f).then(function(a){e.fulfilled(a)}):e.fulfilled(a)},function(a){e.rejected(a)});return e},updateFile:function(a,d){var f=this.validateField("File ID",a);if(f)return f;var f=this.constructUrl(b.AtomFileInstance,null,{documentId:a}),e="?";if(d&&d.tags){var g=d.tags.split(","),i;for(i in g)f+=
e+"tag="+c.trim(g[i]),e="&";delete d.tags}if(d&&d.removeTags){g=d.removeTags.split(",");for(i in g)f+=e+"removeTag="+c.trim(g[i]),e="&";delete d.removeTags}return this.updateEntity(f,{method:"PUT",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d||{}},this.getFileFeedCallbacks())},downloadFile:function(a,b){window.open(i.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/DownloadFile/"+a+"/"+b)},actOnCommentAwaitingApproval:function(){},actOnFileAwaitingApproval:function(){},
addFileToFolders:function(a,c,d){var f=this.validateField("fileId",a);f||(f=this.validateField("folderIds",c));if(f)return f;f=null;f=d?this.constructUrl(b.AtomAddFileToFolders,null,{userId:d,documentId:a}):this.constructUrl(b.AtomAddMyFileToFolders,null,{documentId:a});a=this._constructPayloadForMultipleEntries(c,"itemId","collection");return this.updateEntity(f,{method:"POST",headers:b.AtomXmlHeaders,data:a},{createEntity:function(){}})},createFolder:function(a,c,d){var f=this.validateField("folderName",
a);if(f)return f;f=b.AtomCreateFolder;a=this._constructPayloadFolder(a,c,d,"create");a={method:"POST",headers:e.mixin(b.AtomXmlHeaders,{"X-Update-Nonce":"{X-Update-Nonce}"}),data:a};return this.updateEntity(f,a,this.getFileFeedCallbacks())},deleteAllFilesFromRecycleBin:function(a){var c=null,c=a?this.constructUrl(b.AtomDeleteAllFilesFromRecyclebBin,null,{userId:a}):b.AtomDeleteMyFilesFromRecyclebBin;return this.deleteEntity(c,{method:"DELETE"},"")},deleteAllVersionsOfFile:function(a,c,d){var f=this.validateField("fileId",
a);f||(f=this.validateField("versionLabel",c));if(f)return f;c={method:"DELETE",query:e.mixin({category:"version",deleteFrom:c},d||{}),headers:{"X-Update-Nonce":"{X-Update-Nonce}"}};return this.deleteEntity(this.constructUrl(b.AtomDeleteAllVersionsOfAFile,null,{documentId:a}),c,a)},deleteComment:function(a,c,d,f){var e=this.validateField("fileId",a);e||(e=this.validateField("commentId",c));if(e)return e;e=null;e=d?this.constructUrl(b.AtomDeleteComment,null,{userId:d,documentId:a,commentId:c}):this.constructUrl(b.AtomDeleteMyComment,
null,{documentId:a,commentId:c});return this.deleteEntity(e,{method:"DELETE",query:f||{},headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},c)},deleteFileFromRecycleBin:function(a,c,d){var f=this.validateField("fileId",a);if(f)return f;f=null;f=c?this.constructUrl(b.AtomDeleteFileFromRecycleBin,null,{userId:c,documentId:a}):this.constructUrl(b.AtomDeleteMyFileFromRecycleBin,null,{documentId:a});return this.deleteEntity(f,{method:"DELETE",query:d||{},headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},
deleteFileShare:function(a,c,d){var f=this.validateField("fileId",a);if(f)return f;d=e.mixin({sharedWhat:a},d||{});if(c)d.sharedWith=c;return this.deleteEntity(b.AtomDeleteFileShare,{method:"DELETE",query:d,headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},deleteFolder:function(a){var c=this.validateField("folderId",a);return c?c:this.deleteEntity(this.constructUrl(b.AtomDeleteFFolder,null,{collectionId:a}),{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"}},a)},getAllUserFiles:function(a,
c){var d=this.validateField("userId",a);if(d)return d;d={method:"GET",handleAs:"text",query:c||{}};return this.getEntities(this.constructUrl(b.AtomGetAllUsersFiles,null,{userId:a}),d,this.getFileFeedCallbacks())},getFileComments:function(a,c,d,f,e,g){var i=this.validateField("fileId",a);if(i)return i;i=null;if(e)i=this.constructUrl(b.AtomAddCommentToCommunityFile,null,{communityId:e,documentId:a});else if(f)i=c?this.constructUrl(b.AtomGetFileComment,null,{userId:c,documentId:a,commentId:f}):this.constructUrl(b.AtomGetMyFileComment,
null,{documentId:a,commentId:f});else{if(i=this.validateField("userId",c))return i;i=d?this.constructUrl(b.AtomFileCommentsPublic,null,{userId:c,documentId:a}):this.constructUrl(b.AtomFileCommentsMy,null,{userId:c,documentId:a})}return this.getEntities(i,{method:"GET",handleAs:"text",query:g||{}},this.getCommentFeedCallbacks())},getAllCommunityFileComments:function(a,b,c){var d=this.validateField("fileId",a);d||(d=this.validateField("communityId",b));return d?d:this.getFileComments(a,null,null,null,
b,c)},getFileFromRecycleBin:function(a,c,d){var f=this.validateField("fileId",a);if(f)return f;d={method:"GET",handleAs:"text",query:d||{}};return this.getEntity(this.constructUrl(b.AtomGetFileFromRecycleBin,null,{userId:c,documentId:a}),d,{createEntity:function(a,c){self.dataHandler=new k({data:c,namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},getFilesAwaitingApproval:function(a){return this.getEntities(b.AtomGetFilesAwaitingApproval,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},
getFileShares:function(a){return this.getEntities(b.AtomGetFileShares,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getFilesInFolder:function(a,c){return this.getEntities(this.constructUrl(b.AtomGetFilesInFolder,null,{collectionId:a}),{method:"GET",handleAs:"text",query:c||{}},this.getFileFeedCallbacks())},getFilesInMyRecycleBin:function(a){return this.getEntities(b.AtomGetFilesInMyRecycleBin,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getFileWithGivenVersion:function(a,
c,d){var f=this.validateField("fileId",a);if(f)return f;if(!c)return this.getFile(a,d);d={method:"GET",handleAs:"text",query:d||{}};return this.getEntity(this.constructUrl(b.AtomGetFileWithGivenVersion,null,{documentId:a,versionId:c}),d,{createEntity:function(a,c){self.dataHandler=new k({data:c,namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},getFolder:function(a){var c=this.validateField("folderId",a);return c?c:this.getEntity(this.constructUrl(b.AtomGetFolder,null,{collectionId:a}),{method:"GET",
handleAs:"text"},{createEntity:function(a,c){self.dataHandler=new k({data:c,namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},getFoldersWithRecentlyAddedFiles:function(a){return this.getEntities(b.AtomGetFoldersWithRecentlyAddedFiles,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getPinnedFolders:function(a){return this.getEntities(b.AtomGetPinnedFolders,{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},getPublicFolders:function(a){return this.getEntities(b.AtomGetPublicFolders,
{method:"GET",handleAs:"text",query:a||{}},this.getFileFeedCallbacks())},pinFolder:function(a,c){var d=this.validateField("folderId",a);if(d)return d;d=c?e.mixin({},c):{};d.itemId=a;return this.updateEntity(b.AtomPinFolder,{method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d},{createEntity:function(){}})},removeFileFromFolder:function(a,c){var d=this.validateField("folderId",a);if(d||(d=this.validateField("fileId",c)))return d;d=args?e.mixin({},args):{};d.itemId=c;return this.deleteEntity(this.constructUrl(b.AtomRemoveFileFromFolder,
null,{collectionId:a}),{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d},c)},restoreFileFromRecycleBin:function(a,c){var d=this.validateField("fileId",a);if(d||(d=this.validateField("userId",c)))return d;d=args?e.mixin({},args):{};d.undelete="true";d={method:"POST",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d};return this.updateEntity(this.constructUrl(b.AtomRestoreFileFromRecycleBin,null,{userId:c,documentId:a}),d,{createEntity:function(a,c){self.dataHandler=new k({data:c,
namespaces:b.Namespaces,xpath:b.FileXPath});return self}})},shareFileWithCommunities:function(a,c){var d=this.validateField("fileId",a);d||(d=this.validateField("communityIds",c));if(d)return d;var d=this.constructUrl(b.AtomShareFileWithCommunities,null,{documentId:a}),f=this._constructPayloadForMultipleEntries(c,"itemId","community");return this.updateEntity(d,{method:"POST",headers:b.AtomXmlHeaders,data:f},{createEntity:function(a,b,c){return c}})},unpinFolder:function(a,c){var d=this.validateField("folderId",
a);if(d)return d;d=c?e.mixin({},c):{};d.itemId=a;return this.deleteEntity(b.AtomPinFolder,{method:"DELETE",headers:{"X-Update-Nonce":"{X-Update-Nonce}"},query:d},a)},updateMyComment:function(a,b,c,d){return updateComment(a,b,c,null,d)},updateComment:function(a,c,d,f,e){var g=this.validateField("fileId",a);g||(g=this.validateField("comment",d));if(g)return g;g||(g=this.validateField("commentId",c));if(g)return g;d={method:"POST",query:e||{},headers:b.AtomXmlHeaders,data:this._constructPayloadForComment(!1,
d)};e=null;e=f?this.constructUrl(b.AtomUpdateComment,null,{userId:f,documentId:a,commentId:c}):this.constructUrl(b.AtomUpdateMyComment,null,{documentId:a,commentId:c});return this.updateEntity(e,d,this.getCommentFeedCallbacks())},addFileToFolder:function(a,b,c,d){return this.addFileToFolders(a,[b],c,d)},_constructPayloadFolder:function(a,b,d,f,e){var g=this,i=null,k=null,n=null;d&&""!=c.trim(d)&&(d=d.split(","),3==d.length&&(i=d[0],k=d[1],n=d[2]));var p=function(c,d){"category"==d?c=m.encodeXmlEntry("collection"):
"id"==d?c=m.encodeXmlEntry(e):"label"==d?c=m.encodeXmlEntry(a):"title"==d?c=m.encodeXmlEntry(a):"summary"==d?c=m.encodeXmlEntry(b):"visibility"==d?c=m.encodeXmlEntry("private"):"shareWithId"==d&&i?c=m.encodeXmlEntry(i):"shareWithWhat"==d&&k?c=m.encodeXmlEntry(k):"shareWithRole"==d&&n&&(c=m.encodeXmlEntry(n));return c},d=c.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns="http://www.w3.org/2005/Atom">${getCategory}${getId}${getFolderLabel}${getTitle}${getSummary}${getVisibility}${getVisibilityShare}</entry>',
this,function(a,b){"getCategory"==b?a=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',g,p,g):"getId"==b&&e?a=c.transform("<id>${id}</id>",g,p,g):"getFolderLabel"==b?a=c.transform('<label xmlns="urn:ibm.com/td" makeUnique="true">${label}</label>',g,p,g):"getTitle"==b?a=c.transform("<title>${title}</title>",g,p,g):"getSummary"==b?a=c.transform('<summary type="text">${summary}</summary>',g,p,g):"getVisibility"==b?a=c.transform('<visibility xmlns="urn:ibm.com/td">${visibility}</visibility>',
g,p,g):"getVisibilityShare"==b&&i&&(a=c.transform('<sharedWith xmlns="urn:ibm.com/td"> <member xmlns="http://www.ibm.com/xmlns/prod/composite-applications/v1.0" ca:type="${shareWithWhat}" xmlns:ca="http://www.ibm.com/xmlns/prod/composite-applications/v1.0" ca:id="${shareWithId}" ca:role="${shareWithRole}"/> </sharedWith>',g,p,g));return a},this);return c.trim(d)},_constructPayloadForMultipleEntries:function(a,b,d){var b='<?xml version="1.0" encoding="UTF-8"?><feed xmlns="http://www.w3.org/2005/Atom">${getEntries}</feed>',
f="",e="",g="",i="",k=function(a,b){"category"==b?a=m.encodeXmlEntry(d):"getCategory"==b?a=e:"fileId"==b?a=m.encodeXmlEntry(i):"getItem"==b?a=g:"getEntries"==b&&(a=f);return a},n;for(n in a){var i=a[n],p="<entry>${getCategory}${getItem}</entry>";d&&(e=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',this,k,this));g=c.transform('<itemId xmlns="urn:ibm.com/td">${fileId}</itemId>',this,k,this);p=c.transform(p,this,k,this);f+=p}""!=f&&(b=c.transform(b,
this,k,this));return b},_constructPayloadForComment:function(a,b){var d='<entry xmlns="http://www.w3.org/2005/Atom">${getCategory}${getDeleteComment}${getContent}</entry>',f="",e="",g="",i=function(a,c){"category"==c?a=m.encodeXmlEntry("comment"):"content"==c?a=m.encodeXmlEntry(b):"deleteWithRecord"==c?a="true":"getCategory"==c&&""!=f?a=f:"getContent"==c&&""!=e?a=e:"getDeleteComment"==c&&""!=g&&(a=g);return a},f=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',
this,i,this),e=c.transform('<content type="text/plain">${content}</content>',this,i,this);a&&(g=c.transform('<deleteWithRecord xmlns="urn:ibm.com/td">${deleteWithRecord}</deleteWithRecord>',this,i,this));return d=c.transform(d,this,i,this)},_constructPayload:function(a){var b='<entry xmlns="http://www.w3.org/2005/Atom">${getCategory}${getId}${getUuid}${getLabel}${getTitle}${getSummary}${getVisibility}${getItem}${getTags}${getNotification}</entry>',d="",f="",e="",g="",i="",k="",n="",p="",j="",t="",
q=null,z=function(a,b){q?a=m.encodeXmlEntry(q):"getCategory"==b&&""!=d?a=d:"getId"==b&&""!=f?a=f:"getUuid"==b&&""!=e?a=e:"getLabel"==b&&""!=g?a=g:"getTitle"==b&&""!=i?a=i:"getSummary"==b&&""!=k?a=k:"getVisibility"==b&&""!=n?a=n:"getItem"==b&&""!=p?a=p:"getTags"==b&&""!=j?a=j:"getNotification"==b&&""!=t&&(a=t);return a},x;for(x in a)if(q=a[x],-1!=x.indexOf("category"))d=c.transform('<category term="${category}" label="${category}" scheme="tag:ibm.com,2006:td/type"/>',this,z,this);else if(-1!=x.indexOf("id"))f=
c.transform("<id>${id}</id>",this,z,this);else if(-1!=x.indexOf("uuid"))e=c.transform('<uuid xmlns="urn:ibm.com/td">${uuid}</uuid>',this,z,this);else if(-1!=x.indexOf("label"))g=c.transform('<label xmlns="urn:ibm.com/td">${label}</label>',this,z,this),i=c.transform("<title>${title}</title>",this,z,this);else if(-1!=x.indexOf("summary"))k=c.transform('<summary type="text">${summary}</summary>',this,z,this);else if(-1!=x.indexOf("visibility"))n=c.transform('<visibility xmlns="urn:ibm.com/td">${visibility}</visibility>',
this,z,this);else if(-1!=x.indexOf("itemId"))p=c.transform('<itemId xmlns="urn:ibm.com/td">${fileId}</itemId>',this,z,this);else if(-1!=x.indexOf("tags")){var C=q,D;for(D in C)j+=c.transform('<category term="${tag}" /> ',{tag:C[D]})}else x.contains("notification")&&(t=c.transform("<td:notification>${notification}</td:notification>",this,z,this));q=null;return b=c.transform(b,this,z,this)}})})},"sbt/connections/FollowConstants":function(){define(["../lang","./ConnectionsConstants"],function(g,e){return g.mixin(e,
{ActivitiesSource:"activities",ActivityResourceType:"activity",BlogsSource:"blogs",BlogResourceType:"blog",CommunitiesSource:"communities",CommunitiesResourceType:"community",FilesSource:"files",FileResourceType:"file",FileFolderResourceType:"file_folder",ForumsSource:"forums",ForumResourceType:"forum",ForumTopicResourceType:"forum_topic",ProfilesSource:"profiles",ProfilesResourceType:"profile",WikisSource:"wikis",WikiResourceType:"wiki",WikiPageResourceType:"wiki_page",TagsSource:"tags",TagResourceType:"tag",
FollowedResourceFeedXPath:e.ConnectionsFeedXPath,FollowedResourceXPath:g.mixin({followedResourceUuid:"a:id",categoryType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",source:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/source']/@term",resourceType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/resource-type']/@term",resourceId:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/resource-id']/@term",relatedUrl:"a:link[@rel='related']/@href"},e.AtomEntryXPath),
AtomFollowAPI:"/{service}/follow/atom/resources",AtomStopFollowAPI:"/{service}/follow/atom/resources/{resourceId}"})})},"sbt/connections/FollowService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./FollowConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler".split(","),function(g,e,c,d,b,a,j,k,i){var q=g(k,{xpath:a.FollowedResourceXPath,constructor:function(){},createEntryData:function(){var a,b=function(a){return a};a=""+d.transform('<category term="${getSource}" scheme="http://www.ibm.com/xmlns/prod/sn/source"></category>',
this,b,this);a+=d.transform('<category term="${getResourceType}" scheme="http://www.ibm.com/xmlns/prod/sn/resource-type"></category>',this,b,this);this.getResourceId()&&(a+=d.transform('<category term="${getResourceId}" scheme="http://www.ibm.com/xmlns/prod/sn/resource-id"></category>',this,b,this));return d.trim(a)},getFollowedResourceUuid:function(){var a=this.getAsString("followedResourceUuid");a&&-1!=a.indexOf("urn:lsid:ibm.com:follow:resource-")&&(a=a.substring(33,a.length));return a},setFollowedResourceUuid:function(a){return this.setAsString("followedResourceUuid",
a)},getSource:function(){return this.getAsString("source")},setSource:function(a){return this.setAsString("source",a)},getResourceType:function(){return this.getAsString("resourceType")},setResourceType:function(a){return this.setAsString("resourceType",a)},getResourceId:function(){return this.getAsString("resourceId")},setResourceId:function(a){return this.setAsString("resourceId",a)},getType:function(){return this.getAsString("categoryType")},setCategoryType:function(a){return this.setAsString("categoryType",
a)},startFollowing:function(a){return this.service.startFollowing(this,a)},stopFollowing:function(a){return this.service.stopFollowing(this,a)}}),m={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.FollowedResourceFeedXPath})},createEntity:function(a,b){return new q({service:a,data:b})}};return g(j,{contextRootMap:{activities:"activities",blogs:"blogs",communities:"communities",files:"files",forums:"forums",news:"news",profiles:"profiles",wikis:"wikis"},
constructor:function(){if(!this.endpoint)this.endpoint=e.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getFollowedResources:function(b,d,f){d={method:"GET",handleAs:"text",query:c.mixin({source:b,type:d},f||{})};f=null;f=this.constructUrl(a.AtomFollowAPI,null,{service:this._getServiceName(b)});return this.getEntities(f,d,this._getFollowedResourceFeedCallbacks())},startFollowing:function(b,c){var d=this._toFollowedResource(b),e=this._validateFollowedResource(d,
!1,c);if(e)return e;var e={method:"POST",headers:a.AtomXmlHeaders,data:d.createPostData()},g=null,g=this.constructUrl(a.AtomFollowAPI,null,{service:this._getServiceName(d.getSource())});return this.updateEntity(g,e,{createEntity:function(a,b){d.setData(b);return d}})},stopFollowing:function(b,d){var f=this._toFollowedResource(b),e=this._validateFollowedResource(f,!0);if(e)return e;e=c.mixin({source:f.getSource(),type:f.getResourceType(),resource:f.getResourceId()},d||{});e={method:"DELETE",headers:a.AtomXmlHeaders,
query:e};return this.deleteEntity(this.constructUrl(a.AtomStopFollowAPI,null,{service:this._getServiceName(f.getSource()),resourceId:f.getFollowedResourceUuid()}),e,f.getResourceId())},newFollowedResource:function(a){return this._toFollowedResource(a)},_getFollowedResourceFeedCallbacks:function(){return m},_validateFollowedResource:function(a,b){if(!a||!a.getSource())return this.createBadRequestPromise("Invalid argument, resource with source must be specified.");if(!a.getResourceType())return this.createBadRequestPromise("Invalid argument, resource with resourseType must be specified.");
if(b&&!a.getFollowedResourceUuid())return this.createBadRequestPromise("Invalid argument, resource with UUID must be specified.")},_validateFollowedResourceUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected followedResourceUuid.")},_toFollowedResource:function(a){if(a instanceof q)return a;c.isString(a)&&(a={followedResourceUuid:a});return new q({service:this,_fields:c.mixin({},a)})},_getServiceName:function(a){var b=this.contextRootMap,c;for(c in b)if(a==
c)return b[c];return""}})})},"sbt/connections/ProfileAdminService":function(){define("../declare,../lang,../config,../stringUtil,./ProfileConstants,../base/BaseService,../base/XmlDataHandler,./ProfileService".split(","),function(g,e,c,d,b,a,j,k){return g(k,{createProfile:function(a,c){var d=this._toProfile(a),g=this._validateProfile(d);if(g)return g;g={};d.getUserid()?g.userid=d.getUserid():g.email=d.getEmail();e.mixin(g,c||{});g={method:"POST",query:g,headers:b.AtomXmlHeaders,data:this._constructProfilePutData(d)};
return this.updateEntity(b.AdminAtomProfileDo,g,{createEntity:function(){return d}},c)},deleteProfile:function(a,c){var d=this._validateProfileId(a);if(d)return d;d={};this.isEmail(a)?d.email=a:d.userid=a;e.mixin(d,c||{});return this.deleteEntity(b.AdminAtomProfileEntryDo,{method:"DELETE",query:d,handleAs:"text"},a,c)}})})},"sbt/connections/ProfileConstants":function(){define(["../lang","./ConnectionsConstants"],function(g,e){return g.mixin(e,{DefaultCacheSize:10,AddressFields:"streetAddress,extendedAddress,locality,region,postalCode,countryName".split(","),
ProfileFeedXPath:e.ConnectionsFeedXPath,TypeColleague:"colleague",StatusPending:"pending",ProfileXPath:{entry:"/a:feed/a:entry",uid:"a:contributor/snx:userid",id:"a:id",userid:"a:contributor/snx:userid",name:"a:contributor/a:name",email:"a:contributor/a:email",title:"a:title",updated:"a:updated",altEmail:"a:content/h:div/h:span/h:div[@class='x-groupwareMail']",photoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/image']/@href",fnUrl:"a:content/h:div/h:span/h:div/h:a[@class='fn url']/@href",soundUrl:"a:content/h:div/h:span/h:div/h:a[@class='sound url']/@href",
jobTitle:"a:content/h:div/h:span/h:div[@class='title']",organizationUnit:"a:content/h:div/h:span/h:div[@class='org']/h:span[@class='organization-unit']",telephoneNumber:"a:content/h:div/h:span/h:div[@class='tel']/h:span[@class='value']",building:"a:content/h:div/h:span/h:div/h:span[@class='x-building']",floor:"a:content/h:div/h:span/h:div/h:span[@class='x-floor']",officeNumber:"a:content/h:div/h:span/h:div/h:span[@class='x-office-number']",streetAddress:"a:content/h:div/h:span/h:div/h:div[@class='street-address']",
extendedAddress:"a:content/h:div/h:span/h:div/h:div[@class='extended-address x-streetAddress2']",locality:"a:content/h:div/h:span/h:div/h:span[@class='locality']",postalCode:"a:content/h:div/h:span/h:div/h:span[@class='postal-code']",region:"a:content/h:div/h:span/h:div/h:span[@class='region']",countryName:"a:content/h:div/h:span/h:div/h:div[@class='country-name']",summary:"a:summary",groupwareMail:"a:content/h:div/h:span/h:div[@class='x-groupwareMail']",blogUrl:"a:content/h:div/h:span/h:div/h:a[@class='x-blog-url url']/@href",
role:"a:content/h:div/h:span/h:div[@class='role']",managerUid:"a:content/h:div/h:span/h:div[@class='x-manager-uid']",isManager:"a:content/h:div/h:span/h:div[@class='x-is-manager']"},ColleagueConnectionXPath:{entry:"/a:feed/a:entry",uid:"a:id",id:"a:id",updated:"a:updated",authorUserid:"a:author/snx:userid",contributorUserid:"a:contributor/snx:userid",authorName:"a:author/snx:name",contributorName:"a:contributor/snx:name",authorEmail:"a:author/snx:email",contributorEmail:"a:contributor/snx:email",
title:"a:title",content:"a:content",selfLink:"a:link[@rel='self']/@href",editLink:"a:link[@rel='edit']/@href"},ProfileVCardXPath:{entry:"/a:feed/a:entry",uid:"a:contributor/snx:userid",vcard:"a:content",id:"a:id",userid:"a:contributor/snx:userid",name:"a:contributor/a:name",email:"a:contributor/a:email",title:"a:title",updated:"a:updated",altEmail:"EMAIL;X_GROUPWARE_MAIL",photoUrl:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/image']/@href",fnUrl:"URL",soundUrl:"SOUND;VALUE=URL",jobTitle:"TITLE",
organizationUnit:"a:content/h:div/h:span/h:div[@class='org']/h:span[@class='organization-unit']",telephoneNumber:"TEL;WORK",building:"X_BUILDING",floor:"X_FLOOR",officeNumber:"X_OFFICE_NUMBER",workLocation:"ADR;WORK",streetAddress:"a:content/h:div/h:span/h:div/h:div[@class='street-address']",extendedAddress:"a:content/h:div/h:span/h:div/h:div[@class='extended-address x-streetAddress2']",locality:"a:content/h:div/h:span/h:div/h:span[@class='locality']",postalCode:"a:content/h:div/h:span/h:div/h:span[@class='postal-code']",
region:"a:content/h:div/h:span/h:div/h:span[@class='region']",countryName:"a:content/h:div/h:span/h:div/h:div[@class='country-name']",summary:"a:summary",groupwareMail:"EMAIL;X_GROUPWARE_MAIL"},ProfileTagsXPath:{entries:"/app:categories/a:category",targetEmail:"app:categories/snx:targetEmail",numberOfContributors:"app:categories/@snx:numberOfContributors",entry:"/app:categories/a:category",uid:"@term",id:"@term",term:"@term",frequency:"@snx:frequency",intensity:"@snx:intensityBin",visibility:"@snx:visibilityBin",
contributorName:"a:name",contributorUserid:"a:userid",contributorEmail:"a:email"},InviteXPath:g.mixin({connectionType:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/connection/type']/@term",status:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/status']/@term"},e.AtomEntryXPath),profileCreateAttributes:{guid:"com.ibm.snx_profiles.base.guid",email:"com.ibm.snx_profiles.base.email",uid:"com.ibm.snx_profiles.base.uid",distinguishedName:"com.ibm.snx_profiles.base.distinguishedName",displayName:"com.ibm.snx_profiles.base.displayName",
givenNames:"com.ibm.snx_profiles.base.givenNames",surname:"com.ibm.snx_profiles.base.surname",userState:"com.ibm.snx_profiles.base.userState"},AtomProfileDo:"/${profiles}{authType}/atom/profile.do",AtomProfileEntryDo:"/${profiles}{authType}/atom/profileEntry.do",AtomConnectionsDo:"/${profiles}{authType}/atom/connections.do",AtomReportingChainDo:"/${profiles}{authType}/atom/reportingChain.do",AtomPeopleManagedDo:"/${profiles}{authType}/atom/peopleManaged.do",AtomConnectionsInCommonDo:"/${profiles}{authType}/atom/connectionsInCommon.do",
AtomSearchDo:"/${profiles}{authType}/atom/search.do",AtomPeopleManagedDo:"/${profiles}{authType}/atom/peopleManaged.do",AtomTagsDo:"/${profiles}{authType}/atom/profileTags.do",AdminAtomProfileDo:"/${profiles}/admin/atom/profiles.do",AdminAtomProfileEntryDo:"/${profiles}/admin/atom/profileEntry.do"})})},"sbt/connections/ProfileService":function(){define("../declare,../lang,../config,../stringUtil,./ProfileConstants,../base/BaseService,../base/BaseEntity,../base/AtomEntity,../base/XmlDataHandler,../base/VCardDataHandler,../Cache,../util".split(","),
function(g,e,c,d,b,a,j,k,i,q,m){var n=g(j,{constructor:function(){},getUserid:function(){return this.getAsString("userid")},getName:function(){return this.getAsString("name")},getEmail:function(){return this.getAsString("email")},getGroupwareMail:function(){return this.getAsString("groupwareMail")},getThumbnailUrl:function(){return this.getAsString("photoUrl")},getJobTitle:function(){return this.getAsString("jobTitle")},getDepartment:function(){return this.getAsString("organizationUnit")},getAddress:function(){return this.getAsObject(b.AddressFields)},
getTelephoneNumber:function(){return this.getAsString("telephoneNumber")},getProfileUrl:function(){return this.getAsString("fnUrl")},getBuilding:function(){return this.getAsString("building")},getFloor:function(){return this.getAsString("floor")},getPronunciationUrl:function(){return this.getAsString("soundUrl")},getSummary:function(){return this.getAsString("summary")},setTelephoneNumber:function(a){this.setAsString("telephoneNumber",a)},setBuilding:function(a){this.setAsString("building",a)},setFloor:function(a){this.setAsString("floor",
a)},setJobTitle:function(a){this.setAsString("jobTitle",a)},setPhotoLocation:function(a){this.setAsString("imageLocation",a)},setAddress:function(a){this.setAsObject(a)},load:function(a){var c=this.getUserid()||this.getEmail(),d=this.service._validateProfileId(c);if(d)return d;var f=this,d={};this.service.isEmail(c)?d.email=c:d.userid=c;e.mixin(d,a||{});d={handleAs:"text",query:d};return this.service.getEntity(this.service.constructUrl(b.AtomProfileDo,{},{authType:this.service._getProfileAuthString()}),
d,c,{createEntity:function(a,c){f.dataHandler=new i({data:c,namespaces:b.Namespaces,xpath:b.ProfileXPath});f.id=f.dataHandler.getEntityId();return f}},a)},update:function(a){return this.service.updateProfile(this,a)},getColleagues:function(a){return this.service.getColleagues(this,a)},getColleagueConnections:function(a){return this.service.getColleagueConnections(this,a)}}),p=g(j,{constructor:function(){},getAuthorUserId:function(){return this.getAsString("authorUserid")},getContributorUserId:function(){return this.getAsString("contributorUserid")},
getAuthorName:function(){return this.getAsString("authorName")},getContributorName:function(){return this.getAsString("contributorName")},getAuthorEmail:function(){return this.getAsString("authorEmail")},getContributorEmail:function(){return this.getAsString("contributorEmail")},getTitle:function(){return this.getAsString("title")},getContent:function(){return this.getAsString("content")},getSelfLink:function(){return this.getAsString("selfLink")},getEditLink:function(){return this.getAsString("editLink")},
getUpdated:function(){return this.getAsString("updated")}}),f=g(j,{constructor:function(){},getTerm:function(){return this.getAsString("term")},getFrequency:function(){return this.getAsNumber("frequency")},getIntensity:function(){return this.getAsNumber("intensity")},getVisibility:function(){return this.getAsNumber("visibility")}}),t=g(k,{xpath:b.InviteXPath,contentType:"html",categoryScheme:'<category term="connection" scheme="http://www.ibm.com/xmlns/prod/sn/type" />',constructor:function(){},createEntryData:function(){var a;
a=""+d.transform('<category term="${getConnectionType}" scheme="http://www.ibm.com/xmlns/prod/sn/connection/type" />',this,function(a){return a},this);a+=d.transform('<category term="${getStatus}" scheme="http://www.ibm.com/xmlns/prod/sn/status" />',this,function(a){return a},this);return d.trim(a)},getConnectionType:function(){return this.getAsString("connectionType")||b.TypeColleague},setConnectionType:function(a){return this.setAsString("connectionType",a)},getStatus:function(){return this.getAsString("status")||
b.StatusPending},setStatus:function(a){return this.setAsString("status",a)},getConnectionId:function(){return this.getAsString("connectionId")},setConnectionId:function(a){return this.setAsString("connectionId",a)}}),o={createEntity:function(a,c,d){var f=null,f=d.args&&"vcard"==d.args.format?new q({data:c,namespaces:b.Namespaces,xpath:b.ProfileVCardXPath}):new i({data:c,namespaces:b.Namespaces,xpath:b.ProfileXPath});return new n({service:a,id:f.getEntityId(),dataHandler:f})}},u={createEntities:function(a,
c){return new i({data:c,namespaces:b.Namespaces,xpath:b.ProfileFeedXPath})},createEntity:function(a,c,d){var f=null,f=d.args&&"vcard"==d.args.format?new q({data:c,namespaces:b.Namespaces,xpath:b.ProfileVCardXPath}):new i({data:c,namespaces:b.Namespaces,xpath:b.ProfileXPath});return new n({service:a,id:f.getEntityId(),dataHandler:f})}},s={createEntities:function(a,c){return new i({data:c,namespaces:b.Namespaces,xpath:b.ProfileFeedXPath})},createEntity:function(a,c){var d=null,d=new i({data:c,namespaces:b.Namespaces,
xpath:b.ColleagueConnectionXPath});return new p({service:a,id:d.getEntityId(),dataHandler:d})}},h={createEntities:function(a,c){return new i({data:c,namespaces:b.Namespaces,xpath:b.ProfileTagsXPath})},createEntity:function(a,c){var d=new i({data:c,namespaces:b.Namespaces,xpath:b.ProfileTagsXPath});return new f({service:a,id:d.getEntityId(),dataHandler:d})}};return g(a,{contextRootMap:{profiles:"profiles"},constructor:function(){if(!this.endpoint)this.endpoint=c.findEndpoint(this.getDefaultEndpointName());
if(!this._cache&&(c.Properties.ProfileCacheSize||b.DefaultCacheSize))this._cache=new m(c.Properties.ProfileCacheSize||b.DefaultCacheSize)},getDefaultEndpointName:function(){return"connections"},newProfile:function(a){return this._toProfile(a)},newInvite:function(a){return this._toInvite(a)},getProfile:function(a,b){var c=this._toProfile(a),d=this._validateProfile(c);return d?d:c.load(b)},updateProfile:function(a,c){var d=this._toProfile(a),f=this._validateProfile(d);if(f)return f;f={};d.getUserid()?
f.userid=d.getUserid():f.email=d.getEmail();e.mixin(f,c||{});f={method:"PUT",query:f,headers:b.AtomXmlHeaders,data:this._constructProfilePostData(d)};return this.updateEntity(this.constructUrl(b.AtomProfileEntryDo,{},{authType:this._getProfileAuthString()}),f,{createEntity:function(){return d}},c)},getTags:function(a,c){var d=this._toTargetObject(a),f=this._validateTargetObject(d);if(f)return f;d={method:"GET",handleAs:"text",query:e.mixin(d,c||{})};return this.getEntities(this.constructUrl(b.AtomTagsDo,
{},{authType:this._getProfileAuthString()}),d,this.getProfileTagFeedCallbacks(),c)},getColleagues:function(a,c){var d=this._toIdObject(a),f=this._validateIdObject(d);if(f)return f;d={method:"GET",handleAs:"text",query:e.mixin(d,{connectionType:"colleague",outputType:"profile"},c||{})};return this.getEntities(this.constructUrl(b.AtomConnectionsDo,{},{authType:this._getProfileAuthString()}),d,this.getProfileFeedCallbacks(),c)},getColleagueConnections:function(a,c){var d=this._toIdObject(a),f=this._validateIdObject(d);
if(f)return f;d={method:"GET",handleAs:"text",query:e.mixin(d,{connectionType:"colleague",outputType:"connection"},c||{})};return this.getEntities(this.constructUrl(b.AtomConnectionsDo,{},{authType:this._getProfileAuthString()}),d,this.getColleagueConnectionFeedCallbacks(),c)},getReportingChain:function(a,c){var d=this._toIdObject(a),f=this._validateIdObject(d);if(f)return f;d={method:"GET",handleAs:"text",query:e.mixin(d,c||{})};return this.getEntities(this.constructUrl(b.AtomReportingChainDo,{},
{authType:this._getProfileAuthString()}),d,this.getProfileFeedCallbacks(),c)},getPeopleManaged:function(a,c){var d=this._toIdObject(a),f=this._validateIdObject(d);if(f)return f;d={method:"GET",handleAs:"text",query:e.mixin(d,c||{})};return this.getEntities(this.constructUrl(b.AtomPeopleManagedDo,{},{authType:this._getProfileAuthString()}),d,this.getProfileFeedCallbacks(),c)},search:function(a){if(!a)return this.createBadRequestPromise("Invalid arguments, one or more of the input parameters to narrow the search must be specified.");
var c={method:"GET",handleAs:"text",query:a};return this.getEntities(this.constructUrl(b.AtomSearchDo,{},{authType:this._getProfileAuthString()}),c,this.getProfileFeedCallbacks(),a)},updateProfilePhoto:function(a,b,d){var f=this.validateField("File Control Or Id",a);if(f)return f;promose=this.validateHTML5FileSupport();if(f)return f;b=this._toIdObject(b);f=null;if("string"==typeof a)a=document.getElementById(a),filePath=a.value,f=a.files;else if("object"==typeof a)filePath=a.value,f=a.files;else return this.createBadRequestPromise("File Control or ID is required");
if(1!=f.length)return this.createBadRequestPromise("Only one file needs to be provided to this API");a=f[0];f=new FormData;f.append("file",a);b=e.mixin(b,d||{});return this.updateEntity(this.constructUrl(c.Properties.serviceUrl+"/files/"+this.endpoint.proxyPath+"/connections/UpdateProfilePhoto/"+encodeURIComponent(a.name),d&&d.parameters?d.parameters:{}),{method:"PUT",headers:{"Content-Type":!1,"Process-Data":!1},query:b||{},data:f},{createEntity:function(a,b){return b}})},createInvite:function(a,
c,d){var a=this._toIdObject(a),f=this._validateIdObject(a);if(f)return f;var h=this._toInvite(c),c={method:"POST",query:e.mixin(a,d||{}),headers:b.AtomXmlHeaders,data:h.createPostData()};return this.updateEntity(this.constructUrl(b.AtomConnectionsDo,{},{authType:this._getProfileAuthString()}),c,{createEntity:function(a,b,c){h.setData(b);a=this.getLocationParameter(c,"connectionId");h.setConnectionId(a);return h}},d)},getProfileFeedCallbacks:function(){return u},getColleagueConnectionFeedCallbacks:function(){return s},
getProfileCallbacks:function(){return o},getProfileTagFeedCallbacks:function(){return h},_toIdObject:function(a){var b={};if(e.isString(a))this.isEmail(a)?b.email=a:b.userid=a;else if(a instanceof n)if(a.getUserid())b.userid=a.getUserid();else if(a.getEmail())b.email=a.getEmail();return b},_toTargetObject:function(a){var b={};if(e.isString(a))this.isEmail(a)?b.targetEmail=a:b.targetKey=a;else if(a instanceof n)if(a.getUserid())b.targetKey=a.getUserid();else if(a.getEmail())b.targetEmail=a.getEmail();
return b},_validateIdObject:function(a){if(!a.userid&&!a.email)return this.createBadRequestPromise("Invalid argument, userid or email must be specified.")},_validateTargetObject:function(a){if(!a.targetKey&&!a.targetEmail)return this.createBadRequestPromise("Invalid argument, userid or email must be specified.")},_toProfile:function(a){if(a instanceof n)return a;var b=a;if(e.isString(a))b={},this.isEmail(a)?b.email=a:b.userid=a;else if(b&&b.id&&!b.userid&&!b.email)this.isEmail(b.id)?b.email=b.id:
b.userid=b.id,delete b.id;return new n({service:this,_fields:e.mixin({},b)})},_toInvite:function(a){if(a instanceof t)return a;e.isString(a)&&(a={content:a});return new t({service:this,_fields:e.mixin({},a)})},_isAddressSet:function(a){return a._fields.streetAddress||a._fields.extendedAddress||a._fields.locality||a._fields.region||a._fields.postalCode||a._fields.countryName},_constructProfilePostData:function(a){return d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns:app="http://www.w3.org/2007/app" xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:fh="http://purl.org/syndication/history/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns="http://www.w3.org/2005/Atom"><category term="profile" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category><content type="text">\nBEGIN:VCARD\nVERSION:2.1\n${jobTitle}${address}${telephoneNumber}${building}${floor}END:VCARD\n</content></entry>',
a,function(c,f){return c="address"==f?a.service._isAddressSet(a)?d.transform("ADR;WORK:;;${streetAddress},${extendedAddress};${locality};${region};${postalCode};${countryName}\n",{streetAddress:a._fields.streetAddress,extendedAddress:a._fields.extendedAddress,locality:a._fields.locality,region:a._fields.region,postalCode:a._fields.postalCode,countryName:a._fields.countryName}):null:a._fields[f]?d.transform("${attributeName}:${attributeValue}\n",{attributeName:b.ProfileVCardXPath[f],attributeValue:a._fields[f]}):
null},a)},_constructProfilePutData:function(a){return d.transform('<?xml version="1.0" encoding="UTF-8"?><entry xmlns:app="http://www.w3.org/2007/app" xmlns:thr="http://purl.org/syndication/thread/1.0" xmlns:fh="http://purl.org/syndication/history/1.0" xmlns:snx="http://www.ibm.com/xmlns/prod/sn" xmlns:opensearch="http://a9.com/-/spec/opensearch/1.1/" xmlns="http://www.w3.org/2005/Atom"><category term="profile" scheme="http://www.ibm.com/xmlns/prod/sn/type"></category><content type="application/xml"><person xmlns="http://ns.opensocial.org/2008/opensocial"><com.ibm.snx_profiles.attrib>${guid}${email}${uid}${distinguishedName}${displayName}${givenNames}${surname}${userState}</com.ibm.snx_profiles.attrib></person></content></entry>',
a,function(c,f){if(a._fields[f])return c=d.transform("<entry><key>${attributeName}</key><value><type>text</type><data>${attributeValue}</data></value></entry>",{attributeName:b.profileCreateAttributes[f],attributeValue:a._fields[f]})},a)},_validateProfile:function(a){if(!a||!a.getUserid()&&!a.getEmail())return this.createBadRequestPromise("Invalid argument, profile with valid userid or email must be specified.")},_validateProfileId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid or email")},
_getProfileAuthString:function(){return this.endpoint.authType==b.AuthTypes.Basic?"":this.endpoint.authType==b.AuthTypes.OAuth?"/oauth":""}})})},"sbt/connections/SearchConstants":function(){define(["../lang","./ConnectionsConstants"],function(g,e){return g.mixin(e,{Namespaces:{a:"http://www.w3.org/2005/Atom",ibmsc:"http://www.ibm.com/search/content/2010",opensearch:"http://a9.com/-/spec/opensearch/1.1/",relevance:"http://a9.com/-/opensearch/extensions/relevance/1.0/",snx:"http://www.ibm.com/xmlns/prod/sn",
spelling:"http://a9.com/-/opensearch/extensions/spelling/1.0/"},SearchFeedXPath:e.ConnectionsFeedXPath,SingleFacetXPath:{entries:"/a:feed/ibmsc:facets/ibmsc:facet[@id='{facet.id}']/ibmsc:facetValue"},FacetValueXPath:{entry:"/ibmsc:facetValue",uid:"@id",id:"@id",label:"@label",weight:"@weight"},SearchXPath:{entry:"/a:entry",uid:"a:id",title:"a:title",content:"a:content",updated:"a:updated",authorUserid:"a:author/snx:userid",authorName:"a:author/a:name",authorEmail:"a:author/a:email",rank:"snx:rank",
relevance:"relevance:score",summary:"a:summary",authorState:"a:author/snx:userState",type:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/type']/@term",application:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/component']/@term",applicationCount:"count(a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/component']/@term)",primaryComponent:"a:category[ibmsc:field[@id='primaryComponent']]/@term",tags:"a:category[not(@scheme)]/@term",commentCount:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",
resultLink:"a:link[not(@rel)]/@href",bookmarkLink:"ibmsc:field[@id='dogearURL']",eventStartDate:"ibmsc:field[@id='eventStartDate']",authorJobTitle:"a:content/xhtml:div/xhtml:span/xhtml:div[@class='title']",authorJobLocation:"a:content/xhtml:div/xhtml:span/xhtml:div[@class='location']",authorCount:"count(a:contributor)",contributorCount:"count(a:author)",tagCount:"count(a:category[not(@scheme)])",highlightField:"ibmsc:field[@id='highlight']",fileExtension:"ibmsc:field[@id='fileExtension']",memberCount:"snx:membercount",
communityUuid:"snx:communityUuid",containerType:"ibmsc:field[@id='container_type']",communityParentLink:"a:link[@rel='http://www.ibm.com/xmlns/prod/sn/container' and @type='text/html']/@href",parentageMetaID:"ibmsc:field[contains(@id, 'ID')]/@id",parentageMetaURL:"ibmsc:field[contains(@id, 'URL')]",parentageMetaURLID:"ibmsc:field[contains(@id, 'URL')]/@id",objectRefDisplayName:"ibmsc:field[@id='FIELD_OBJECT_REF_DISPLAY_NAME']",objectRefUrl:"ibmsc:field[@id='FIELD_OBJECT_REF_URL']",accessControl:"a:category[@scheme='http://www.ibm.com/xmlns/prod/sn/accesscontrolled']/@term",
commentsSummary:"ibmsc:field[@id='commentsSummary']"},AtomScopes:"/${search}/atom/scopes",AtomSearch:"/${search}/atom/search",AtomMySearch:"/${search}/atom/mysearch",publicSearch:"/${search}/atom/search/results",mySearch:"/${search}/atom/mysearch/results",peopleSearch:"/${search}/atom/search/facets/people",myPeopleSearch:"/${search}/atom/mysearch/facets/people",tagsSearch:"/${search}/atom/search/facets/tags",myTagsSearch:"/${search}/atom/mysearch/facets/tags",dateSearch:"/${search}/atom/search/facets/date",
myDateSearch:"/${search}/atom/mysearch/facets/date",sourceSearch:"/${search}/atom/search/facets/source",mySourceSearch:"/${search}/atom/mysearch/facets/source"})})},"sbt/connections/SearchService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,../json,./SearchConstants,../base/BaseService,../base/BaseEntity,../base/AtomEntity,../base/XmlDataHandler".split(","),function(g,e,c,d,b,a,j,k,i,q,m){var n=g(q,{constructor:function(){}}),p=g(q,{constructor:function(){},getRelevance:function(){return this.getAsNumber("relevance")}}),
f=g(i,{constructor:function(a){this.dataHandler=new m({service:a.service,data:a.data,namespaces:c.mixin(j.Namespaces,a.namespaces||{}),xpath:c.mixin(j.FacetValueXPath,a.xpath||this.xpath||{})});this.id=this.getAsString("uid")},getId:function(){var a=this.getAsString("id").split("/");return 1==a.length?a[0]:a[1]},getLabel:function(){return this.getAsString("label")},getWeight:function(){return this.getAsNumber("weight")}}),t={createEntities:function(a,b){return new m({namespaces:j.Namespaces,xpath:j.SearchFeedXPath,
service:a,data:b})},createEntity:function(a,b){return new n({namespaces:j.Namespaces,service:a,data:b})}},o={createEntities:function(a,b){return new m({namespaces:j.Namespaces,xpath:j.SearchFeedXPath,service:a,data:b})},createEntity:function(a,b){return new p({namespaces:j.Namespaces,xpath:j.SearchXPath,service:a,data:b})}},u={createEntities:function(b,d,f){var e=c.mixin({},j.SingleFacetXPath),f=a.parse(f.options.query.facet);e.entries=e.entries.replace("{facet.id}",f.id);return new m({namespaces:j.Namespaces,
xpath:e,service:b,data:d})},createEntity:function(a,b){return new f({namespaces:j.Namespaces,xpath:j.FacetValueXPath,service:a,data:b})}};return g(k,{contextRootMap:{search:"search"},constructor:function(){if(!this.endpoint)this.endpoint=e.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},getScopes:function(a){return this.getEntities(j.AtomScopes,{method:"GET",handleAs:"text",query:a||{}},t)},getResults:function(a,b){var b=this._stringifyRequestArgs(b),
d={method:"GET",handleAs:"text",query:c.mixin({query:a},b||{})};return this.getEntities(j.AtomSearch,d,o)},getMyResults:function(a,b){var b=this._stringifyRequestArgs(b),d={method:"GET",handleAs:"text",query:c.mixin({query:a},b||{})};return this.getEntities(j.AtomMySearch,d,o)},getResultsByTag:function(a,b){var d={method:"GET",handleAs:"text",query:c.mixin({constraint:this._createTagConstraint(a)},b||{})};return this.getEntities(j.AtomSearch,d,o)},getMyResultsByTag:function(a,b){var d={method:"GET",
handleAs:"text",query:c.mixin({constraint:this._createTagConstraint(a)},b||{})};return this.getEntities(j.AtomMySearch,d,o)},getPeople:function(a,b){var d={method:"GET",handleAs:"text",query:c.mixin({query:a,pageSize:"0",facet:'{"id": "Person"}'},b||{})};return this.getEntities(j.AtomSearch,d,u)},getMyPeople:function(a,b){var d={method:"GET",handleAs:"text",query:c.mixin({query:a,pageSize:"0",facet:'{"id": "Person"}'},b||{})};return this.getEntities(j.AtomMySearch,d,u)},_stringifyRequestArgs:function(b){if(!b)return null;
var d={},f;for(f in b){var e=b[f];d[f]=c.isObject(e)?a.stringify(e):e}return d},_createTagConstraint:function(b){var d={type:"category",values:[]};if(c.isArray(b))for(var f=0;f<b.length;f++)d.values[f]="Tag/"+b[f];else d.values[0]="Tag/"+b;return a.stringify(d)}})})},"sbt/connections/WikiConstants":function(){define(["../lang","./ConnectionsConstants"],function(g,e){var c=g.mixin({uuid:"td:uuid",label:"td:label",permissions:"td:permissions",tags:"a:category[not(@scheme)]/@term",modifierName:"td:modifier/a:name",
modifierEmail:"td:modifier/a:email",modifierUserid:"td:modifier/snx:userid",modifierUserState:"td:modifier/snx:userState",created:"td:created",modified:"td:modified",member:"ca:member",memberId:"ca:member/@ca:id",memberType:"ca:member/@ca:type",memberRole:"ca:member/@ca:role"},e.AtomEntryXPath);return g.mixin(e,{WikiFeedXPath:e.ConnectionsFeedXPath,WikiXPath:g.mixin({communityUuid:"snx:communityUuid",themeName:"td:themeName",librarySize:"td:librarySize",libraryQuota:"td:libraryQuota",totalRemovedSize:"td:totalRemovedSize"},
c,e.AtomEntryXPath),WikiPageXPath:g.mixin({lastAccessed:"td:lastAccessed",versionUuid:"td:versionUuid",versionLabel:"td:versionLabel",propagation:"td:propagation",totalMediaSize:"td:totalMediaSize",recommendations:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/recommendations']",comment:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/comment']",hit:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/hit']",anonymous_hit:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/anonymous_hit']",
share:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/share']",collections:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/collections']",attachments:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/attachments']",versions:"snx:rank[@scheme='http://www.ibm.com/xmlns/prod/sn/versions']"},c,e.AtomEntryXPath),WikisAll:"/{wikis}/{authType}/api/wikis/feed",WikisPublic:"/{wikis}/{authType}/api/wikis/public",WikisMy:"/{wikis}/{authType}/api/mywikis/feed",WikisMostCommented:"/{wikis}/{authType}/anonymous/api/wikis/mostcommented",
WikisMostRecommended:"/{wikis}/{authType}/api/wikis/mostrecommended",WikisMostVisited:"/{wikis}/{authType}/api/wikis/mostvisited",WikiPages:"/{wikis}/{authType}/anonymous/api/wiki/{wikiLabel}/feed",WikiMyPages:"/{wikis}/{authType}/api/wiki/{wikiLabel}/mypages",WikiRecycleBin:"/{wikis}/{authType}/anonymous/api/wiki/{wikiLabelOrId}/recyclebin/feed",WikiEntry:"/{wikis}/{authType}/api/wiki/{wikiLabel}/entry",WikiPageEntry:"/{wikis}/{authType}/api/wiki/{wikiLabel}/page/{pageLabel}/entry",WikiFeed:"/{wikis}/{authType}/api/wiki/{wikiLabel}/feed"})})},
"sbt/connections/WikiService":function(){define("../declare,../config,../lang,../stringUtil,../Promise,./WikiConstants,../base/BaseService,../base/AtomEntity,../base/XmlDataHandler".split(","),function(g,e,c,d,b,a,j,k,i){var b=g(k,{includeLabelInPost:!1,constructor:function(){},createEntryData:function(){var a="",b=function(a){return a};this.getLabel()&&this.includeLabelInPost&&(a+=d.transform("<td:label>${getLabel}</td:label>",this,b,this));this.getPermissions()&&(a+=d.transform("<td:permissions>${getPermissions}</td:permissions>",
this,b,this));if(this.getTags()){var b=this.getTags(),c;for(c in b)a+=d.transform('<category term="${tag}" label="${tag}"></category>',{tag:b[c]})}return d.trim(a)},getTags:function(){this.getAsArray("tags");return this.getAsArray("tags")},setTags:function(a){return this.setAsArray("tags",a)},getUuid:function(){var a=this.getAsString("uuid");return a&&0==a.indexOf("urn:lsid:ibm.com:td:")?a.substring(20):a},setUuid:function(a){return this.setAsString("uuid",a)},getLabel:function(){return this.getAsString("label")},
setLabel:function(a){return this.setAsString("label",a)},getPermissions:function(){return this.getAsString("permissions")},setPermissions:function(a){return this.setAsString("permissions",a)},getModifier:function(){return this.getAsObject(["modifierUserid","modifierName","modifierEmail","modifierUserState"],["userid","name","email","userState"])},getCreated:function(){return this.getAsDate("created")},getModified:function(){return this.getAsDate("modified")}}),q=g(b,{xpath:a.WikiXPath,contentType:"html",
categoryScheme:'<category scheme="http://www.ibm.com/xmlns/prod/sn/type" term="wiki" label="wiki"></category>',constructor:function(){},getCommunityUuid:function(){return this.getAsString("communityUuid")},setCommunityUuid:function(a){return this.setAsString("communityUuid",a)},getThemeName:function(){return this.getAsString("themeName")},getLibrarySize:function(){return this.getAsNumber("librarySize")},getLibraryQuota:function(){return this.getAsNumber("libraryQuota")},getTotalRemovedSize:function(){return this.getAsNumber("totalRemovedSize")},
getPages:function(a){return this.service.getWikiPages(this.getLabel(),a)},load:function(b){var c=this.getLabel(),d=this.service._validateWikiLabel(c);if(d)return d;var e=this,b={method:"GET",handleAs:"text",query:b||{}};return this.service.getEntity(this.service.constructUrl(a.WikiEntry,null,{wikiLabel:encodeURIComponent(c)}),b,c,{createEntity:function(a,b){e.setData(b);return e}})},remove:function(a){return this.service.deleteWiki(this.getLabel(),a)},update:function(a){return this.service.updateWiki(this,
a)},save:function(a){return this.getWikiUuid()?this.service.updateWiki(this,a):this.service.createWiki(this,a)}}),m=g(b,{xpath:a.WikiPageXPath,contentType:"html",categoryScheme:'<category term="page" scheme="tag:ibm.com,2006:td/type" label="page"/>',wikiLabel:null,constructor:function(){},getWikiLabel:function(){if(this.wikiLabel)return this.wikiLabel},setWikiLabel:function(a){this.wikiLabel=a;return this},getLastAccessed:function(){return this.getAsDate("lastAccessed")},getVersionUuid:function(){return this.getAsString("versionUuid")},
getVersionLabel:function(){return this.getAsString("versionLabel")},getPropagation:function(){return this.getAsBoolean("propagation")},getTotalMediaSize:function(){return this.getAsNumber("totalMediaSize")},getRecommendations:function(){return this.getAsNumber("recommendations")},getComments:function(){return this.getAsNumber("comment")},getHits:function(){return this.getAsNumber("hit")},getAnonymousHits:function(){return this.getAsNumber("anonymous_hit")},getShare:function(){return this.getAsNumber("share")},
getCollections:function(){return this.getAsNumber("collections")},getAttachments:function(){return this.getAsNumber("attachments")},getVersions:function(){return this.getAsNumber("versions")},load:function(b){var c=this.getLabel(),d=this.service._validatePageLabel(c);if(d)return d;var e=this.getWikiLabel();if(d=this.service._validateWikiLabel(e))return d;var g=this,b={method:"GET",handleAs:"text",query:b||{}},e={pageLabel:encodeURIComponent(c),wikiLabel:encodeURIComponent(e)};return this.service.getEntity(this.service.constructUrl(a.WikiPageEntry,
null,e),b,c,{createEntity:function(a,b){g.setData(b);return g}})},remove:function(a){return this.service.deleteWikiPage(this.getLabel(),a)},update:function(a){return this.service.updateWikiPage(this,a)},save:function(a){return this.getWikiUuid()?this.service.updateWikiPage(this,a):this.service.createWikiPage(this,a)}}),n={createEntities:function(b,c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.WikiFeedXPath})},createEntity:function(a,b){return new q({service:a,data:b})}},p={createEntities:function(b,
c){return new i({service:b,data:c,namespaces:a.Namespaces,xpath:a.WikiFeedXPath})}};return g(j,{contextRootMap:{wikis:"wikis"},constructor:function(){if(!this.endpoint)this.endpoint=e.findEndpoint(this.getDefaultEndpointName())},getDefaultEndpointName:function(){return"connections"},newWiki:function(a){return this._toWiki(a)},getAllWikis:function(b){return this.getEntities(a.WikisAll,{method:"GET",handleAs:"text",query:b||{}},n)},getPublicWikis:function(b){return this.getEntities(a.WikisPublic,{method:"GET",
handleAs:"text",query:b||{}},n)},getMyWikis:function(b){return this.getEntities(a.WikisMy,{method:"GET",handleAs:"text",query:b||{}},n)},getMostCommentedWikis:function(b){return this.getEntities(a.WikisMostCommented,{method:"GET",handleAs:"text",query:b||{}},n)},getMostRecommendedWikis:function(b){return this.getEntities(a.WikisMostRecommended,{method:"GET",handleAs:"text",query:b||{}},n)},getMostVisitedWikis:function(b){return this.getEntities(a.WikisMostVisited,{method:"GET",handleAs:"text",query:b||
{}},n)},getWikiPages:function(b,d){var e=this._validateWikiLabel(b);if(e)return e;var e={method:"GET",handleAs:"text",query:d||{}},g=c.mixin(p,{createEntity:function(a,c){return new m({service:a,wikiLabel:b,data:c})}});return this.getEntities(this.constructUrl(a.WikiRecycleBin,null,{wikiLabel:encodeURIComponent(b)}),e,g)},getMyWikiPages:function(b,d){var e=this._validateWikiLabel(b);if(e)return e;var e={method:"GET",handleAs:"text",query:d||{}},g=c.mixin(p,{createEntity:function(a,c){return new m({service:a,
wikiLabel:b,data:c})}});return this.getEntities(this.constructUrl(a.WikiMyPages,null,{wikiLabel:encodeURIComponent(b)}),e,g)},getRecycledWikiPages:function(b,d){var e=this._validateWikiLabel(b);if(e)return e;var e={method:"GET",handleAs:"text",query:d||{}},g=c.mixin(p,{createEntity:function(a,c){return new m({service:a,wikiLabelOrId:b,data:c})}});return this.getEntities(this.constructUrl(a.WikiRecycleBin,null,{wikiLabelOrId:encodeURIComponent(b)}),e,g)},getWiki:function(a,b){return(new q({service:this,
_fields:{label:a}})).load(b)},createWiki:function(b,c){var d=this._toWiki(b),e=this._validateWiki(d,!1,c);if(e)return e;e={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(a.WikisAll,e,{createEntity:function(a,b){d.setData(b);return d}},c)},updateWiki:function(b,c){var d=this._toWiki(b),e=this._validateWiki(d,!0,c);if(e)return e;e={method:"PUT",query:c||{},headers:a.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(this.constructUrl(a.WikiEntry,
null,{wikiLabel:encodeURIComponent(d.getLabel())}),e,{createEntity:function(a,b){d.setData(b);return d}},c)},deleteWiki:function(b,c){var d=this._validateWikiLabel(b);if(d)return d;d={method:"DELETE",query:c||{},handleAs:"text"};return this.deleteEntity(this.constructUrl(a.WikiEntry,null,{wikiLabel:encodeURIComponent(b)}),d,b)},getWikiPage:function(a,b,c){return(new m({service:this,wikiLabel:a,_fields:{label:b}})).load(c)},createWikiPage:function(b,c){var d=this._toWikiPage(b),e=this._validateWikiPage(d,
!1,c);if(e)return e;e={method:"POST",query:c||{},headers:a.AtomXmlHeaders,data:d.createPostData()};return this.updateEntity(this.constructUrl(a.WikiFeed,null,{wikiLabel:encodeURIComponent(d.getWikiLabel())}),e,{createEntity:function(a,b){wiki.setData(b);return wiki}},c)},updateWikiPage:function(b,c){var d=this._toWikiPage(b),e=this._validateWikiPage(d,!0,c);if(e)return e;var e={method:"PUT",query:c||{},headers:a.AtomXmlHeaders,data:d.createPostData()},g={pageLabel:encodeURIComponent(d.getLabel()),
wikiLabel:encodeURIComponent(d.getWikiLabel())};return this.updateEntity(this.constructUrl(a.WikiPageEntry,null,g),e,{createEntity:function(a,b){d.setData(b);return d}},c)},deleteWikiPage:function(b,c,d){var e=this._validateWikiLabel(b);if(e||(e=this._validatePageLabel(c)))return e;c={method:"DELETE",query:d||{},handleAs:"text"};d={pageLabel:encodeURIComponent(label),wikiLabel:encodeURIComponent(b)};return this.deleteEntity(this.constructUrl(a.WikiPageEntry,null,d),c,b)},constructUrl:function(a,b,
e){if(!a)throw Error("BaseService.constructUrl: Invalid argument, url is undefined or null.");e=c.mixin({authType:this.endpoint.authType},this.contextRootMap,this.endpoint.serviceMappings,e||{});a=d.replace(a,e);if(b)for(param in b)-1==a.indexOf("?")?a+="?":a.indexOf("&")!=a.length-1&&(a+="&"),(e=encodeURIComponent(b[param]))&&(a+=param+"="+e);return a},_validateWiki:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, wiki with title must be specified.");if(b&&
!a.getLabel())return this.createBadRequestPromise("Invalid argument, wiki with label must be specified.")},_validateWikiPage:function(a,b){if(!a||!a.getTitle())return this.createBadRequestPromise("Invalid argument, wiki page with title must be specified.");if(b&&!a.getLabel())return this.createBadRequestPromise("Invalid argument, wiki page with label must be specified.");if(b&&!a.getWikiLabel())return this.createBadRequestPromise("Invalid argument, wiki page with wiki label must be specified.")},
_validateWikiLabel:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected wiki label.")},_validatePageLabel:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected wiki page label.")},_validateWikiUuid:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected wikiUuid.")},_toWiki:function(a){if(a instanceof q)return a;c.isString(a)&&(a={handle:a});return new q({service:this,_fields:c.mixin({},
a)})},_toWikiPage:function(a){if(a instanceof m)return a;c.isString(a)&&(a={handle:a});return new m({service:this,_fields:c.mixin({},a)})}})})},"sbt/data/AtomReadStore":function(){define("../declare,../config,../lang,../base/core,../xml,../xpath,dojox/html/entities".split(","),function(g,e,c,d,b,a,j){return g(null,{_endpoint:null,_xmlData:null,totalResults:0,startIndex:0,itemsPerPage:5,items:null,url:"",sendQuery:!0,unescapeHTML:!1,urlPreventCache:!1,atom:d.feedXPath,attributes:d.entryXPath,namespaces:d.namespaces,
paramSchema:{},constructor:function(a){this._endpoint=e.findEndpoint(a.endpoint||"connections");if(a&&(this.url=a.url,this.attributes=a.attributes||this.attributes,this.atom=a.feedXPath||this.atom,this.namespaces=a.namespaces||this.namespaces,this.paramSchema=a.paramSchema||this.paramSchema,this.rewriteUrl=a.rewriteUrl,this.label=a.label||this.label,this.sendQuery=a.sendQuery||a.sendquery||this.sendQuery,this.unescapeHTML=a.unescapeHTML,"urlPreventCache"in a))this.urlPreventCache=a.urlPreventCache?
!0:!1;if(!this.url)throw Error("sbt.data.AtomReadStore: A service URL must be specified when creating the data store");},getEndpoint:function(){return this._endpoint},setUrl:function(a){this.url=a},getUrl:function(){return this.url},setAttributes:function(a){this.attributes=a},getValue:function(b,d,e){var g=/^count\(.*\)$/;this._assertIsItem(b);this._assertIsAttribute(d);if(!b._attribs[d]){var n=this.attributes[d];if(c.isFunction(n))b._attribs[d]=n(b,d);else if(n.match(g))b._attribs[d]=a.selectNumber(b.element,
this.attributes[d],this.namespaces)+"";else if((g=a.selectNodes(b.element,this.attributes[d],this.namespaces))&&1==g.length)b._attribs[d]=g[0].text||g[0].textContent;else if(g){b._attribs[d]=[];for(n=0;n<g.length;n++)b._attribs[d].push(g[n].text||g[n].textContent)}else b._attribs[d]=null}if(!b._attribs[d])return e;if("object"==typeof b._attribs[d])for(e=0;e<b._attribs[d].length;e++)b._attribs[d][e]=j.encode(b._attribs[d][e]);else b._attribs[d]=j.encode(b._attribs[d]);return b._attribs[d]},getValues:function(b,
c){this._assertIsItem(b);this._assertIsAttribute(c);if(!b._attribs[c]){for(var d=a.selectNodes(b.element,this.attributes[c],this.namespaces),e=[],g=0;g<d.length;g++)e[g]=d[g].text||d[g].textContent;b._attribs[c]=e}return b._attribs[c]},getAttributes:function(){var a=[],b;for(b in this.attributes)this.attributes.hasOwnProperty(b)&&a.push(b);return a},hasAttribute:function(a,b){return void 0!=this.attributes[b]},containsValue:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");},
isItem:function(a){return a&&a.element&&a.store&&a.store===this?!0:!1},isItemLoaded:function(a){return this.isItem(a)},loadItem:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");},fetch:function(c){var d=this,e=c.scope||d,g=this._getServiceUrl(this._getQuery(c));g?this._endpoint.xhrGet({serviceUrl:g,handleAs:"text",load:function(g){try{d.response=g;d._xmlData=b.parse(g);d.totalResults=parseInt(a.selectText(d._xmlData,d.atom.totalResults,d.namespaces));d.startIndex=parseInt(a.selectText(d._xmlData,
d.atom.startIndex,d.namespaces));d.itemsPerPage=parseInt(a.selectText(d._xmlData,d.atom.itemsPerPage,d.namespaces));d.items=d._createItems(d._xmlData);c.onBegin&&c.onBegin.call(e,d.totalResults,c);if(c.onItem)for(g=0;g<d._entries;g++)c.onItem.call(e,d.entries[g],c);c.onComplete&&c.onComplete.call(e,c.onItem?null:d.items,c)}catch(j){c.onError&&c.onError.call(j)}},error:function(a){c.onError&&c.onError.call(a)}}):c.onError&&c.onError.call(Error("sbt.data.AtomReadStore: No service URL specified."))},
getFeatures:function(){return{"dojo.data.api.Read":!0}},close:function(){throw Error("sbt.data.AtomReadStore: Not implemented yet!");},getLabel:function(a){return this.getValue(a,this.label)},getLabelAttributes:function(){return[this.label]},_getQuery:function(a){var b=a.query||{};b.pageSize=a.count||b.pageSize;b.pageNumber=Math.floor(a.start/a.count)+1;if(a.sort&&a.sort[0])if(a=a.sort[0],b.sortBy=a.attribute,!0===a.descending)b.sortOrder="desc";else if(!1===a.descending)b.sortOrder="asc";return b},
_getServiceUrl:function(a){if(!this.sendQuery||!a)return this.url;if(c.isString(a))return this.url+a;var b="",d=this.paramSchema,e;for(e in a)if(e in d){var g=d[e].format(a[e]);g&&(b+=g+"&")}else b+=e+"="+a[e]+"&";if(!b)return this.url;a=this.url;a=0>a.indexOf("?")?a+"?":a+"&";return a+b},_createItems:function(b){for(var b=a.selectNodes(b,this.atom.entries,this.namespaces),c=[],d=0;d<b.length;d++)c.push(this._createItem(b[d]));return c},_createItem:function(a){var b=this;return{element:a,store:this,
_attribs:{},getValue:function(a){if(b.hasAttribute(this,a))return b.getValue(this,a)}}},_assertIsItem:function(a){if(!this.isItem(a))throw Error("sbt.data.AtomReadStore: Invalid item argument.");},_assertIsAttribute:function(a){if(!this.attributes[a])throw Error("sbt.data.AtomReadStore: Invalid attribute argument.");}})})},"sbt/nls/Endpoint":function(){define({root:{cannot_find_endpoint:"Unable to find endpoint named {0}, creating it now with an error transport."}})},"sbt/nls/ErrorTransport":function(){define({root:{endpoint_not_available:"Required endpoint is not available: {0}"}})},
"sbt/nls/loginForm":function(){define({root:{username:"User name :",password:"Password :",authentication_dialog_title:"Authentication",login_ok:"Log in",login_cancel:"Cancel",wrong_creds_message:"Wrong Credentials"}})},"sbt/nls/messageSSO":function(){define({root:{message_title:"ReAuthenticate",message:"Authentication expired, Please login again.",relogin_button_text:"Re-Login"}})},"sbt/nls/util":function(){define({root:{error_callback:"Error running error callback : {0}",error_console:"Error received. Error Code = {0}. Error Message = {1}"}})},
"sbt/nls/validate":function(){define({root:{error_callback:"Error running error callback : {0}",error_console:"Error received. Error Code = {0}. Error Message = {1}",validate_nullObject:"{0}.{1} : Null argument provided for {2}. Expected type is {3}",validate_expectedType:"{0}.{1} : {2} argument type does not match expected type {3} for {4}"}})},"sbt/smartcloud/ProfileConstants":function(){define(["../lang"],function(g){return g.mixin({},{DefaultCacheSize:10,GetProfile:"/lotuslive-shindig-server/social/rest/people/@me/@self",
GetMyConnections:"/lotuslive-shindig-server/social/rest/people/@me/@friends",GetUserIdentity:"/manage/oauth/getUserIdentity",GetContactByGUID:"/lotuslive-shindig-server/social/rest/people/lotuslive:contact:{idToBeReplaced}/@self",GetProfileByGUID:"/lotuslive-shindig-server/social/rest/people/lotuslive:user:{idToBeReplaced}/@self",GetMyContacts:"/lotuslive-shindig-server/social/rest/people/@me/@all",ProfileJsonPath:{thumbnailUrl:"$..photo",address:"$..address",department:"$..name",jobTitle:"$..jobtitle",
telephone:"$..telephone",about:"$..aboutMe",id:"$..id",objectId:"$..objectId",displayName:"$..displayName",emailAddress:"$..emailAddress",profileUrl:"$..profileUrl",country:"$..country",orgId:"$..orgId",org:"$..org.name",global:"$..",firstElement:"$[0]",totalResults:"totalResults",startIndex:"startIndex",itemsPerPage:"itemsPerPage"}})})},"sbt/smartcloud/ProfileService":function(){define("../declare,../lang,../config,../stringUtil,../Cache,./Subscriber,../Jsonpath,../base/BaseService,../base/JsonDataHandler,./ProfileConstants,../base/BaseEntity,../Promise".split(","),
function(g,e,c,d,b,a,j,k,i,q,m,n){var p=g(m,{constructor:function(){},load:function(a){var b=this.getId(),c=this.service._validateProfileId(b);if(c)return c;c={};c.userid=b;e.mixin(c,a||{format:"json"});return this.service.getEntity(consts.GetProfile,{handleAs:"json",query:c},b,{createEntity:function(a,b){return new i({data:b,jsonpath:q.ProfileJsonPath})}},a)},getId:function(){return this.getAsString("id")},getObjectId:function(){return this.getAsString("objectId")},getDisplayName:function(){return this.getAsString("displayName")},
getEmail:function(){return this.getAsString("emailAddress")},getThumbnailUrl:function(){var a=this.getAsString("thumbnailUrl");a&&(a=this.service.endpoint.baseUrl+"/contacts/img/photos/"+a);return a},getAddress:function(){var a=this.getAsArray("address");return a=this.dataHandler.extractFirstElement(a)},getDepartment:function(){return this.getAsString("department")},getJobTitle:function(){return this.getAsString("jobTitle")},getProfileUrl:function(){return this.getAsString("profileUrl")},getTelephoneNumber:function(){return this.getAsString("telephone")},
getCountry:function(){return this.getAsString("country")},getOrgId:function(){return this.getAsString("orgId")},getOrg:function(){return this.getAsString("org")},getAbout:function(){return this.getAsString("about")}}),f={createEntity:function(a,b){var c=new i({data:b,jsonpath:q.ProfileJsonPath});return new p({service:a,id:c.getEntityId(),dataHandler:c})}},t={createEntities:function(a,b){return new i({data:b,jsonpath:q.ProfileJsonPath})},createEntity:function(a,b){var c=new i({data:b,jsonpath:q.ProfileJsonPath});
return new p({service:a,id:c.getEntityId(),dataHandler:c})}};return g(k,{_profiles:null,constructor:function(){if(!this.endpoint)this.endpoint=c.findEndpoint(this.getDefaultEndpointName());if(!this._cache&&(c.Properties.ProfileCacheSize||q.DefaultCacheSize))this._cache=new b(c.Properties.ProfileCacheSize||q.DefaultCacheSize)},getDefaultEndpointName:function(){return"smartcloud"},getProfile:function(a,b){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;e.mixin(c,b||{format:"json"});
d={method:"GET",handleAs:"json",query:b||{format:"json"}};c=encodeURIComponent(c.userid);return this.getEntity(this.constructUrl(q.GetProfileByGUID,{},{idToBeReplaced:c}),d,c,this.getProfileCallbacks())},getProfileByGUID:function(a,b){return this.getProfile(a,b)},getMyProfile:function(a){var b=this,c=q.GetUserIdentity,d=new n;this.endpoint.request(c,{handleAs:"json"}).then(function(c){var f=b._toIdObject(c.subscriberid);if(c=b._validateIdObject(f))return c;var c={method:"GET",handleAs:"json",query:e.mixin(f,
a||{format:"json"})},f=encodeURIComponent(f.userid),g=b.constructUrl(q.GetProfileByGUID,{},{idToBeReplaced:f});b.getEntity(g,c,f,b.getProfileCallbacks()).then(function(a){d.fulfilled(a)},function(a){d.rejected(a)})},function(a){d.rejected(a)});return d},getContact:function(a,b){var c=this._toIdObject(a),d=this._validateIdObject(c);if(d)return d;d={method:"GET",handleAs:"json",query:e.mixin(c,b||{format:"json"})};c=c.userid;return this.getEntity(this.constructUrl(q.GetContactByGUID,{},{idToBeReplaced:c}),
d,c,this.getProfileCallbacks())},getContactByGUID:function(a,b){return this.getContact(a,b)},getMyConnections:function(a){return this.getEntities(q.GetMyConnections,{method:"GET",handleAs:"json",query:a||{format:"json"}},this.getProfileFeedCallbacks())},getMyContacts:function(a){return this.getEntities(q.GetMyContacts,{method:"GET",handleAs:"json",query:a||{format:"json"}},this.getProfileFeedCallbacks())},getMyContactsByIndex:function(a,b,c){a={method:"GET",handleAs:"json",query:e.mixin({startIndex:a,
count:b},c||{format:"json"})};return this.getEntities(q.GetMyContacts,a,this.getProfileFeedCallbacks())},getProfileCallbacks:function(){return f},getProfileFeedCallbacks:function(){return t},_toIdObject:function(a){var b={};if(e.isString(a))b.userid=a;else if(a instanceof p)b.userid=a.getUserid();return b},_validateIdObject:function(a){if(!a.userid)return this.createBadRequestPromise("Invalid argument, userid must be specified.")},_validateProfileId:function(a){if(!a||0==a.length)return this.createBadRequestPromise("Invalid argument, expected userid")}})})},
"sbt/smartcloud/Subscriber":function(){define(["../declare","../Endpoint"],function(g){return g(null,{endpoint:null,constructor:function(e,c){this.endpoint=e;c&&this.load(c)},load:function(e){var c=this;this.endpoint.xhrGet({serviceUrl:"/manage/oauth/getUserIdentity",loginUi:this.endpoint.loginUi,handleAs:"json",load:function(d){e(c,d)},error:function(){e(c,null);console.log("Error fetching feed for getUserIdentity")}})},getSubscriberId:function(e){return e&&e.subscriberid?e.subscriberid:null}})})},
"sbt/store/AtomStore":function(){define("../declare,../config,../lang,../base/core,../xml,../xpath,../itemFactory,dojo/_base/Deferred,dojo/promise/Promise,dojo/store/util/QueryResults,dojox/html/entities".split(","),function(g,e,c,d,b,a,j,k,i,q,m){var n=g(i,{_store:null,_isRejected:!1,_isFulfilled:!1,_isCancelled:!1,_callbacks:[],_errbacks:[],_endpoint:null,_xmlData:null,totalResults:null,startIndex:0,itemsPerPage:5,items:null,url:"",sendQuery:!0,unescapeHTML:!1,atom:d.feedXPath,attributes:d.entryXPath,
namespaces:d.namespaces,paramSchema:{},constructor:function(a,b,c){this._endpoint=e.findEndpoint(a.endpoint||"connections");this._options=c;this._callbacks=[];this._errbacks=[];if(a)this.url=a.url,this.attributes=a.attributes||this.attributes,this.atom=a.feedXPath||this.atom,this.namespaces=a.namespaces||this.namespaces,this.sendQuery=a.hasOwnProperty("sendQuery")?a.sendQuery:this.sendQuery,this.unescapeHTML=a.unescapeHTML||this.unescapeHTML,this.paramSchema=a.paramSchema||this.paramSchema;if(this.paramSchema.pageNumber)a=
Math.floor(c.start/c.count)+1,b.pageNumber=b.pageNumber||a;if(this.paramSchema.startIndex)b.startIndex=b.startIndex||c.start;if(this.paramSchema.pageSize)b.pageSize=b.pageSize||c.count;if(c.sort&&c.sort[0]){if(c.sort[0].attribute)b.sortBy=c.sort[0].attribute;if(!0===c.sort[0].descending)b.sortOrder="desc";else if(!1===c.sort[0].descending)b.sortOrder="asc"}this._doFetch({query:b})},then:function(a,b){this._isFulfilled?a(this.items):(a&&this._callbacks.push(a),b&&this._errbacks.push(b))},cancel:function(){this._isCancelled=
!0},isResolved:function(){return this._isRejected||this._isFulfilled},isRejected:function(){return this._isRejected},isFulfilled:function(){return this._isFulfilled},isCanceled:function(){return this._isCancelled},_doFetch:function(c){var d=this,e=this._getServiceUrl(c.query);e?this._endpoint.xhrGet({serviceUrl:e,handleAs:"text",load:function(c){try{d.response=c,d._xmlData=b.parse(c),d.totalResults=parseInt(a.selectText(d._xmlData,d.atom.totalResults,d.namespaces)),d.startIndex=parseInt(a.selectText(d._xmlData,
d.atom.startIndex,d.namespaces)),d.itemsPerPage=parseInt(a.selectText(d._xmlData,d.atom.itemsPerPage,d.namespaces)),d.items=d._createItems(d._xmlData),d._options.onComplete&&d._options.onComplete.call(d._options.scope||d,d.items,d._options),d._fulfilled(d.totalResults)}catch(e){d._rejected(e)}},error:function(a){d._rejected(a)}}):c.onError&&c.onError.call(Error("sbt.store.AtomStore: No service URL specified."))},_getServiceUrl:function(a){if(!this.sendQuery||!a)return this.url;if(c.isString(a))return this.url+
(~this.url.indexOf("?")?"&":"?")+a;var b=[],d=this.paramSchema,e;for(e in a)if(e in d){var g=d[e].format(a[e]);g&&b.push(g)}else b.push(encodeURIComponent(e)+"="+encodeURIComponent(a[e]));return 0==b.length?this.url:this.url+(~this.url.indexOf("?")?"&":"?")+b.join("&")},_createQuery:function(a){if(!a)return null;var b=[],c;for(c in a){var d=a[c];b.push(encodeURIComponent(c)+"="+encodeURIComponent(d))}return b.join("&")},_createItems:function(b){for(var b=a.selectNodes(b,this.atom.entries,this.namespaces),
c=[],d=0;d<b.length;d++)c.push(this._createItem(b[d]));return c},_createItem:function(b){for(var d=this._getAttributes(),e=/^count\(.*\)$/,g={element:b,getValue:function(a){var b=[];if("object"==typeof this[a])for(var c=0;c<this[a].length;c++)b[c]=m.encode(this[a][c]);else b=m.encode(this[a]);return b}},i=0;i<d.length;i++){var j=d[i],h=this.attributes[j];if(c.isFunction(h))g[j]=h(this,g);else if(h.match(e))g[j]=a.selectNumber(b,h,this.namespaces)+"";else if((h=a.selectNodes(b,h,this.namespaces))&&
1==h.length)g[j]=h[0].text||h[0].textContent;else if(h){g[j]=[];for(var k=0;k<h.length;k++)g[j].push(h[k].text||h[k].textContent)}else g[j]=null}return g},_getAttributes:function(){var a=[],b;for(b in this.attributes)this.attributes.hasOwnProperty(b)&&a.push(b);return a},_fulfilled:function(a){if(!this._isCancelled)for(this._isFulfilled=!0;0<this._callbacks.length;)this._callbacks.shift()(a)},_rejected:function(a){if(!this._isCancelled)for(this._isRejected=!0;0<this._errbacks.length;)this._errbacks.shift()(a)}});
return g(null,{idProperty:"id",_args:null,constructor:function(a){this._args=a},getEndpoint:function(){return e.findEndpoint(this._args.endpoint||"connections")},get:function(){throw Error("sbt.store.AtomStore: Not implemented yet!");},getIdentity:function(a){return a.id},setUrl:function(a){this._args.url=a},getUrl:function(){return this._args.url},setAttributes:function(a){this._args.attributes=a},query:function(a,b){var c=new n(this._args,a,b);c.total=c;return q(c)}})})},"sbt/store/parameter":function(){define(["../stringUtil",
"../config"],function(){var g={defaultFormat:function(c,d){return c.key+"="+d},sortField:function(c){return function(d,b){return d.key+"="+(c[b]||"")}},ascSortOrderBoolean:function(c,d){return c.key+"="+("asc"===d?!0:!1)},sortOrder:function(c,d){return c.key+"="+("asc"===d?"desc":"asc")},oneBasedInteger:function(c,d){var b=Math.floor(d);1>b&&(b=1);return c.key+"="+b},zeroBaseInteger:function(c,d){var b=Math.floor(d);0>b&&(b=0);return c.key+"="+b}},e=function(c){var d=this;this.key=c.key;var b=c.format||
g.defaultFormat;this.format=function(a){return b(d,a)}};return{defaultFormat:function(c){return new e({key:c,format:g.defaultFormat})},sortField:function(c,d){return new e({key:c,format:g.sortField(d)})},sortOrder:function(c){return new e({key:c,format:g.sortOrder})},booleanSortOrder:function(c){return new e({key:c,format:g.ascSortOrderBoolean})},zeroBasedInteger:function(c){return new e({key:c,format:g.zeroBasedInteger})},oneBasedInteger:function(c){return new e({key:c,format:g.oneBasedInteger})}}})},
"sbt/_bridge/ui/BasicAuth_Dialog":function(){define("dijit/Dialog,dojo/cache,sbt/i18n!sbt/nls/loginForm,sbt/config,dojo/on,sbt/dom".split(","),function(g,e,c,d,b,a){return{show:function(j,k){try{var i=j.proxy.proxyUrl,q=i.substring(0,i.lastIndexOf("/"))+"/basicAuth/"+j.proxyPath+"/JSApp",m=new g({title:c.authentication_dialog_title,style:"width: 350px",content:e("sbt",k),submitOnClickHandle:function(a){""==a.username.value||""==a.password.value?dojo.style(dojo.byId("wrongCredsMessage"),"display",
"block"):j.transport.xhr("POST",{url:q,content:{username:a.username.value,password:a.password.value},handle:function(a){if(a instanceof Error&&(a=a.status||a.response.status,401==a||403==a)){dojo.style(dojo.byId("wrongCredsMessage"),"display","block");return}m.hide();delete d.dialog;j.callback()}},!0)}})}catch(n){console.log("error in BasicAuth_Dialog "+n)}d.dialog=m;b(a.byId("basicLoginFormOK"),"click",function(){d.dialog.submitOnClickHandle(a.byId("ibmsbt.loginActionForm"))});b(dojo.byId("basicLoginFormCancel"),
"click",function(){d.dialog.hide(a.byId("ibmsbt.loginActionForm"));d.cancel&&d.cancel();delete d.dialog});m.show()}}})},"sbt/_bridge/ui/OAuth10_Dialog":function(){define(["dijit/Dialog"],function(g){return{show:function(e){(new g({title:"Authentication",content:"<iframe src='"+(e+"?loginUi=dialog")+"' style='width: 650px; height=700px'></iframe>",style:"width: 650px; height=700px"})).show()}}})},"sbt/_bridge/ui/SSO_Dialog":function(){define(["dijit/Dialog","dojo/cache","sbt/config","dojo/on","sbt/dom"],
function(g,e,c,d,b){return{show:function(a,j,k){try{var i=new g({title:k.message_title,content:e("sbt",j),onRelogin:function(){i.hide();location.reload()}})}catch(q){console.log("error in SSO_Dialog "+q)}c.dialog=i;d(b.byId("ssoLoginFormOK"),"click",function(){c.dialog.onRelogin()});i.show()}}})},"sbt/authenticator/nls/SSO":function(){define({root:{message_title:"ReAuthenticate",message:"Authentication expired, Please login again."}})},"sbt/authenticator/templates/login":function(){},"sbt/authenticator/templates/messageSSO":function(){},
"sbt/connections/nls/CommunityService":function(){define({root:{invalid_argument:"Invalid Argument"}})},"sbt/connections/nls/ConnectionsService":function(){define({root:{invalid_argument:"Invalid Argument"}})},"sbt/connections/nls/ProfileService":function(){define({root:{invalid_argument:"Invalid Argument"}})}}});define([],1);