/*  (c) Copyright IBM Corp. 2010 - Licensed under the Apache License, Version 2.0 */

window.CodeMirror=(function(){"use strict";var _1=/gecko\/\d/i.test(navigator.userAgent);var ie=/MSIE \d/.test(navigator.userAgent);var _2=/MSIE [1-7]\b/.test(navigator.userAgent);var _3=/MSIE [1-8]\b/.test(navigator.userAgent);var _4=/WebKit\//.test(navigator.userAgent);var _5=_4&&/Qt\/\d+\.\d+/.test(navigator.userAgent);var _6=/Chrome\//.test(navigator.userAgent);var _7=/Opera\//.test(navigator.userAgent);var _8=/Apple Computer/.test(navigator.vendor);var _9=/KHTML\//.test(navigator.userAgent);var _a=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent);var _b=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent);var _c=/PhantomJS/.test(navigator.userAgent);var _d=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent);var _e=_d||/Android|webOS|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent);var _f=_d||/Mac/.test(navigator.platform);var _10=false,_11=false;function _12(_13,_14){if(!(this instanceof _12)){return new _12(_13,_14);}this.options=_14=_14||{};for(var opt in _15){if(!_14.hasOwnProperty(opt)&&_15.hasOwnProperty(opt)){_14[opt]=_15[opt];}}_16(_14);var _17=this.display=_18(_13);_17.wrapper.CodeMirror=this;_19(this);if(_14.autofocus&&!_e){_1a(this);}this.view=_1b(new _1c([new _1d([_1e("",null,_1f(_17))])]));this.nextOpId=0;_20(this);_21(this);if(_14.lineWrapping){this.display.wrapper.className+=" CodeMirror-wrap";}this.setValue(_14.value||"");if(ie){setTimeout(_22(_23,this,true),20);}this.view.history=_24();_25(this);var _26;try{_26=(document.activeElement==_17.input);}catch(e){}if(_26||(_14.autofocus&&!_e)){setTimeout(_22(_27,this),20);}else{_28(this);}_29(this,function(){for(var opt in _2a){if(_2a.propertyIsEnumerable(opt)){_2a[opt](this,_14[opt],_2b);}}for(var i=0;i<_2c.length;++i){_2c[i](this);}})();};function _18(_2d){var d={};var _2e=d.input=elt("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none;");_2e.setAttribute("wrap","off");_2e.setAttribute("autocorrect","off");_2e.setAttribute("autocapitalize","off");d.inputDiv=elt("div",[_2e],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");d.scrollbarH=elt("div",[elt("div",null,null,"height: 1px")],"CodeMirror-hscrollbar");d.scrollbarV=elt("div",[elt("div",null,null,"width: 1px")],"CodeMirror-vscrollbar");d.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler");d.lineDiv=elt("div");d.selectionDiv=elt("div",null,null,"position: relative; z-index: 1");d.cursor=elt("pre"," ","CodeMirror-cursor");d.otherCursor=elt("pre"," ","CodeMirror-cursor CodeMirror-secondarycursor");d.measure=elt("div",null,"CodeMirror-measure");d.lineSpace=elt("div",[d.measure,d.selectionDiv,d.lineDiv,d.cursor,d.otherCursor],null,"position: relative; outline: none");d.mover=elt("div",[elt("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative");d.sizer=elt("div",[d.mover],"CodeMirror-sizer");d.heightForcer=elt("div"," ",null,"position: absolute; height: "+_2f+"px");d.gutters=elt("div",null,"CodeMirror-gutters");d.lineGutter=null;var _30=elt("div",[d.sizer,d.heightForcer,d.gutters],null,"position: relative; min-height: 100%");d.scroller=elt("div",[_30],"CodeMirror-scroll");d.scroller.setAttribute("tabIndex","-1");d.wrapper=elt("div",[d.inputDiv,d.scrollbarH,d.scrollbarV,d.scrollbarFiller,d.scroller],"CodeMirror");if(_2){d.gutters.style.zIndex=-1;d.scroller.style.paddingRight=0;}if(_2d.appendChild){_2d.appendChild(d.wrapper);}else{_2d(d.wrapper);}if(_d){_2e.style.width="0px";}if(!_4){d.scroller.draggable=true;}if(_9){d.inputDiv.style.height="1px";d.inputDiv.style.position="absolute";}else{if(_2){d.scrollbarH.style.minWidth=d.scrollbarV.style.minWidth="18px";}}d.viewOffset=d.showingFrom=d.showingTo=d.lastSizeC=0;d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null;d.prevInput="";d.alignWidgets=false;d.pollingFast=false;d.poll=new _31();d.draggingText=false;d.cachedCharWidth=d.cachedTextHeight=null;d.measureLineCache=[];d.measureLineCachePos=0;d.inaccurateSelection=false;d.pasteIncoming=false;return d;};function _1b(doc){var _32={line:0,ch:0};return {doc:doc,frontier:0,highlight:new _31(),sel:{from:_32,to:_32,head:_32,anchor:_32,shift:false,extend:false},scrollTop:0,scrollLeft:0,overwrite:false,focused:false,maxLine:_33(doc,0),maxLineLength:0,maxLineChanged:false,suppressEdits:false,goalColumn:null,cantEdit:false,keyMaps:[]};};function _20(cm){var doc=cm.view.doc;cm.view.mode=_12.getMode(cm.options,cm.options.mode);doc.iter(0,doc.size,function(_34){_34.stateAfter=null;});cm.view.frontier=0;_35(cm,100);};function _36(cm){var doc=cm.view.doc,th=_1f(cm.display);if(cm.options.lineWrapping){cm.display.wrapper.className+=" CodeMirror-wrap";var _37=cm.display.scroller.clientWidth/_38(cm.display)-3;doc.iter(0,doc.size,function(_39){if(_39.height==0){return;}var _3a=Math.ceil(_39.text.length/_37)||1;if(_3a!=1){_8a(_39,_3a*th);}});cm.display.sizer.style.minWidth="";}else{cm.display.wrapper.className=cm.display.wrapper.className.replace(" CodeMirror-wrap","");_4e(cm.view);doc.iter(0,doc.size,function(_3b){if(_3b.height!=0){_8a(_3b,th);}});}_e3(cm,0,doc.size);_40(cm);setTimeout(function(){_3c(cm.display,cm.view.doc.height);},100);};function _3d(cm){var _3e=_3f[cm.options.keyMap].style;cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(_3e?" cm-keymap-"+_3e:"");};function _21(cm){cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+cm.options.theme.replace(/(^|\s)\s*/g," cm-s-");_40(cm);};function _41(cm){_19(cm);_42(cm,true);};function _19(cm){var _43=cm.display.gutters,_44=cm.options.gutters;_45(_43);for(var i=0;i<_44.length;++i){var _46=_44[i];var _47=_43.appendChild(elt("div",null,"CodeMirror-gutter "+_46));if(_46=="CodeMirror-linenumbers"){cm.display.lineGutter=_47;_47.style.width=(cm.display.lineNumWidth||1)+"px";}}_43.style.display=i?"":"none";};function _48(doc,_49){if(_49.height==0){return 0;}var len=_49.text.length,_4a,cur=_49;while(_4a=_4b(cur)){var _4c=_4a.find();cur=_33(doc,_4c.from.line);len+=_4c.from.ch-_4c.to.ch;}cur=_49;while(_4a=_4d(cur)){var _4c=_4a.find();len-=cur.text.length-_4c.from.ch;cur=_33(doc,_4c.to.line);len+=cur.text.length-_4c.to.ch;}return len;};function _4e(_4f){_4f.maxLine=_33(_4f.doc,0);_4f.maxLineLength=_48(_4f.doc,_4f.maxLine);_4f.maxLineChanged=true;_4f.doc.iter(1,_4f.doc.size,function(_50){var len=_48(_4f.doc,_50);if(len>_4f.maxLineLength){_4f.maxLineLength=len;_4f.maxLine=_50;}});};function _16(_51){var _52=false;for(var i=0;i<_51.gutters.length;++i){if(_51.gutters[i]=="CodeMirror-linenumbers"){if(_51.lineNumbers){_52=true;}else{_51.gutters.splice(i--,1);}}}if(!_52&&_51.lineNumbers){_51.gutters.push("CodeMirror-linenumbers");}};function _3c(d,_53){var _54=_53+2*_55(d);d.sizer.style.minHeight=d.heightForcer.style.top=_54+"px";var _56=Math.max(_54,d.scroller.scrollHeight);var _57=d.scroller.scrollWidth>d.scroller.clientWidth;var _58=_56>d.scroller.clientHeight;if(_58){d.scrollbarV.style.display="block";d.scrollbarV.style.bottom=_57?_59(d.measure)+"px":"0";d.scrollbarV.firstChild.style.height=(_56-d.scroller.clientHeight+d.scrollbarV.clientHeight)+"px";}else{d.scrollbarV.style.display="";}if(_57){d.scrollbarH.style.display="block";d.scrollbarH.style.right=_58?_59(d.measure)+"px":"0";d.scrollbarH.firstChild.style.width=(d.scroller.scrollWidth-d.scroller.clientWidth+d.scrollbarH.clientWidth)+"px";}else{d.scrollbarH.style.display="";}if(_57&&_58){d.scrollbarFiller.style.display="block";d.scrollbarFiller.style.height=d.scrollbarFiller.style.width=_59(d.measure)+"px";}else{d.scrollbarFiller.style.display="";}if(_a&&_59(d.measure)===0){d.scrollbarV.style.minWidth=d.scrollbarH.style.minHeight=_b?"18px":"12px";}};function _5a(_5b,doc,_5c){var top=_5b.scroller.scrollTop,_5d=_5b.wrapper.clientHeight;if(typeof _5c=="number"){top=_5c;}else{if(_5c){top=_5c.top;_5d=_5c.bottom-_5c.top;}}top=Math.floor(top-_55(_5b));var _5e=Math.ceil(top+_5d);return {from:_5f(doc,top),to:_5f(doc,_5e)};};function _60(cm){var _61=cm.display;if(!_61.alignWidgets&&!_61.gutters.firstChild){return;}var _62=_63(_61)-_61.scroller.scrollLeft+cm.view.scrollLeft;var _64=_61.gutters.offsetWidth,l=_62+"px";for(var n=_61.lineDiv.firstChild;n;n=n.nextSibling){if(n.alignable){for(var i=0,a=n.alignable;i<a.length;++i){a[i].style.left=l;}}}_61.gutters.style.left=(_62+_64)+"px";};function _65(cm){if(!cm.options.lineNumbers){return false;}var doc=cm.view.doc,_66=_67(cm.options,doc.size-1),_68=cm.display;if(_66.length!=_68.lineNumChars){var _69=_68.measure.appendChild(elt("div",[elt("div",_66)],"CodeMirror-linenumber CodeMirror-gutter-elt"));var _6a=_69.firstChild.offsetWidth,_6b=_69.offsetWidth-_6a;_68.lineGutter.style.width="";_68.lineNumInnerWidth=Math.max(_6a,_68.lineGutter.offsetWidth-_6b);_68.lineNumWidth=_68.lineNumInnerWidth+_6b;_68.lineNumChars=_68.lineNumInnerWidth?_66.length:-1;_68.lineGutter.style.width=_68.lineNumWidth+"px";return true;}return false;};function _67(_6c,i){return String(_6c.lineNumberFormatter(i+_6c.firstLineNumber));};function _63(_6d){return _6d.scroller.getBoundingClientRect().left-_6d.sizer.getBoundingClientRect().left;};function _42(cm,_6e,_6f){var _70=cm.display.showingFrom,_71=cm.display.showingTo;var _72=_73(cm,_6e,_6f);if(_72){_74(cm,cm,"update",cm);if(cm.display.showingFrom!=_70||cm.display.showingTo!=_71){_74(cm,cm,"viewportChange",cm,cm.display.showingFrom,cm.display.showingTo);}}_75(cm);_3c(cm.display,cm.view.doc.height);return _72;};function _73(cm,_76,_77){var _78=cm.display,doc=cm.view.doc;if(!_78.wrapper.clientWidth){_78.showingFrom=_78.showingTo=_78.viewOffset=0;return;}var _79=_5a(_78,doc,_77);if(_76!==true&&_76.length==0&&_79.from>_78.showingFrom&&_79.to<_78.showingTo){return;}if(_76&&_65(cm)){_76=true;}_78.sizer.style.marginLeft=_78.scrollbarH.style.left=_78.gutters.offsetWidth+"px";if(_76!==true&&_11){for(var i=0;i<_76.length;++i){var ch=_76[i],_7a;while(_7a=_4b(_33(doc,ch.from))){var _7b=_7a.find().from.line;if(ch.diff){ch.diff-=ch.from-_7b;}ch.from=_7b;}}}var _7c=_76===true?0:Infinity;if(cm.options.lineNumbers&&_76&&_76!==true){for(var i=0;i<_76.length;++i){if(_76[i].diff){_7c=_76[i].from;break;}}}var _7b=Math.max(_79.from-cm.options.viewportMargin,0);var to=Math.min(doc.size,_79.to+cm.options.viewportMargin);if(_78.showingFrom<_7b&&_7b-_78.showingFrom<20){_7b=_78.showingFrom;}if(_78.showingTo>to&&_78.showingTo-to<20){to=Math.min(doc.size,_78.showingTo);}if(_11){_7b=_7d(_7e(doc,_33(doc,_7b)));while(to<doc.size&&_7f(_33(doc,to))){++to;}}var _80=_76===true?[]:_81([{from:_78.showingFrom,to:_78.showingTo}],_76);var _82=0;for(var i=0;i<_80.length;++i){var _83=_80[i];if(_83.from<_7b){_83.from=_7b;}if(_83.to>to){_83.to=to;}if(_83.from>=_83.to){_80.splice(i--,1);}else{_82+=_83.to-_83.from;}}if(_82==to-_7b&&_7b==_78.showingFrom&&to==_78.showingTo){return;}_80.sort(function(a,b){return a.from-b.from;});if(_82<(to-_7b)*0.7){_78.lineDiv.style.display="none";}_84(cm,_7b,to,_80,_7c);_78.lineDiv.style.display="";var _85=_7b!=_78.showingFrom||to!=_78.showingTo||_78.lastSizeC!=_78.wrapper.clientHeight;if(_85){_78.lastSizeC=_78.wrapper.clientHeight;}_78.showingFrom=_7b;_78.showingTo=to;_35(cm,100);var _86=_78.lineDiv.offsetTop;for(var _87=_78.lineDiv.firstChild,_88;_87;_87=_87.nextSibling){if(_87.lineObj){if(_2){var bot=_87.offsetTop+_87.offsetHeight;_88=bot-_86;_86=bot;}else{var box=_87.getBoundingClientRect();_88=box.bottom-box.top;}var _89=_87.lineObj.height-_88;if(_88<2){_88=_1f(_78);}if(_89>0.001||_89<-0.001){_8a(_87.lineObj,_88);}}}_78.viewOffset=_8b(cm,_33(doc,_7b));_78.mover.style.top=_78.viewOffset+"px";return true;};function _81(_8c,_8d){for(var i=0,l=_8d.length||0;i<l;++i){var _8e=_8d[i],_8f=[],_90=_8e.diff||0;for(var j=0,l2=_8c.length;j<l2;++j){var _91=_8c[j];if(_8e.to<=_91.from&&_8e.diff){_8f.push({from:_91.from+_90,to:_91.to+_90});}else{if(_8e.to<=_91.from||_8e.from>=_91.to){_8f.push(_91);}else{if(_8e.from>_91.from){_8f.push({from:_91.from,to:_8e.from});}if(_8e.to<_91.to){_8f.push({from:_8e.to+_90,to:_91.to+_90});}}}}_8c=_8f;}return _8c;};function _92(cm){var d=cm.display,_93={},_94={};for(var n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i){_93[cm.options.gutters[i]]=n.offsetLeft;_94[cm.options.gutters[i]]=n.offsetWidth;}return {fixedPos:_63(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:_93,gutterWidth:_94,wrapperWidth:d.wrapper.clientWidth};};function _84(cm,_95,to,_96,_97){var _98=_92(cm);var _99=cm.display,_9a=cm.options.lineNumbers;if(!_96.length&&!ie&&(!_4||!cm.display.currentWheelTarget)){_45(_99.lineDiv);}var _9b=_99.lineDiv,cur=_9b.firstChild;function rm(_9c){var _9d=_9c.nextSibling;if(_4&&_f&&cm.display.currentWheelTarget==_9c){_9c.style.display="none";_9c.lineObj=null;}else{_9b.removeChild(_9c);}return _9d;};var _9e=_96.shift(),_7d=_95;cm.view.doc.iter(_95,to,function(_9f){if(_9e&&_9e.to==_7d){_9e=_96.shift();}if(_7f(_9f)){if(_9f.height!=0){_8a(_9f,0);}}else{if(_9e&&_9e.from<=_7d&&_9e.to>_7d){while(cur.lineObj!=_9f){cur=rm(cur);}if(_9a&&_97<=_7d&&cur.lineNumber){_a0(cur.lineNumber,_67(cm.options,_7d));}cur=cur.nextSibling;}else{var _a1=_a2(cm,_9f,_7d,_98);_9b.insertBefore(_a1,cur);_a1.lineObj=_9f;}}++_7d;});while(cur){cur=rm(cur);}};function _a2(cm,_a3,_a4,_a5){var _a6=_a7(cm,_a3);var _a8=_a3.gutterMarkers,_a9=cm.display;if(!cm.options.lineNumbers&&!_a8&&!_a3.bgClass&&!_a3.wrapClass&&(!_a3.widgets||!_a3.widgets.length)){return _a6;}var _aa=elt("div",null,_a3.wrapClass,"position: relative");if(cm.options.lineNumbers||_a8){var _ab=_aa.appendChild(elt("div",null,null,"position: absolute; left: "+_a5.fixedPos+"px"));_aa.alignable=[_ab];if(cm.options.lineNumbers&&(!_a8||!_a8["CodeMirror-linenumbers"])){_aa.lineNumber=_ab.appendChild(elt("div",_67(cm.options,_a4),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+_a5.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+_a9.lineNumInnerWidth+"px"));}if(_a8){for(var k=0;k<cm.options.gutters.length;++k){var id=cm.options.gutters[k],_ac=_a8.hasOwnProperty(id)&&_a8[id];if(_ac){_ab.appendChild(elt("div",[_ac],"CodeMirror-gutter-elt","left: "+_a5.gutterLeft[id]+"px; width: "+_a5.gutterWidth[id]+"px"));}}}}if(_a3.bgClass){_aa.appendChild(elt("div"," ",_a3.bgClass+" CodeMirror-linebackground"));}_aa.appendChild(_a6);if(_a3.widgets){for(var i=0,ws=_a3.widgets;i<ws.length;++i){var _ad=ws[i],_ae=elt("div",[_ad.node],"CodeMirror-linewidget");_ae.widget=_ad;if(_ad.noHScroll){(_aa.alignable||(_aa.alignable=[])).push(_ae);var _af=_a5.wrapperWidth;_ae.style.left=_a5.fixedPos+"px";if(!_ad.coverGutter){_af-=_a5.gutterTotalWidth;_ae.style.paddingLeft=_a5.gutterTotalWidth+"px";}_ae.style.width=_af+"px";}if(_ad.coverGutter){_ae.style.zIndex=5;_ae.style.position="relative";if(!_ad.noHScroll){_ae.style.marginLeft=-_a5.gutterTotalWidth+"px";}}if(_ad.above){_aa.insertBefore(_ae,cm.options.lineNumbers&&_a3.height!=0?_ab:_a6);}else{_aa.appendChild(_ae);}}}if(_2){_aa.style.zIndex=2;}return _aa;};function _75(cm){var _b0=cm.display;var _b1=_b2(cm.view.sel.from,cm.view.sel.to);if(_b1||cm.options.showCursorWhenSelecting){_b3(cm);}else{_b0.cursor.style.display=_b0.otherCursor.style.display="none";}if(!_b1){_b4(cm);}else{_b0.selectionDiv.style.display="none";}var _b5=_b6(cm,cm.view.sel.head,"div");var _b7=_b0.wrapper.getBoundingClientRect(),_b8=_b0.lineDiv.getBoundingClientRect();_b0.inputDiv.style.top=Math.max(0,Math.min(_b0.wrapper.clientHeight-10,_b5.top+_b8.top-_b7.top))+"px";_b0.inputDiv.style.left=Math.max(0,Math.min(_b0.wrapper.clientWidth-10,_b5.left+_b8.left-_b7.left))+"px";};function _b3(cm){var _b9=cm.display,pos=_b6(cm,cm.view.sel.head,"div");_b9.cursor.style.left=pos.left+"px";_b9.cursor.style.top=pos.top+"px";_b9.cursor.style.height=Math.max(0,pos.bottom-pos.top)*cm.options.cursorHeight+"px";_b9.cursor.style.display="";if(pos.other){_b9.otherCursor.style.display="";_b9.otherCursor.style.left=pos.other.left+"px";_b9.otherCursor.style.top=pos.other.top+"px";_b9.otherCursor.style.height=(pos.other.bottom-pos.other.top)*0.85+"px";}else{_b9.otherCursor.style.display="none";}};function _b4(cm){var _ba=cm.display,doc=cm.view.doc,sel=cm.view.sel;var _bb=document.createDocumentFragment();var _bc=_ba.lineSpace.offsetWidth,pl=_bd(cm.display);function add(_be,top,_bf,_c0){if(top<0){top=0;}_bb.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+_be+"px; top: "+top+"px; width: "+(_bf==null?_bc-_be:_bf)+"px; height: "+(_c0-top)+"px"));};function _c1(_c2,_c3,_c4,_c5){var _c6=_33(doc,_c2);var _c7=_c6.text.length,_c8=_c5?Infinity:-Infinity;function _c9(ch){return _10a(cm,{line:_c2,ch:ch},"div",_c6);};_32e(_112(_c6),_c3||0,_c4==null?_c7:_c4,function(_ca,to,dir){var _cb=_c9(dir=="rtl"?to-1:_ca);var _cc=_c9(dir=="rtl"?_ca:to-1);var _cd=_cb.left,_ce=_cc.right;if(_cc.top-_cb.top>3){add(_cd,_cb.top,null,_cb.bottom);_cd=pl;if(_cb.bottom<_cc.top){add(_cd,_cb.bottom,null,_cc.top);}}if(_c4==null&&to==_c7){_ce=_bc;}if(_c3==null&&_ca==0){_cd=pl;}_c8=_c5?Math.min(_cc.top,_c8):Math.max(_cc.bottom,_c8);if(_cd<pl+1){_cd=pl;}add(_cd,_cc.top,_ce-_cd,_cc.bottom);});return _c8;};if(sel.from.line==sel.to.line){_c1(sel.from.line,sel.from.ch,sel.to.ch);}else{var _cf=_33(doc,sel.from.line);var cur=_cf,_d0,_d1=[sel.from.line,sel.from.ch],_d2;while(_d0=_4d(cur)){var _d3=_d0.find();_d1.push(_d3.from.ch,_d3.to.line,_d3.to.ch);if(_d3.to.line==sel.to.line){_d1.push(sel.to.ch);_d2=true;break;}cur=_33(doc,_d3.to.line);}if(_d2){for(var i=0;i<_d1.length;i+=3){_c1(_d1[i],_d1[i+1],_d1[i+2]);}}else{var _d4,_d5,_d6=_33(doc,sel.to.line);if(sel.from.ch){_d4=_c1(sel.from.line,sel.from.ch,null,false);}else{_d4=_8b(cm,_cf)-_ba.viewOffset;}if(!sel.to.ch){_d5=_8b(cm,_d6)-_ba.viewOffset;}else{_d5=_c1(sel.to.line,_4b(_d6)?null:0,sel.to.ch,true);}if(_d4<_d5){add(pl,_d4,null,_d5);}}}_d7(_ba.selectionDiv,_bb);_ba.selectionDiv.style.display="";};function _d8(cm){var _d9=cm.display;clearInterval(_d9.blinker);var on=true;_d9.cursor.style.visibility=_d9.otherCursor.style.visibility="";_d9.blinker=setInterval(function(){if(!_d9.cursor.offsetHeight){return;}_d9.cursor.style.visibility=_d9.otherCursor.style.visibility=(on=!on)?"":"hidden";},cm.options.cursorBlinkRate);};function _35(cm,_da){if(cm.view.frontier<cm.display.showingTo){cm.view.highlight.set(_da,_22(_db,cm));}};function _db(cm){var _dc=cm.view,doc=_dc.doc;if(_dc.frontier>=cm.display.showingTo){return;}var end=+new Date+cm.options.workTime;var _dd=_de(_dc.mode,_df(cm,_dc.frontier));var _e0=[],_e1;doc.iter(_dc.frontier,Math.min(doc.size,cm.display.showingTo+500),function(_e2){if(_dc.frontier>=cm.display.showingFrom){if(_2af(cm,_e2,_dd)&&_dc.frontier>=cm.display.showingFrom){if(_e1&&_e1.end==_dc.frontier){_e1.end++;}else{_e0.push(_e1={start:_dc.frontier,end:_dc.frontier+1});}}_e2.stateAfter=_de(_dc.mode,_dd);}else{_ef(cm,_e2,_dd);_e2.stateAfter=_dc.frontier%5==0?_de(_dc.mode,_dd):null;}++_dc.frontier;if(+new Date>end){_35(cm,cm.options.workDelay);return true;}});if(_e0.length){_29(cm,function(){for(var i=0;i<_e0.length;++i){_e3(this,_e0[i].start,_e0[i].end);}})();}};function _e4(cm,n){var _e5,_e6,doc=cm.view.doc;for(var _e7=n,lim=n-100;_e7>lim;--_e7){if(_e7==0){return 0;}var _e8=_33(doc,_e7-1);if(_e8.stateAfter){return _e7;}var _e9=_ea(_e8.text,null,cm.options.tabSize);if(_e6==null||_e5>_e9){_e6=_e7-1;_e5=_e9;}}return _e6;};function _df(cm,n){var _eb=cm.view;var pos=_e4(cm,n),_ec=pos&&_33(_eb.doc,pos-1).stateAfter;if(!_ec){_ec=_ed(_eb.mode);}else{_ec=_de(_eb.mode,_ec);}_eb.doc.iter(pos,n,function(_ee){_ef(cm,_ee,_ec);var _f0=pos==n-1||pos%5==0||pos>=_eb.showingFrom&&pos<_eb.showingTo;_ee.stateAfter=_f0?_de(_eb.mode,_ec):null;++pos;});return _ec;};function _55(_f1){return _f1.lineSpace.offsetTop;};function _bd(_f2){var e=_d7(_f2.measure,elt("pre")).appendChild(elt("span","x"));return e.offsetLeft;};function _f3(cm,_f4,ch,_f5){var _f5=_f5||_f6(cm,_f4),dir=-1;for(var pos=ch;;pos+=dir){var r=_f5[pos];if(r){break;}if(dir<0&&pos==0){dir=1;}}return {left:pos<ch?r.right:r.left,right:pos>ch?r.left:r.right,top:r.top,bottom:r.bottom};};function _f6(cm,_f7){var _f8=cm.display,_f9=cm.display.measureLineCache;for(var i=0;i<_f9.length;++i){var _fa=_f9[i];if(_fa.text==_f7.text&&_fa.markedSpans==_f7.markedSpans&&_f8.scroller.clientWidth==_fa.width){return _fa.measure;}}var _fb=_fc(cm,_f7);var _fa={text:_f7.text,width:_f8.scroller.clientWidth,markedSpans:_f7.markedSpans,measure:_fb};if(_f9.length==16){_f9[++_f8.measureLineCachePos%16]=_fa;}else{_f9.push(_fa);}return _fb;};function _fc(cm,_fd){var _fe=cm.display,_ff=_100(_fd.text.length);var pre=_a7(cm,_fd,_ff);if(ie&&!_2&&!cm.options.lineWrapping&&pre.childNodes.length>100){var _101=document.createDocumentFragment();var _102=10,n=pre.childNodes.length;for(var i=0,_103=Math.ceil(n/_102);i<_103;++i){var wrap=elt("div",null,null,"display: inline-block");for(var j=0;j<_102&&n;++j){wrap.appendChild(pre.firstChild);--n;}_101.appendChild(wrap);}pre.appendChild(_101);}_d7(_fe.measure,pre);var _104=_fe.lineDiv.getBoundingClientRect();var _105=[],data=_100(_fd.text.length),_106=pre.offsetHeight;for(var i=0,cur;i<_ff.length;++i){if(cur=_ff[i]){var size=cur.getBoundingClientRect();var top=Math.max(0,size.top-_104.top),bot=Math.min(size.bottom-_104.top,_106);for(var j=0;j<_105.length;j+=2){var rtop=_105[j],rbot=_105[j+1];if(rtop>bot||rbot<top){continue;}if(rtop<=top&&rbot>=bot||top<=rtop&&bot>=rbot||Math.min(bot,rbot)-Math.max(top,rtop)>=(bot-top)>>1){_105[j]=Math.min(top,rtop);_105[j+1]=Math.max(bot,rbot);break;}}if(j==_105.length){_105.push(top,bot);}data[i]={left:size.left-_104.left,right:size.right-_104.left,top:j};}}for(var i=0,cur;i<data.length;++i){if(cur=data[i]){var vr=cur.top;cur.top=_105[vr];cur.bottom=_105[vr+1];}}return data;};function _40(cm){cm.display.measureLineCache.length=cm.display.measureLineCachePos=0;cm.display.cachedCharWidth=cm.display.cachedTextHeight=null;cm.view.maxLineChanged=true;};function _107(cm,_108,rect,_109){if(_108.widgets){for(var i=0;i<_108.widgets.length;++i){if(_108.widgets[i].above){var size=_108.widgets[i].node.offsetHeight;rect.top+=size;rect.bottom+=size;}}}if(_109=="line"){return rect;}if(!_109){_109="local";}var yOff=_8b(cm,_108);if(_109!="local"){yOff-=cm.display.viewOffset;}if(_109=="page"){var lOff=cm.display.lineSpace.getBoundingClientRect();yOff+=lOff.top+(window.pageYOffset||(document.documentElement||document.body).scrollTop);var xOff=lOff.left+(window.pageXOffset||(document.documentElement||document.body).scrollLeft);rect.left+=xOff;rect.right+=xOff;}rect.top+=yOff;rect.bottom+=yOff;return rect;};function _10a(cm,pos,_10b,_10c){if(!_10c){_10c=_33(cm.view.doc,pos.line);}return _107(cm,_10c,_f3(cm,_10c,pos.ch),_10b);};function _b6(cm,pos,_10d,_10e,_10f){_10e=_10e||_33(cm.view.doc,pos.line);if(!_10f){_10f=_f6(cm,_10e);}function get(ch,_110){var m=_f3(cm,_10e,ch,_10f);if(_110){m.left=m.right;}else{m.right=m.left;}return _107(cm,_10e,m,_10d);};var _111=_112(_10e),ch=pos.ch;if(!_111){return get(ch);}var main,_113,_114=_111[0].level;for(var i=0;i<_111.length;++i){var part=_111[i],rtl=part.level%2,nb,here;if(part.from<ch&&part.to>ch){return get(ch,rtl);}var left=rtl?part.to:part.from,_115=rtl?part.from:part.to;if(left==ch){if(i&&part.level<(nb=_111[i-1]).level){here=get(nb.level%2?nb.from:nb.to-1,true);}else{here=get(rtl&&part.from!=part.to?ch-1:ch);}if(rtl==_114){main=here;}else{_113=here;}}else{if(_115==ch){var nb=i<_111.length-1&&_111[i+1];if(!rtl&&nb&&nb.from==nb.to){continue;}if(nb&&part.level<nb.level){here=get(nb.level%2?nb.to-1:nb.from);}else{here=get(rtl?ch:ch-1,true);}if(rtl==_114){main=here;}else{_113=here;}}}}if(_114&&!ch){_113=get(_111[0].to-1);}if(!main){return _113;}if(_113){main.other=_113;}return main;};function _116(cm,x,y){var doc=cm.view.doc;y+=cm.display.viewOffset;if(y<0){return {line:0,ch:0,outside:true};}var _117=_5f(doc,y);if(_117>=doc.size){return {line:doc.size-1,ch:_33(doc,doc.size-1).text.length};}if(x<0){x=0;}for(;;){var _118=_33(doc,_117);var _119=_11a(cm,_118,_117,x,y);var _11b=_4d(_118);if(_11b&&_119.ch==_11c(_118)){_117=_11b.find().to.line;}else{return _119;}}};function _11a(cm,_11d,_11e,x,y){var _11f=y-_8b(cm,_11d);var _120=false,_121=cm.display.wrapper.clientWidth;var _122=_f6(cm,_11d);function getX(ch){var sp=_b6(cm,{line:_11e,ch:ch},"line",_11d,_122);_120=true;if(_11f>sp.bottom){return Math.max(0,sp.left-_121);}else{if(_11f<sp.top){return sp.left+_121;}else{_120=false;}}return sp.left;};var bidi=_112(_11d),dist=_11d.text.length;var from=_123(_11d),to=_11c(_11d);var _124=_bd(cm.display),toX=getX(to);if(x>toX){return {line:_11e,ch:to,outside:_120};}for(;;){if(bidi?to==from||to==_125(_11d,from,1):to-from<=1){var _126=x-_124<toX-x,ch=_126?from:to;while(_127.test(_11d.text.charAt(ch))){++ch;}return {line:_11e,ch:ch,after:_126,outside:_120};}var step=Math.ceil(dist/2),_128=from+step;if(bidi){_128=from;for(var i=0;i<step;++i){_128=_125(_11d,_128,1);}}var _129=getX(_128);if(_129>x){to=_128;toX=_129;if(_120){toX+=1000;}dist-=step;}else{from=_128;_124=_129;dist=step;}}};var _12a;function _1f(_12b){if(_12b.cachedTextHeight!=null){return _12b.cachedTextHeight;}if(_12a==null){_12a=elt("pre");for(var i=0;i<49;++i){_12a.appendChild(document.createTextNode("x"));_12a.appendChild(elt("br"));}_12a.appendChild(document.createTextNode("x"));}_d7(_12b.measure,_12a);var _12c=_12a.offsetHeight/50;if(_12c>3){_12b.cachedTextHeight=_12c;}_45(_12b.measure);return _12c||1;};function _38(_12d){if(_12d.cachedCharWidth!=null){return _12d.cachedCharWidth;}var _12e=elt("span","x");var pre=elt("pre",[_12e]);_d7(_12d.measure,pre);var _12f=_12e.offsetWidth;if(_12f>2){_12d.cachedCharWidth=_12f;}return _12f||10;};function _130(cm){if(cm.curOp){++cm.curOp.depth;}else{cm.curOp={depth:1,changes:[],delayedCallbacks:[],updateInput:null,userSelChange:null,textChanged:null,selectionChanged:false,updateMaxLine:false,id:++cm.nextOpId};}};function _131(cm){var op=cm.curOp;if(--op.depth){return;}cm.curOp=null;var view=cm.view,_132=cm.display;if(op.updateMaxLine){_4e(view);}if(view.maxLineChanged&&!cm.options.lineWrapping){var _133=_f3(cm,view.maxLine,view.maxLine.text.length).right;_132.sizer.style.minWidth=(_133+3+_2f)+"px";view.maxLineChanged=false;}var _134,_135;if(op.selectionChanged){var _136=_b6(cm,view.sel.head);_134=_137(cm,_136.left,_136.top,_136.left,_136.bottom);}if(op.changes.length||_134&&_134.scrollTop!=null){_135=_42(cm,op.changes,_134&&_134.scrollTop);}if(!_135&&op.selectionChanged){_75(cm);}if(_134){_138(cm);}if(op.selectionChanged){_d8(cm);}if(view.focused&&op.updateInput){_23(cm,op.userSelChange);}if(op.textChanged){_139(cm,"change",cm,op.textChanged);}if(op.selectionChanged){_139(cm,"cursorActivity",cm);}for(var i=0;i<op.delayedCallbacks.length;++i){op.delayedCallbacks[i](cm);}};function _29(cm1,f){return function(){var cm=cm1||this;_130(cm);try{var _13a=f.apply(cm,arguments);}finally{_131(cm);}return _13a;};};function _e3(cm,from,to,_13b){cm.curOp.changes.push({from:from,to:to,diff:_13b});};function _13c(cm){if(cm.view.pollingFast){return;}cm.display.poll.set(cm.options.pollInterval,function(){_13d(cm);if(cm.view.focused){_13c(cm);}});};function _13e(cm){var _13f=false;cm.display.pollingFast=true;function p(){var _140=_13d(cm);if(!_140&&!_13f){_13f=true;cm.display.poll.set(60,p);}else{cm.display.pollingFast=false;_13c(cm);}};cm.display.poll.set(20,p);};function _13d(cm){var _141=cm.display.input,_142=cm.display.prevInput,view=cm.view,sel=view.sel;if(!view.focused||_143(_141)||_144(cm)){return false;}var text=_141.value;if(text==_142&&_b2(sel.from,sel.to)){return false;}_130(cm);view.sel.shift=false;var same=0,l=Math.min(_142.length,text.length);while(same<l&&_142[same]==text[same]){++same;}var from=sel.from,to=sel.to;if(same<_142.length){from={line:from.line,ch:from.ch-(_142.length-same)};}else{if(view.overwrite&&_b2(from,to)&&!cm.display.pasteIncoming){to={line:to.line,ch:Math.min(_33(cm.view.doc,to.line).text.length,to.ch+(text.length-same))};}}var _145=cm.curOp.updateInput;_146(cm,from,to,_147(text.slice(same)),"end",cm.display.pasteIncoming?"paste":"input",{from:from,to:to});cm.curOp.updateInput=_145;if(text.length>1000){_141.value=cm.display.prevInput="";}else{cm.display.prevInput=text;}_131(cm);cm.display.pasteIncoming=false;return true;};function _23(cm,user){var view=cm.view,_148,_149;if(!_b2(view.sel.from,view.sel.to)){cm.display.prevInput="";_148=_14a&&(view.sel.to.line-view.sel.from.line>100||(_149=cm.getSelection()).length>1000);if(_148){cm.display.input.value="-";}else{cm.display.input.value=_149||cm.getSelection();}if(view.focused){_14b(cm.display.input);}}else{if(user){cm.display.prevInput=cm.display.input.value="";}}cm.display.inaccurateSelection=_148;};function _1a(cm){if(cm.options.readOnly!="nocursor"&&(ie||document.activeElement!=cm.display.input)){cm.display.input.focus();}};function _144(cm){return cm.options.readOnly||cm.view.cantEdit;};function _25(cm){var d=cm.display;on(d.scroller,"mousedown",_29(cm,_14c));on(d.scroller,"dblclick",_29(cm,_14d));on(d.lineSpace,"selectstart",function(e){if(!_152(d,e)){_14d(e);}});if(!_1){on(d.scroller,"contextmenu",function(e){_1a3(cm,e);});}on(d.scroller,"scroll",function(){_17a(cm,d.scroller.scrollTop);_17b(cm,d.scroller.scrollLeft,true);_139(cm,"scroll",cm);});on(d.scrollbarV,"scroll",function(){_17a(cm,d.scrollbarV.scrollTop);});on(d.scrollbarH,"scroll",function(){_17b(cm,d.scrollbarH.scrollLeft);});on(d.scroller,"mousewheel",function(e){_183(cm,e);});on(d.scroller,"DOMMouseScroll",function(e){_183(cm,e);});function _14e(){if(cm.view.focused){setTimeout(_22(_1a,cm),0);}};on(d.scrollbarH,"mousedown",_14e);on(d.scrollbarV,"mousedown",_14e);on(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0;});on(window,"resize",function resizeHandler(){d.cachedCharWidth=d.cachedTextHeight=null;_40(cm);if(d.wrapper.parentNode){_42(cm,true);}else{off(window,"resize",_14f);}});on(d.input,"keyup",_29(cm,function(e){if(cm.options.onKeyEvent&&cm.options.onKeyEvent(cm,_16b(e))){return;}if(_15d(e,"keyCode")==16){cm.view.sel.shift=false;}}));on(d.input,"input",_22(_13e,cm));on(d.input,"keydown",_29(cm,_19c));on(d.input,"keypress",_29(cm,_19e));on(d.input,"focus",_22(_27,cm));on(d.input,"blur",_22(_28,cm));function _150(e){if(cm.options.onDragEvent&&cm.options.onDragEvent(cm,_16b(e))){return;}_312(e);};if(cm.options.dragDrop){on(d.scroller,"dragstart",function(e){_179(cm,e);});on(d.scroller,"dragenter",_150);on(d.scroller,"dragover",_150);on(d.scroller,"drop",_29(cm,_16a));}on(d.scroller,"paste",function(){_1a(cm);_13e(cm);});on(d.input,"paste",function(){d.pasteIncoming=true;_13e(cm);});function _151(){if(d.inaccurateSelection){d.prevInput="";d.inaccurateSelection=false;d.input.value=cm.getSelection();_14b(d.input);}};on(d.input,"cut",_151);on(d.input,"copy",_151);if(_9){on(d.sizer,"mouseup",function(){if(document.activeElement==d.input){d.input.blur();}_1a(cm);});}};function _152(_153,e){for(var n=_154(e);n!=_153.wrapper;n=n.parentNode){if(/\bCodeMirror-(?:line)?widget\b/.test(n.className)||n.parentNode==_153.sizer&&n!=_153.mover){return true;}}};function _155(cm,e,_156){var _157=cm.display;if(!_156){var _158=_154(e);if(_158==_157.scrollbarH||_158==_157.scrollbarH.firstChild||_158==_157.scrollbarV||_158==_157.scrollbarV.firstChild||_158==_157.scrollbarFiller){return null;}}var x,y,_159=_157.lineSpace.getBoundingClientRect();try{x=e.clientX;y=e.clientY;}catch(e){return null;}return _116(cm,x-_159.left,y-_159.top);};var _15a,_15b;function _14c(e){var cm=this,_15c=cm.display,view=cm.view,sel=view.sel,doc=view.doc;sel.shift=_15d(e,"shiftKey");if(_152(_15c,e)){if(!_4){_15c.scroller.draggable=false;setTimeout(function(){_15c.scroller.draggable=true;},100);}return;}if(_174(cm,e)){return;}var _15e=_155(cm,e);switch(_169(e)){case 3:if(_1){_1a3.call(cm,cm,e);}return;case 2:if(_15e){_1d9(cm,_15e);}setTimeout(_22(_1a,cm),20);_14d(e);return;}if(!_15e){if(_154(e)==_15c.scroller){_14d(e);}return;}if(!view.focused){_27(cm);}var now=+new Date,type="single";if(_15b&&_15b.time>now-400&&_b2(_15b.pos,_15e)){type="triple";_14d(e);setTimeout(_22(_1a,cm),20);_214(cm,_15e.line);}else{if(_15a&&_15a.time>now-400&&_b2(_15a.pos,_15e)){type="double";_15b={time:now,pos:_15e};_14d(e);var word=_210(_33(doc,_15e.line).text,_15e);_1d9(cm,word.from,word.to);}else{_15a={time:now,pos:_15e};}}var last=_15e;if(cm.options.dragDrop&&_325&&!_144(cm)&&!_b2(sel.from,sel.to)&&!_171(_15e,sel.from)&&!_171(sel.to,_15e)&&type=="single"){var _15f=_29(cm,function(e2){if(_4){_15c.scroller.draggable=false;}view.draggingText=false;off(document,"mouseup",_15f);off(_15c.scroller,"drop",_15f);if(Math.abs(e.clientX-e2.clientX)+Math.abs(e.clientY-e2.clientY)<10){_14d(e2);_1d9(cm,_15e);_1a(cm);}});if(_4){_15c.scroller.draggable=true;}view.draggingText=_15f;if(_15c.scroller.dragDrop){_15c.scroller.dragDrop();}on(document,"mouseup",_15f);on(_15c.scroller,"drop",_15f);return;}_14d(e);if(type=="single"){_1d9(cm,_1d6(doc,_15e));}var _160=sel.from,_161=sel.to;function _162(cur){if(type=="single"){_1d9(cm,_1d6(doc,_15e),cur);return;}_160=_1d6(doc,_160);_161=_1d6(doc,_161);if(type=="double"){var word=_210(_33(doc,cur.line).text,cur);if(_171(cur,_160)){_1d9(cm,word.from,_161);}else{_1d9(cm,_160,word.to);}}else{if(type=="triple"){if(_171(cur,_160)){_1d9(cm,_161,_1d6(doc,{line:cur.line,ch:0}));}else{_1d9(cm,_160,_1d6(doc,{line:cur.line+1,ch:0}));}}}};var _163=_15c.wrapper.getBoundingClientRect();var _164=0;function _165(e){var _166=++_164;var cur=_155(cm,e,true);if(!cur){return;}if(!_b2(cur,last)){if(!view.focused){_27(cm);}last=cur;_162(cur);var _167=_5a(_15c,doc);if(cur.line>=_167.to||cur.line<_167.from){setTimeout(_29(cm,function(){if(_164==_166){_165(e);}}),150);}}else{var _168=e.clientY<_163.top?-20:e.clientY>_163.bottom?20:0;if(_168){setTimeout(_29(cm,function(){if(_164!=_166){return;}_15c.scroller.scrollTop+=_168;_165(e);}),50);}}};function done(e){_164=Infinity;var cur=_155(cm,e);if(cur){_162(cur);}_14d(e);_1a(cm);off(document,"mousemove",move);off(document,"mouseup",up);};var move=_29(cm,function(e){if(!ie&&!_169(e)){done(e);}else{_165(e);}});var up=_29(cm,done);on(document,"mousemove",move);on(document,"mouseup",up);};function _16a(e){var cm=this;if(cm.options.onDragEvent&&cm.options.onDragEvent(cm,_16b(e))){return;}_14d(e);var pos=_155(cm,e,true),_16c=e.dataTransfer.files;if(!pos||_144(cm)){return;}if(_16c&&_16c.length&&window.FileReader&&window.File){var n=_16c.length,text=Array(n),read=0;var _16d=function(file,i){var _16e=new FileReader;_16e.onload=function $DBbX_(){text[i]=_16e.result;if(++read==n){pos=_1d6(cm.view.doc,pos);_29(cm,function(){var end=_16f(cm,text.join(""),pos,pos,"paste");_170(cm,pos,end);})();}};_16e.readAsText(file);};for(var i=0;i<n;++i){_16d(_16c[i],i);}}else{if(cm.view.draggingText&&!(_171(pos,cm.view.sel.from)||_171(cm.view.sel.to,pos))){cm.view.draggingText(e);if(ie){setTimeout(_22(_1a,cm),50);}return;}try{var text=e.dataTransfer.getData("Text");if(text){var _172=cm.view.sel.from,_173=cm.view.sel.to;_170(cm,pos,pos);if(cm.view.draggingText){_16f(cm,"",_172,_173,"paste");}cm.replaceSelection(text,null,"paste");_1a(cm);_27(cm);}}catch(e){}}};function _174(cm,e){var _175=cm.display;try{var mX=e.clientX,mY=e.clientY;}catch(e){return false;}if(mX>=Math.floor(_175.gutters.getBoundingClientRect().right)){return false;}_14d(e);if(!_176(cm,"gutterClick")){return true;}var _177=_175.lineDiv.getBoundingClientRect();if(mY>_177.bottom){return true;}mY-=_177.top-_175.viewOffset;for(var i=0;i<cm.options.gutters.length;++i){var g=_175.gutters.childNodes[i];if(g&&g.getBoundingClientRect().right>=mX){var line=_5f(cm.view.doc,mY);var _178=cm.options.gutters[i];_74(cm,cm,"gutterClick",cm,line,_178,e);break;}}return true;};function _179(cm,e){var txt=cm.getSelection();e.dataTransfer.setData("Text",txt);if(e.dataTransfer.setDragImage&&!_8){e.dataTransfer.setDragImage(elt("img"),0,0);}};function _17a(cm,val){if(Math.abs(cm.view.scrollTop-val)<2){return;}cm.view.scrollTop=val;if(!_1){_42(cm,[],val);}if(cm.display.scroller.scrollTop!=val){cm.display.scroller.scrollTop=val;}if(cm.display.scrollbarV.scrollTop!=val){cm.display.scrollbarV.scrollTop=val;}if(_1){_42(cm,[]);}};function _17b(cm,val,_17c){if(_17c?val==cm.view.scrollLeft:Math.abs(cm.view.scrollLeft-val)<2){return;}cm.view.scrollLeft=val;_60(cm);if(cm.display.scroller.scrollLeft!=val){cm.display.scroller.scrollLeft=val;}if(cm.display.scrollbarH.scrollLeft!=val){cm.display.scrollbarH.scrollLeft=val;}};var _17d=0,_17e,_17f,_180,_181,_182=null;if(ie){_182=-0.53;}else{if(_1){_182=15;}else{if(_6){_182=-0.7;}else{if(_8){_182=-1/3;}}}}function _183(cm,e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;if(dx==null&&e.detail&&e.axis==e.HORIZONTAL_AXIS){dx=e.detail;}if(dy==null&&e.detail&&e.axis==e.VERTICAL_AXIS){dy=e.detail;}else{if(dy==null){dy=e.wheelDelta;}}if(dy&&_f&&_4){for(var cur=e.target;cur!=_184;cur=cur.parentNode){if(cur.lineObj){cm.display.currentWheelTarget=cur;break;}}}var _184=cm.display.scroller;if(dx&&!_1&&!_7&&_182!=null){if(dy){_17a(cm,Math.max(0,Math.min(_184.scrollTop+dy*_182,_184.scrollHeight-_184.clientHeight)));}_17b(cm,Math.max(0,Math.min(_184.scrollLeft+dx*_182,_184.scrollWidth-_184.clientWidth)));_14d(e);_180=null;return;}if(dy&&_182!=null){var _185=dy*_182;var top=cm.view.scrollTop,bot=top+cm.display.wrapper.clientHeight;if(_185<0){top=Math.max(0,top+_185-50);}else{bot=Math.min(cm.view.doc.height,bot+_185+50);}_42(cm,[],{top:top,bottom:bot});}if(_17d<20){if(_180==null){_180=_184.scrollLeft;_181=_184.scrollTop;_17e=dx;_17f=dy;setTimeout(function(){if(_180==null){return;}var _186=_184.scrollLeft-_180;var _187=_184.scrollTop-_181;var _188=(_187&&_17f&&_187/_17f)||(_186&&_17e&&_186/_17e);_180=_181=null;if(!_188){return;}_182=(_182*_17d+_188)/(_17d+1);++_17d;},200);}else{_17e+=dx;_17f+=dy;}}};function _189(cm,_18a,_18b){if(typeof _18a=="string"){_18a=_18c[_18a];if(!_18a){return false;}}if(cm.display.pollingFast&&_13d(cm)){cm.display.pollingFast=false;}var view=cm.view,_18d=view.sel.shift;try{if(_144(cm)){view.suppressEdits=true;}if(_18b){view.sel.shift=false;}_18a(cm);}catch(e){if(e!=Pass){throw e;}return false;}finally{view.sel.shift=_18d;view.suppressEdits=false;}return true;};function _18e(cm){var maps=cm.view.keyMaps.slice(0);maps.push(cm.options.keyMap);if(cm.options.extraKeys){maps.unshift(cm.options.extraKeys);}return maps;};var _18f;function _190(cm,e){var _191=_192(cm.options.keyMap),next=_191.auto;clearTimeout(_18f);if(next&&!_193(e)){_18f=setTimeout(function(){if(_192(cm.options.keyMap)==_191){cm.options.keyMap=(next.call?next.call(null,cm):next);}},50);}var name=_266[_15d(e,"keyCode")],_194=false;var _195=_f&&(_7||_5);if(name==null||e.altGraphKey){return false;}if(_15d(e,"altKey")){name="Alt-"+name;}if(_15d(e,_195?"metaKey":"ctrlKey")){name="Ctrl-"+name;}if(_15d(e,_195?"ctrlKey":"metaKey")){name="Cmd-"+name;}var _196=false;function stop(){_196=true;};var _197=_18e(cm);if(_15d(e,"shiftKey")){_194=_19a("Shift-"+name,_197,function(b){return _189(cm,b,true);},stop)||_19a(name,_197,function(b){if(typeof b=="string"&&/^go[A-Z]/.test(b)){return _189(cm,b);}},stop);}else{_194=_19a(name,_197,function(b){return _189(cm,b);},stop);}if(_196){_194=false;}if(_194){_14d(e);_d8(cm);if(_3){e.oldKeyCode=e.keyCode;e.keyCode=0;}}return _194;};function _198(cm,e,ch){var _199=_19a("'"+ch+"'",_18e(cm),function(b){return _189(cm,b,true);});if(_199){_14d(e);_d8(cm);}return _199;};var _19b=null;function _19c(e){var cm=this;if(!cm.view.focused){_27(cm);}if(ie&&e.keyCode==27){e.returnValue=false;}if(cm.options.onKeyEvent&&cm.options.onKeyEvent(cm,_16b(e))){return;}var code=_15d(e,"keyCode");cm.view.sel.shift=code==16||_15d(e,"shiftKey");var _19d=_190(cm,e);if(_7){_19b=_19d?code:null;if(!_19d&&code==88&&!_14a&&_15d(e,_f?"metaKey":"ctrlKey")){cm.replaceSelection("");}}};function _19e(e){var cm=this;if(cm.options.onKeyEvent&&cm.options.onKeyEvent(cm,_16b(e))){return;}var _19f=_15d(e,"keyCode"),_1a0=_15d(e,"charCode");if(_7&&_19f==_19b){_19b=null;_14d(e);return;}if(((_7&&(!e.which||e.which<10))||_9)&&_190(cm,e)){return;}var ch=String.fromCharCode(_1a0==null?_19f:_1a0);if(this.options.electricChars&&this.view.mode.electricChars&&this.options.smartIndent&&!_144(this)&&this.view.mode.electricChars.indexOf(ch)>-1){setTimeout(_29(cm,function(){_1a1(cm,cm.view.sel.to.line,"smart");}),75);}if(_198(cm,e,ch)){return;}_13e(cm);};function _27(cm){if(cm.options.readOnly=="nocursor"){return;}if(!cm.view.focused){_139(cm,"focus",cm);cm.view.focused=true;if(cm.display.scroller.className.search(/\bCodeMirror-focused\b/)==-1){cm.display.scroller.className+=" CodeMirror-focused";}_23(cm,true);}_13c(cm);_d8(cm);};function _28(cm){if(cm.view.focused){_139(cm,"blur",cm);cm.view.focused=false;cm.display.scroller.className=cm.display.scroller.className.replace(" CodeMirror-focused","");}clearInterval(cm.display.blinker);setTimeout(function(){if(!cm.view.focused){cm.view.sel.shift=false;}},150);};var _1a2;function _1a3(cm,e){var _1a4=cm.display,sel=cm.view.sel;var pos=_155(cm,e),_1a5=_1a4.scroller.scrollTop;if(!pos||_7){return;}if(_b2(sel.from,sel.to)||_171(pos,sel.from)||!_171(pos,sel.to)){_29(cm,_170)(cm,pos,pos);}var _1a6=_1a4.input.style.cssText;_1a4.inputDiv.style.position="absolute";_1a4.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);";_1a(cm);_23(cm,true);if(_b2(sel.from,sel.to)){_1a4.input.value=_1a4.prevInput=" ";}function _1a7(){_1a4.inputDiv.style.position="relative";_1a4.input.style.cssText=_1a6;if(_3){_1a4.scrollbarV.scrollTop=_1a4.scroller.scrollTop=_1a5;}_13c(cm);if(_1a4.input.selectionStart!=null){clearTimeout(_1a2);var _1a8=_1a4.input.value=" "+(_b2(sel.from,sel.to)?"":_1a4.input.value),i=0;_1a4.prevInput=" ";_1a4.input.selectionStart=1;_1a4.input.selectionEnd=_1a8.length;_1a2=setTimeout(function poll(){if(_1a4.prevInput==" "&&_1a4.input.selectionStart==0){_29(cm,_18c.selectAll)(cm);}else{if(i++<10){_1a2=setTimeout(poll,500);}else{_23(cm);}}},200);}};if(_1){_312(e);on(window,"mouseup",function mouseup(){off(window,"mouseup",_1a9);setTimeout(_1a7,20);});}else{setTimeout(_1a7,50);}};function _146(cm,from,to,_1aa,_1ab,_1ac){var _1ad=_10&&_1ae(cm.view.doc,from,to);if(_1ad){for(var i=_1ad.length-1;i>=1;--i){_1af(cm,_1ad[i].from,_1ad[i].to,[""],_1ac);}if(_1ad.length){return _1af(cm,_1ad[0].from,_1ad[0].to,_1aa,_1ab,_1ac);}}else{return _1af(cm,from,to,_1aa,_1ab,_1ac);}};function _1af(cm,from,to,_1b0,_1b1,_1b2){if(cm.view.suppressEdits){return;}var view=cm.view,doc=view.doc,old=[];doc.iter(from.line,to.line+1,function(line){old.push(_1b3(line.text,line.markedSpans));});var _1b4=view.sel.from,_1b5=view.sel.to;var _1b6=_1b7(_1b8(old[0]),_1b8(lst(old)),from.ch,to.ch,_1b0);var _1b9=_1ba(cm,from,to,_1b6,_1b1,_1b2);if(view.history){_1bb(cm,from.line,_1b0.length,old,_1b2,_1b4,_1b5,view.sel.from,view.sel.to);}return _1b9;};function _1bc(cm,type){var doc=cm.view.doc,hist=cm.view.history;var set=(type=="undo"?hist.done:hist.undone).pop();if(!set){return;}var anti={events:[],fromBefore:set.fromAfter,toBefore:set.toAfter,fromAfter:set.fromBefore,toAfter:set.toBefore};for(var i=set.events.length-1;i>=0;i-=1){hist.dirtyCounter+=type=="undo"?-1:1;var _1bd=set.events[i];var _1be=[],end=_1bd.start+_1bd.added;doc.iter(_1bd.start,end,function(line){_1be.push(_1b3(line.text,line.markedSpans));});anti.events.push({start:_1bd.start,added:_1bd.old.length,old:_1be});var _1bf=i?null:{from:set.fromBefore,to:set.toBefore};_1ba(cm,{line:_1bd.start,ch:0},{line:end-1,ch:_33(doc,end-1).text.length},_1bd.old,_1bf,type);}(type=="undo"?hist.undone:hist.done).push(anti);};function _1ba(cm,from,to,_1c0,_1c1,_1c2){var view=cm.view,doc=view.doc,_1c3=cm.display;if(view.suppressEdits){return;}var _1c4=to.line-from.line,_1c5=_33(doc,from.line),_1c6=_33(doc,to.line);var _1c7=false,_1c8=from.line;if(!cm.options.lineWrapping){_1c8=_7d(_7e(doc,_1c5));doc.iter(_1c8,to.line+1,function(line){if(_48(doc,line)==view.maxLineLength){_1c7=true;return true;}});}var _1c9=lst(_1c0),th=_1f(_1c3);if(from.ch==0&&to.ch==0&&_1d2(_1c9)==""){var _1ca=[];for(var i=0,e=_1c0.length-1;i<e;++i){_1ca.push(_1e(_1d2(_1c0[i]),_1b8(_1c0[i]),th));}_2ac(cm,_1c6,_1c6.text,_1b8(_1c9));if(_1c4){doc.remove(from.line,_1c4,cm);}if(_1ca.length){doc.insert(from.line,_1ca);}}else{if(_1c5==_1c6){if(_1c0.length==1){_2ac(cm,_1c5,_1c5.text.slice(0,from.ch)+_1d2(_1c0[0])+_1c5.text.slice(to.ch),_1b8(_1c0[0]));}else{for(var _1ca=[],i=1,e=_1c0.length-1;i<e;++i){_1ca.push(_1e(_1d2(_1c0[i]),_1b8(_1c0[i]),th));}_1ca.push(_1e(_1d2(_1c9)+_1c5.text.slice(to.ch),_1b8(_1c9),th));_2ac(cm,_1c5,_1c5.text.slice(0,from.ch)+_1d2(_1c0[0]),_1b8(_1c0[0]));doc.insert(from.line+1,_1ca);}}else{if(_1c0.length==1){_2ac(cm,_1c5,_1c5.text.slice(0,from.ch)+_1d2(_1c0[0])+_1c6.text.slice(to.ch),_1b8(_1c0[0]));doc.remove(from.line+1,_1c4,cm);}else{var _1ca=[];_2ac(cm,_1c5,_1c5.text.slice(0,from.ch)+_1d2(_1c0[0]),_1b8(_1c0[0]));_2ac(cm,_1c6,_1d2(_1c9)+_1c6.text.slice(to.ch),_1b8(_1c9));for(var i=1,e=_1c0.length-1;i<e;++i){_1ca.push(_1e(_1d2(_1c0[i]),_1b8(_1c0[i]),th));}if(_1c4>1){doc.remove(from.line+1,_1c4-1,cm);}doc.insert(from.line+1,_1ca);}}}if(cm.options.lineWrapping){var _1cb=Math.max(5,_1c3.scroller.clientWidth/_38(_1c3)-3);doc.iter(from.line,from.line+_1c0.length,function(line){if(line.height==0){return;}var _1cc=(Math.ceil(line.text.length/_1cb)||1)*th;if(_1cc!=line.height){_8a(line,_1cc);}});}else{doc.iter(_1c8,from.line+_1c0.length,function(line){var len=_48(doc,line);if(len>view.maxLineLength){view.maxLine=line;view.maxLineLength=len;view.maxLineChanged=true;_1c7=false;}});if(_1c7){cm.curOp.updateMaxLine=true;}}view.frontier=Math.min(view.frontier,from.line);_35(cm,400);var _1cd=_1c0.length-_1c4-1;_e3(cm,from.line,to.line+1,_1cd);if(_176(cm,"change")){for(var i=0;i<_1c0.length;++i){if(typeof _1c0[i]!="string"){_1c0[i]=_1c0[i].text;}}var _1ce={from:from,to:to,text:_1c0,origin:_1c2};if(cm.curOp.textChanged){for(var cur=cm.curOp.textChanged;cur.next;cur=cur.next){}cur.next=_1ce;}else{cm.curOp.textChanged=_1ce;}}var _1cf,_1d0,end={line:from.line+_1c0.length-1,ch:_1d2(_1c9).length+(_1c0.length==1?from.ch:0)};if(_1c1&&typeof _1c1!="string"){if(_1c1.from){_1cf=_1c1.from;_1d0=_1c1.to;}else{_1cf=_1d0=_1c1;}}else{if(_1c1=="end"){_1cf=_1d0=end;}else{if(_1c1=="start"){_1cf=_1d0=from;}else{if(_1c1=="around"){_1cf=from;_1d0=end;}else{var _1d1=function(pos){if(_171(pos,from)){return pos;}if(!_171(to,pos)){return end;}var line=pos.line+_1cd;var ch=pos.ch;if(pos.line==to.line){ch+=_1d2(_1c9).length-(to.ch-(to.line==from.line?from.ch:0));}return {line:line,ch:ch};};_1cf=_1d1(view.sel.from);_1d0=_1d1(view.sel.to);}}}}_170(cm,_1cf,_1d0,null,true);return end;};function _16f(cm,code,from,to,_1d3){if(!to){to=from;}if(_171(to,from)){var tmp=to;to=from;from=tmp;}return _146(cm,from,to,_147(code),null,_1d3);};function _b2(a,b){return a.line==b.line&&a.ch==b.ch;};function _171(a,b){return a.line<b.line||(a.line==b.line&&a.ch<b.ch);};function _1d4(x){return {line:x.line,ch:x.ch};};function _1d5(doc,n){return Math.max(0,Math.min(n,doc.size-1));};function _1d6(doc,pos){if(pos.line<0){return {line:0,ch:0};}if(pos.line>=doc.size){return {line:doc.size-1,ch:_33(doc,doc.size-1).text.length};}var ch=pos.ch,_1d7=_33(doc,pos.line).text.length;if(ch==null||ch>_1d7){return {line:pos.line,ch:_1d7};}else{if(ch<0){return {line:pos.line,ch:0};}else{return pos;}}};function _1d8(doc,l){return l>=0&&l<doc.size;};function _1d9(cm,pos,_1da,bias){var sel=cm.view.sel;if(sel.shift||sel.extend){var _1db=sel.anchor;if(_1da){var _1dc=_171(pos,_1db);if(_1dc!=_171(_1da,_1db)){_1db=pos;pos=_1da;}else{if(_1dc!=_171(pos,_1da)){pos=_1da;}}}_170(cm,_1db,pos,bias);}else{_170(cm,pos,_1da||pos,bias);}cm.curOp.userSelChange=true;};function _170(cm,_1dd,head,bias,_1de){cm.view.goalColumn=null;var sel=cm.view.sel;if(_1de||!_b2(_1dd,sel.anchor)){_1dd=_1df(cm,_1dd,bias,_1de!="push");}if(_1de||!_b2(head,sel.head)){head=_1df(cm,head,bias,_1de!="push");}if(_b2(sel.anchor,_1dd)&&_b2(sel.head,head)){return;}sel.anchor=_1dd;sel.head=head;var inv=_171(head,_1dd);sel.from=inv?head:_1dd;sel.to=inv?_1dd:head;cm.curOp.updateInput=true;cm.curOp.selectionChanged=true;};function _1e0(cm){_170(cm,cm.view.sel.from,cm.view.sel.to,null,"push");};function _1df(cm,pos,bias,_1e1){var doc=cm.view.doc,_1e2=false,_1e3=pos;var dir=bias||1;cm.view.cantEdit=false;search:for(;;){var line=_33(doc,_1e3.line),_1e4;if(line.markedSpans){for(var i=0;i<line.markedSpans.length;++i){var sp=line.markedSpans[i],m=sp.marker;if((sp.from==null||(m.inclusiveLeft?sp.from<=_1e3.ch:sp.from<_1e3.ch))&&(sp.to==null||(m.inclusiveRight?sp.to>=_1e3.ch:sp.to>_1e3.ch))){if(_1e1&&m.clearOnEnter){(_1e4||(_1e4=[])).push(m);continue;}else{if(!m.atomic){continue;}}var _1e5=m.find()[dir<0?"from":"to"];if(_b2(_1e5,_1e3)){_1e5.ch+=dir;if(_1e5.ch<0){if(_1e5.line){_1e5=_1d6(doc,{line:_1e5.line-1});}else{_1e5=null;}}else{if(_1e5.ch>line.text.length){if(_1e5.line<doc.size-1){_1e5={line:_1e5.line+1,ch:0};}else{_1e5=null;}}}if(!_1e5){if(_1e2){if(!_1e1){return _1df(cm,pos,bias,true);}cm.view.cantEdit=true;return {line:0,ch:0};}_1e2=true;_1e5=pos;dir=-dir;}}_1e3=_1e5;continue search;}}if(_1e4){for(var i=0;i<_1e4.length;++i){_1e4[i].clear();}}}return _1e3;}};function _138(cm){var view=cm.view;var _1e6=_1e7(cm,view.sel.head);if(!view.focused){return;}var _1e8=cm.display,box=_1e8.sizer.getBoundingClientRect(),_1e9=null;if(_1e6.top+box.top<0){_1e9=true;}else{if(_1e6.bottom+box.top>(window.innerHeight||document.documentElement.clientHeight)){_1e9=false;}}if(_1e9!=null&&!_c){var _1ea=_1e8.cursor.style.display=="none";if(_1ea){_1e8.cursor.style.display="";_1e8.cursor.style.left=_1e6.left+"px";_1e8.cursor.style.top=(_1e6.top-_1e8.viewOffset)+"px";}_1e8.cursor.scrollIntoView(_1e9);if(_1ea){_1e8.cursor.style.display="none";}}};function _1e7(cm,pos){for(;;){var _1eb=false,_1ec=_b6(cm,pos);var _1ed=_137(cm,_1ec.left,_1ec.top,_1ec.left,_1ec.bottom);var _1ee=cm.view.scrollTop,_1ef=cm.view.scrollLeft;if(_1ed.scrollTop!=null){_17a(cm,_1ed.scrollTop);if(Math.abs(cm.view.scrollTop-_1ee)>1){_1eb=true;}}if(_1ed.scrollLeft!=null){_17b(cm,_1ed.scrollLeft);if(Math.abs(cm.view.scrollLeft-_1ef)>1){_1eb=true;}}if(!_1eb){return _1ec;}}};function _1f0(cm,x1,y1,x2,y2){var _1f1=_137(cm,x1,y1,x2,y2);if(_1f1.scrollTop!=null){_17a(cm,_1f1.scrollTop);}if(_1f1.scrollLeft!=null){_17b(cm,_1f1.scrollLeft);}};function _137(cm,x1,y1,x2,y2){var _1f2=cm.display,pt=_55(_1f2);y1+=pt;y2+=pt;var _1f3=_1f2.scroller.clientHeight-_2f,_1f4=_1f2.scroller.scrollTop,_1f5={};var _1f6=cm.view.doc.height+2*pt;var _1f7=y1<pt+10,_1f8=y2+pt>_1f6-10;if(y1<_1f4){_1f5.scrollTop=_1f7?0:Math.max(0,y1);}else{if(y2>_1f4+_1f3){_1f5.scrollTop=(_1f8?_1f6:y2)-_1f3;}}var _1f9=_1f2.scroller.clientWidth-_2f,_1fa=_1f2.scroller.scrollLeft;x1+=_1f2.gutters.offsetWidth;x2+=_1f2.gutters.offsetWidth;var _1fb=_1f2.gutters.offsetWidth;var _1fc=x1<_1fb+10;if(x1<_1fa+_1fb||_1fc){if(_1fc){x1=0;}_1f5.scrollLeft=Math.max(0,x1-10-_1fb);}else{if(x2>_1f9+_1fa-3){_1f5.scrollLeft=x2+10-_1f9;}}return _1f5;};function _1a1(cm,n,how,_1fd){var doc=cm.view.doc;if(!how){how="add";}if(how=="smart"){if(!cm.view.mode.indent){how="prev";}else{var _1fe=_df(cm,n);}}var _1ff=cm.options.tabSize;var line=_33(doc,n),_200=_ea(line.text,null,_1ff);var _201=line.text.match(/^\s*/)[0],_202;if(how=="smart"){_202=cm.view.mode.indent(_1fe,line.text.slice(_201.length),line.text);if(_202==Pass){if(!_1fd){return;}how="prev";}}if(how=="prev"){if(n){_202=_ea(_33(doc,n-1).text,null,_1ff);}else{_202=0;}}else{if(how=="add"){_202=_200+cm.options.indentUnit;}else{if(how=="subtract"){_202=_200-cm.options.indentUnit;}}}_202=Math.max(0,_202);var _203="",pos=0;if(cm.options.indentWithTabs){for(var i=Math.floor(_202/_1ff);i;--i){pos+=_1ff;_203+="\t";}}if(pos<_202){_203+=_204(_202-pos);}if(_203!=_201){_16f(cm,_203,{line:n,ch:0},{line:n,ch:_201.length},"input");}line.stateAfter=null;};function _205(cm,_206,op){var no=_206,line=_206,doc=cm.view.doc;if(typeof _206=="number"){line=_33(doc,_1d5(doc,_206));}else{no=_7d(_206);}if(no==null){return null;}if(op(line,no)){_e3(cm,no,no+1);}else{return null;}return line;};function _207(cm,dir,unit,_208){var doc=cm.view.doc,end=cm.view.sel.head,line=end.line,ch=end.ch;var _209=_33(doc,line);function _20a(){var l=line+dir;if(l<0||l==doc.size){return false;}line=l;return _209=_33(doc,l);};function _20b(_20c){var next=(_208?_125:_20d)(_209,ch,dir,true);if(next==null){if(!_20c&&_20a()){if(_208){ch=(dir<0?_11c:_123)(_209);}else{ch=dir<0?_209.text.length:0;}}else{return false;}}else{ch=next;}return true;};if(unit=="char"){_20b();}else{if(unit=="column"){_20b(true);}else{if(unit=="word"){var _20e=false;for(;;){if(dir<0){if(!_20b()){break;}}if(_20f(_209.text.charAt(ch))){_20e=true;}else{if(_20e){if(dir<0){dir=1;_20b();}break;}}if(dir>0){if(!_20b()){break;}}}}}}return _1df(cm,{line:line,ch:ch},dir,true);};function _210(line,pos){var _211=pos.ch,end=pos.ch;if(line){if(pos.after===false||end==line.length){--_211;}else{++end;}var _212=line.charAt(_211);var _213=_20f(_212)?_20f:/\s/.test(_212)?function(ch){return /\s/.test(ch);}:function(ch){return !/\s/.test(ch)&&!_20f(ch);};while(_211>0&&_213(line.charAt(_211-1))){--_211;}while(end<line.length&&_213(line.charAt(end))){++end;}}return {from:{line:pos.line,ch:_211},to:{line:pos.line,ch:end}};};function _214(cm,line){_1d9(cm,{line:line,ch:0},_1d6(cm.view.doc,{line:line+1,ch:0}));};_12.prototype={getValue:function(_215){var text=[],doc=this.view.doc;doc.iter(0,doc.size,function(line){text.push(line.text);});return text.join(_215||"\n");},setValue:_29(null,function(code){var doc=this.view.doc,top={line:0,ch:0},_216=_33(doc,doc.size-1).text.length;_1af(this,top,{line:doc.size-1,ch:_216},_147(code),top,top,"setValue");}),getSelection:function(_217){return this.getRange(this.view.sel.from,this.view.sel.to,_217);},replaceSelection:_29(null,function(code,_218,_219){var sel=this.view.sel;_146(this,sel.from,sel.to,_147(code),_218||"around",_219);}),focus:function(){window.focus();_1a(this);_27(this);_13e(this);},setOption:function(_21a,_21b){var _21c=this.options,old=_21c[_21a];if(_21c[_21a]==_21b&&_21a!="mode"){return;}_21c[_21a]=_21b;if(_2a.hasOwnProperty(_21a)){_29(this,_2a[_21a])(this,_21b,old);}},getOption:function(_21d){return this.options[_21d];},getMode:function(){return this.view.mode;},addKeyMap:function(map){this.view.keyMaps.push(map);},removeKeyMap:function(map){var maps=this.view.keyMaps;for(var i=0;i<maps.length;++i){if((typeof map=="string"?maps[i].name:maps[i])==map){maps.splice(i,1);return true;}}},undo:_29(null,function(){_1bc(this,"undo");}),redo:_29(null,function(){_1bc(this,"redo");}),indentLine:_29(null,function(n,dir,_21e){if(typeof dir!="string"){if(dir==null){dir=this.options.smartIndent?"smart":"prev";}else{dir=dir?"add":"subtract";}}if(_1d8(this.view.doc,n)){_1a1(this,n,dir,_21e);}}),indentSelection:_29(null,function(how){var sel=this.view.sel;if(_b2(sel.from,sel.to)){return _1a1(this,sel.from.line,how);}var e=sel.to.line-(sel.to.ch?0:1);for(var i=sel.from.line;i<=e;++i){_1a1(this,i,how);}}),historySize:function(){var hist=this.view.history;return {undo:hist.done.length,redo:hist.undone.length};},clearHistory:function(){this.view.history=_24();},markClean:function(){this.view.history.dirtyCounter=0;this.view.history.lastOp=this.view.history.lastOrigin=null;},isClean:function(){return this.view.history.dirtyCounter==0;},getHistory:function(){var hist=this.view.history;function cp(arr){for(var i=0,nw=[],_21f;i<arr.length;++i){var set=arr[i];nw.push({events:_21f=[],fromBefore:set.fromBefore,toBefore:set.toBefore,fromAfter:set.fromAfter,toAfter:set.toAfter});for(var j=0,elt=set.events;j<elt.length;++j){var old=[],cur=elt[j];_21f.push({start:cur.start,added:cur.added,old:old});for(var k=0;k<cur.old.length;++k){old.push(_1d2(cur.old[k]));}}}return nw;};return {done:cp(hist.done),undone:cp(hist.undone)};},setHistory:function(_220){var hist=this.view.history=_24();hist.done=_220.done;hist.undone=_220.undone;},getTokenAt:function(pos){var doc=this.view.doc;pos=_1d6(doc,pos);var _221=_df(this,pos.line),mode=this.view.mode;var line=_33(doc,pos.line);var _222=new _223(line.text,this.options.tabSize);while(_222.pos<pos.ch&&!_222.eol()){_222.start=_222.pos;var _224=mode.token(_222,_221);}return {start:_222.start,end:_222.pos,string:_222.current(),className:_224||null,type:_224||null,state:_221};},getStateAfter:function(line){var doc=this.view.doc;line=_1d5(doc,line==null?doc.size-1:line);return _df(this,line+1);},cursorCoords:function(_225,mode){var pos,sel=this.view.sel;if(_225==null){pos=sel.head;}else{if(typeof _225=="object"){pos=_1d6(this.view.doc,_225);}else{pos=_225?sel.from:sel.to;}}return _b6(this,pos,mode||"page");},charCoords:function(pos,mode){return _10a(this,_1d6(this.view.doc,pos),mode||"page");},coordsChar:function(_226){var off=this.display.lineSpace.getBoundingClientRect();return _116(this,_226.left-off.left,_226.top-off.top);},defaultTextHeight:function(){return _1f(this.display);},markText:_29(null,function(from,to,_227){return _228(this,_1d6(this.view.doc,from),_1d6(this.view.doc,to),_227,"range");}),setBookmark:_29(null,function(pos,_229){pos=_1d6(this.view.doc,pos);return _228(this,pos,pos,_229?{replacedWith:_229}:{},"bookmark");}),findMarksAt:function(pos){var doc=this.view.doc;pos=_1d6(doc,pos);var _22a=[],_22b=_33(doc,pos.line).markedSpans;if(_22b){for(var i=0;i<_22b.length;++i){var span=_22b[i];if((span.from==null||span.from<=pos.ch)&&(span.to==null||span.to>=pos.ch)){_22a.push(span.marker);}}}return _22a;},setGutterMarker:_29(null,function(line,_22c,_22d){return _205(this,line,function(line){var _22e=line.gutterMarkers||(line.gutterMarkers={});_22e[_22c]=_22d;if(!_22d&&_22f(_22e)){line.gutterMarkers=null;}return true;});}),clearGutter:_29(null,function(_230){var i=0,cm=this,doc=cm.view.doc;doc.iter(0,doc.size,function(line){if(line.gutterMarkers&&line.gutterMarkers[_230]){line.gutterMarkers[_230]=null;_e3(cm,i,i+1);if(_22f(line.gutterMarkers)){line.gutterMarkers=null;}}++i;});}),addLineClass:_29(null,function(_231,_232,cls){return _205(this,_231,function(line){var prop=_232=="text"?"textClass":_232=="background"?"bgClass":"wrapClass";if(!line[prop]){line[prop]=cls;}else{if(new RegExp("\\b"+cls+"\\b").test(line[prop])){return false;}else{line[prop]+=" "+cls;}}return true;});}),removeLineClass:_29(null,function(_233,_234,cls){return _205(this,_233,function(line){var prop=_234=="text"?"textClass":_234=="background"?"bgClass":"wrapClass";var cur=line[prop];if(!cur){return false;}else{if(cls==null){line[prop]=null;}else{var upd=cur.replace(new RegExp("^"+cls+"\\b\\s*|\\s*\\b"+cls+"\\b"),"");if(upd==cur){return false;}line[prop]=upd||null;}}return true;});}),addLineWidget:_29(null,function(_235,node,_236){var _237=_236||{};_237.node=node;if(_237.noHScroll){this.display.alignWidgets=true;}_205(this,_235,function(line){(line.widgets||(line.widgets=[])).push(_237);_237.line=line;return true;});return _237;}),removeLineWidget:_29(null,function(_238){var ws=_238.line.widgets,no=_7d(_238.line);if(no==null){return;}for(var i=0;i<ws.length;++i){if(ws[i]==_238){ws.splice(i--,1);}}_e3(this,no,no+1);}),lineInfo:function(line){if(typeof line=="number"){if(!_1d8(this.view.doc,line)){return null;}var n=line;line=_33(this.view.doc,line);if(!line){return null;}}else{var n=_7d(line);if(n==null){return null;}}return {line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets};},getViewport:function(){return {from:this.display.showingFrom,to:this.display.showingTo};},addWidget:function(pos,node,_239,vert,_23a){var _23b=this.display;pos=_b6(this,_1d6(this.view.doc,pos));var top=pos.top,left=pos.left;node.style.position="absolute";_23b.sizer.appendChild(node);if(vert=="over"){top=pos.top;}else{if(vert=="near"){var _23c=Math.max(_23b.wrapper.clientHeight,this.view.doc.height),_23d=Math.max(_23b.sizer.clientWidth,_23b.lineSpace.clientWidth);if(pos.bottom+node.offsetHeight>_23c&&pos.top>node.offsetHeight){top=pos.top-node.offsetHeight;}if(left+node.offsetWidth>_23d){left=_23d-node.offsetWidth;}}}node.style.top=(top+_55(_23b))+"px";node.style.left=node.style.right="";if(_23a=="right"){left=_23b.sizer.clientWidth-node.offsetWidth;node.style.right="0px";}else{if(_23a=="left"){left=0;}else{if(_23a=="middle"){left=(_23b.sizer.clientWidth-node.offsetWidth)/2;}}node.style.left=left+"px";}if(_239){_1f0(this,left,top,left+node.offsetWidth,top+node.offsetHeight);}},lineCount:function(){return this.view.doc.size;},clipPos:function(pos){return _1d6(this.view.doc,pos);},getCursor:function(_23e){var sel=this.view.sel,pos;if(_23e==null||_23e=="head"){pos=sel.head;}else{if(_23e=="anchor"){pos=sel.anchor;}else{if(_23e=="end"||_23e===false){pos=sel.to;}else{pos=sel.from;}}}return _1d4(pos);},somethingSelected:function(){return !_b2(this.view.sel.from,this.view.sel.to);},setCursor:_29(null,function(line,ch,_23f){var pos=_1d6(this.view.doc,typeof line=="number"?{line:line,ch:ch||0}:line);if(_23f){_1d9(this,pos);}else{_170(this,pos,pos);}}),setSelection:_29(null,function(_240,head){var doc=this.view.doc;_170(this,_1d6(doc,_240),_1d6(doc,head||_240));}),extendSelection:_29(null,function(from,to){var doc=this.view.doc;_1d9(this,_1d6(doc,from),to&&_1d6(doc,to));}),setExtending:function(val){this.view.sel.extend=val;},getLine:function(line){var l=this.getLineHandle(line);return l&&l.text;},getLineHandle:function(line){var doc=this.view.doc;if(_1d8(doc,line)){return _33(doc,line);}},getLineNumber:function(line){return _7d(line);},setLine:_29(null,function(line,text){if(_1d8(this.view.doc,line)){_16f(this,text,{line:line,ch:0},{line:line,ch:_33(this.view.doc,line).text.length});}}),removeLine:_29(null,function(line){if(_1d8(this.view.doc,line)){_16f(this,"",{line:line,ch:0},_1d6(this.view.doc,{line:line+1,ch:0}));}}),replaceRange:_29(null,function(code,from,to){var doc=this.view.doc;from=_1d6(doc,from);to=to?_1d6(doc,to):from;return _16f(this,code,from,to);}),getRange:function(from,to,_241){var doc=this.view.doc;from=_1d6(doc,from);to=_1d6(doc,to);var l1=from.line,l2=to.line;if(l1==l2){return _33(doc,l1).text.slice(from.ch,to.ch);}var code=[_33(doc,l1).text.slice(from.ch)];doc.iter(l1+1,l2,function(line){code.push(line.text);});code.push(_33(doc,l2).text.slice(0,to.ch));return code.join(_241||"\n");},triggerOnKeyDown:_29(null,_19c),execCommand:function(cmd){return _18c[cmd](this);},moveH:_29(null,function(dir,unit){var sel=this.view.sel,pos=dir<0?sel.from:sel.to;if(sel.shift||sel.extend||_b2(sel.from,sel.to)){pos=_207(this,dir,unit,true);}_1d9(this,pos,pos,dir);}),deleteH:_29(null,function(dir,unit){var sel=this.view.sel;if(!_b2(sel.from,sel.to)){_16f(this,"",sel.from,sel.to,"delete");}else{_16f(this,"",sel.from,_207(this,dir,unit,false),"delete");}this.curOp.userSelChange=true;}),moveV:_29(null,function(dir,unit){var view=this.view,doc=view.doc,_242=this.display;var cur=view.sel.head,pos=_b6(this,cur,"div");var x=pos.left,y;if(view.goalColumn!=null){x=view.goalColumn;}if(unit=="page"){var _243=Math.min(_242.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);y=pos.top+dir*_243;}else{if(unit=="line"){y=dir>0?pos.bottom+3:pos.top-3;}}do{var _244=_116(this,x,y);y+=dir*5;}while(_244.outside&&(dir<0?y>0:y<doc.height));if(unit=="page"){_242.scrollbarV.scrollTop+=_10a(this,_244,"div").top-pos.top;}_1d9(this,_244,_244,dir);view.goalColumn=x;}),toggleOverwrite:function(){if(this.view.overwrite=!this.view.overwrite){this.display.cursor.className+=" CodeMirror-overwrite";}else{this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","");}},posFromIndex:function(off){var _245=0,ch,doc=this.view.doc;doc.iter(0,doc.size,function(line){var sz=line.text.length+1;if(sz>off){ch=off;return true;}off-=sz;++_245;});return _1d6(doc,{line:_245,ch:ch});},indexFromPos:function(_246){if(_246.line<0||_246.ch<0){return 0;}var _247=_246.ch;this.view.doc.iter(0,_246.line,function(line){_247+=line.text.length+1;});return _247;},scrollTo:function(x,y){if(x!=null){this.display.scrollbarH.scrollLeft=this.display.scroller.scrollLeft=x;}if(y!=null){this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=y;}_42(this,[]);},getScrollInfo:function(){var _248=this.display.scroller,co=_2f;return {left:_248.scrollLeft,top:_248.scrollTop,height:_248.scrollHeight-co,width:_248.scrollWidth-co,clientHeight:_248.clientHeight-co,clientWidth:_248.clientWidth-co};},scrollIntoView:function(pos){if(typeof pos=="number"){pos={line:pos,ch:0};}pos=pos?_1d6(this.view.doc,pos):this.view.sel.head;_1e7(this,pos);},setSize:function(_249,_24a){function _24b(val){return typeof val=="number"||/^\d+$/.test(String(val))?val+"px":val;};if(_249!=null){this.display.wrapper.style.width=_24b(_249);}if(_24a!=null){this.display.wrapper.style.height=_24b(_24a);}this.refresh();},on:function(type,f){on(this,type,f);},off:function(type,f){off(this,type,f);},operation:function(f){return _29(this,f)();},refresh:function(){_40(this);if(this.display.scroller.scrollHeight>this.view.scrollTop){this.display.scrollbarV.scrollTop=this.display.scroller.scrollTop=this.view.scrollTop;}_42(this,true);},getInputField:function(){return this.display.input;},getWrapperElement:function(){return this.display.wrapper;},getScrollerElement:function(){return this.display.scroller;},getGutterElement:function(){return this.display.gutters;}};var _2a=_12.optionHandlers={};var _15=_12.defaults={};function _24c(name,_24d,_24e,_24f){_12.defaults[name]=_24d;if(_24e){_2a[name]=_24f?function(cm,val,old){if(old!=_2b){_24e(cm,val,old);}}:_24e;}};var _2b=_12.Init={toString:function(){return "CodeMirror.Init";}};_24c("value","",function(cm,val){cm.setValue(val);},true);_24c("mode",null,_20,true);_24c("indentUnit",2,_20,true);_24c("indentWithTabs",false);_24c("smartIndent",true);_24c("tabSize",4,function(cm){_20(cm);_40(cm);_42(cm,true);},true);_24c("electricChars",true);_24c("theme","default",function(cm){_21(cm);_41(cm);},true);_24c("keyMap","default",_3d);_24c("extraKeys",null);_24c("onKeyEvent",null);_24c("onDragEvent",null);_24c("lineWrapping",false,_36,true);_24c("gutters",[],function(cm){_16(cm.options);_41(cm);},true);_24c("lineNumbers",false,function(cm){_16(cm.options);_41(cm);},true);_24c("firstLineNumber",1,_41,true);_24c("lineNumberFormatter",function(_250){return _250;},_41,true);_24c("showCursorWhenSelecting",false,_75,true);_24c("readOnly",false,function(cm,val){if(val=="nocursor"){_28(cm);cm.display.input.blur();}else{if(!val){_23(cm,true);}}});_24c("dragDrop",true);_24c("cursorBlinkRate",530);_24c("cursorHeight",1);_24c("workTime",100);_24c("workDelay",100);_24c("flattenSpans",true);_24c("pollInterval",100);_24c("undoDepth",40);_24c("viewportMargin",10,function(cm){cm.refresh();},true);_24c("tabindex",null,function(cm,val){cm.display.input.tabIndex=val||"";});_24c("autofocus",null);var _251=_12.modes={},_252=_12.mimeModes={};_12.defineMode=function $DBbY_(name,mode){if(!_12.defaults.mode&&name!="null"){_12.defaults.mode=name;}if(arguments.length>2){mode.dependencies=[];for(var i=2;i<arguments.length;++i){mode.dependencies.push(arguments[i]);}}_251[name]=mode;};_12.defineMIME=function $DBbZ_(mime,spec){_252[mime]=spec;};_12.resolveMode=function $DBba_(spec){if(typeof spec=="string"&&_252.hasOwnProperty(spec)){spec=_252[spec];}else{if(typeof spec=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec)){return _12.resolveMode("application/xml");}}if(typeof spec=="string"){return {name:spec};}else{return spec||{name:"null"};}};_12.getMode=function $DBbb_(_253,spec){var spec=_12.resolveMode(spec);var _254=_251[spec.name];if(!_254){return _12.getMode(_253,"text/plain");}var _255=_254(_253,spec);if(_256.hasOwnProperty(spec.name)){var exts=_256[spec.name];for(var prop in exts){if(!exts.hasOwnProperty(prop)){continue;}if(_255.hasOwnProperty(prop)){_255["_"+prop]=_255[prop];}_255[prop]=exts[prop];}}_255.name=spec.name;return _255;};_12.defineMode("null",function(){return {token:function(_257){_257.skipToEnd();}};});_12.defineMIME("text/plain","null");var _256=_12.modeExtensions={};_12.extendMode=function $DBbc_(mode,_258){var exts=_256.hasOwnProperty(mode)?_256[mode]:(_256[mode]={});for(var prop in _258){if(_258.hasOwnProperty(prop)){exts[prop]=_258[prop];}}};_12.defineExtension=function $DBbd_(name,func){_12.prototype[name]=func;};_12.defineOption=_24c;var _2c=[];_12.defineInitHook=function $DBbe_(f){_2c.push(f);};function _de(mode,_259){if(_259===true){return _259;}if(mode.copyState){return mode.copyState(_259);}var _25a={};for(var n in _259){var val=_259[n];if(val instanceof Array){val=val.concat([]);}_25a[n]=val;}return _25a;};_12.copyState=_de;function _ed(mode,a1,a2){return mode.startState?mode.startState(a1,a2):true;};_12.startState=_ed;_12.innerMode=function $DBbf_(mode,_25b){while(mode.innerMode){var info=mode.innerMode(_25b);_25b=info.state;mode=info.mode;}return info||{mode:mode,state:_25b};};var _18c=_12.commands={selectAll:function(cm){cm.setSelection({line:0,ch:0},{line:cm.lineCount()-1});},killLine:function(cm){var from=cm.getCursor(true),to=cm.getCursor(false),sel=!_b2(from,to);if(!sel&&cm.getLine(from.line).length==from.ch){cm.replaceRange("",from,{line:from.line+1,ch:0},"delete");}else{cm.replaceRange("",from,sel?to:{line:from.line},"delete");}},deleteLine:function(cm){var l=cm.getCursor().line;cm.replaceRange("",{line:l,ch:0},{line:l},"delete");},undo:function(cm){cm.undo();},redo:function(cm){cm.redo();},goDocStart:function(cm){cm.extendSelection({line:0,ch:0});},goDocEnd:function(cm){cm.extendSelection({line:cm.lineCount()-1});},goLineStart:function(cm){cm.extendSelection(_25c(cm,cm.getCursor().line));},goLineStartSmart:function(cm){var cur=cm.getCursor(),_25d=_25c(cm,cur.line);var line=cm.getLineHandle(_25d.line);var _25e=_112(line);if(!_25e||_25e[0].level==0){var _25f=Math.max(0,line.text.search(/\S/));var inWS=cur.line==_25d.line&&cur.ch<=_25f&&cur.ch;cm.extendSelection({line:_25d.line,ch:inWS?0:_25f});}else{cm.extendSelection(_25d);}},goLineEnd:function(cm){cm.extendSelection(_260(cm,cm.getCursor().line));},goLineUp:function(cm){cm.moveV(-1,"line");},goLineDown:function(cm){cm.moveV(1,"line");},goPageUp:function(cm){cm.moveV(-1,"page");},goPageDown:function(cm){cm.moveV(1,"page");},goCharLeft:function(cm){cm.moveH(-1,"char");},goCharRight:function(cm){cm.moveH(1,"char");},goColumnLeft:function(cm){cm.moveH(-1,"column");},goColumnRight:function(cm){cm.moveH(1,"column");},goWordLeft:function(cm){cm.moveH(-1,"word");},goWordRight:function(cm){cm.moveH(1,"word");},delCharBefore:function(cm){cm.deleteH(-1,"char");},delCharAfter:function(cm){cm.deleteH(1,"char");},delWordBefore:function(cm){cm.deleteH(-1,"word");},delWordAfter:function(cm){cm.deleteH(1,"word");},indentAuto:function(cm){cm.indentSelection("smart");},indentMore:function(cm){cm.indentSelection("add");},indentLess:function(cm){cm.indentSelection("subtract");},insertTab:function(cm){cm.replaceSelection("\t","end","input");},defaultTab:function(cm){if(cm.somethingSelected()){cm.indentSelection("add");}else{cm.replaceSelection("\t","end","input");}},transposeChars:function(cm){var cur=cm.getCursor(),line=cm.getLine(cur.line);if(cur.ch>0&&cur.ch<line.length-1){cm.replaceRange(line.charAt(cur.ch)+line.charAt(cur.ch-1),{line:cur.line,ch:cur.ch-1},{line:cur.line,ch:cur.ch+1});}},newlineAndIndent:function(cm){_29(cm,function(){cm.replaceSelection("\n","end","input");cm.indentLine(cm.getCursor().line,null,true);})();},toggleOverwrite:function(cm){cm.toggleOverwrite();}};var _3f=_12.keyMap={};_3f.basic={"Left":"goCharLeft","Right":"goCharRight","Up":"goLineUp","Down":"goLineDown","End":"goLineEnd","Home":"goLineStartSmart","PageUp":"goPageUp","PageDown":"goPageDown","Delete":"delCharAfter","Backspace":"delCharBefore","Tab":"defaultTab","Shift-Tab":"indentAuto","Enter":"newlineAndIndent","Insert":"toggleOverwrite"};_3f.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordBefore","Ctrl-Delete":"delWordAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"};_3f.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordBefore","Ctrl-Alt-Backspace":"delWordAfter","Alt-Delete":"delWordAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]};_3f["default"]=_f?_3f.macDefault:_3f.pcDefault;_3f.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"};function _192(val){if(typeof val=="string"){return _3f[val];}else{return val;}};function _19a(name,maps,_261,stop){function _262(map){map=_192(map);var _263=map[name];if(_263===false){if(stop){stop();}return true;}if(_263!=null&&_261(_263)){return true;}if(map.nofallthrough){if(stop){stop();}return true;}var _264=map.fallthrough;if(_264==null){return false;}if(Object.prototype.toString.call(_264)!="[object Array]"){return _262(_264);}for(var i=0,e=_264.length;i<e;++i){if(_262(_264[i])){return true;}}return false;};for(var i=0;i<maps.length;++i){if(_262(maps[i])){return true;}}};function _193(_265){var name=_266[_15d(_265,"keyCode")];return name=="Ctrl"||name=="Alt"||name=="Shift"||name=="Mod";};_12.isModifierKey=_193;_12.fromTextArea=function $DBbg_(_267,_268){if(!_268){_268={};}_268.value=_267.value;if(!_268.tabindex&&_267.tabindex){_268.tabindex=_267.tabindex;}if(_268.autofocus==null){var _269=document.body;try{_269=document.activeElement;}catch(e){}_268.autofocus=_269==_267||_267.getAttribute("autofocus")!=null&&_269==document.body;}function save(){_267.value=cm.getValue();};if(_267.form){on(_267.form,"submit",save);var form=_267.form,_26a=form.submit;try{form.submit=function wrappedSubmit(){save();form.submit=_26a;form.submit();form.submit=_26b;};}catch(e){}}_267.style.display="none";var cm=_12(function(node){_267.parentNode.insertBefore(node,_267.nextSibling);},_268);cm.save=save;cm.getTextArea=function $DBbh_(){return _267;};cm.toTextArea=function $DBbi_(){save();_267.parentNode.removeChild(cm.getWrapperElement());_267.style.display="";if(_267.form){off(_267.form,"submit",save);if(typeof _267.form.submit=="function"){_267.form.submit=_26a;}}};return cm;};function _223(_26c,_26d){this.pos=this.start=0;this.string=_26c;this.tabSize=_26d||8;};_223.prototype={eol:function(){return this.pos>=this.string.length;},sol:function(){return this.pos==0;},peek:function(){return this.string.charAt(this.pos)||undefined;},next:function(){if(this.pos<this.string.length){return this.string.charAt(this.pos++);}},eat:function(_26e){var ch=this.string.charAt(this.pos);if(typeof _26e=="string"){var ok=ch==_26e;}else{var ok=ch&&(_26e.test?_26e.test(ch):_26e(ch));}if(ok){++this.pos;return ch;}},eatWhile:function(_26f){var _270=this.pos;while(this.eat(_26f)){}return this.pos>_270;},eatSpace:function(){var _271=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos))){++this.pos;}return this.pos>_271;},skipToEnd:function(){this.pos=this.string.length;},skipTo:function(ch){var _272=this.string.indexOf(ch,this.pos);if(_272>-1){this.pos=_272;return true;}},backUp:function(n){this.pos-=n;},column:function(){return _ea(this.string,this.start,this.tabSize);},indentation:function(){return _ea(this.string,null,this.tabSize);},match:function(_273,_274,_275){if(typeof _273=="string"){var _276=function(str){return _275?str.toLowerCase():str;};if(_276(this.string).indexOf(_276(_273),this.pos)==this.pos){if(_274!==false){this.pos+=_273.length;}return true;}}else{var _277=this.string.slice(this.pos).match(_273);if(_277&&_277.index>0){return null;}if(_277&&_274!==false){this.pos+=_277[0].length;}return _277;}},current:function(){return this.string.slice(this.start,this.pos);}};_12.StringStream=_223;function _278(cm,type){this.lines=[];this.type=type;this.cm=cm;};_278.prototype.clear=function $DBbj_(){if(this.explicitlyCleared){return;}_130(this.cm);var min=null,max=null;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=_279(line.markedSpans,this);if(span.to!=null){max=_7d(line);}line.markedSpans=_27a(line.markedSpans,span);if(span.from!=null){min=_7d(line);}else{if(this.collapsed&&!_7f(line)){_8a(line,_1f(this.cm.display));}}}if(min!=null){_e3(this.cm,min,max+1);}this.lines.length=0;this.explicitlyCleared=true;if(this.collapsed&&this.cm.view.cantEdit){this.cm.view.cantEdit=false;_1e0(this.cm);}_131(this.cm);_74(this.cm,this,"clear");};_278.prototype.find=function $DBbk_(){var from,to;for(var i=0;i<this.lines.length;++i){var line=this.lines[i];var span=_279(line.markedSpans,this);if(span.from!=null||span.to!=null){var _27b=_7d(line);if(span.from!=null){from={line:_27b,ch:span.from};}if(span.to!=null){to={line:_27b,ch:span.to};}}}if(this.type=="bookmark"){return from;}return from&&{from:from,to:to};};function _228(cm,from,to,_27c,type){var doc=cm.view.doc;var _27d=new _278(cm,type);if(type=="range"&&!_171(from,to)){return _27d;}if(_27c){for(var opt in _27c){if(_27c.hasOwnProperty(opt)){_27d[opt]=_27c[opt];}}}if(_27d.replacedWith){_27d.collapsed=true;_27d.replacedWith=elt("span",[_27d.replacedWith],"CodeMirror-widget");}if(_27d.collapsed){_11=true;}var _27e=from.line,size=0,_27f,_280;doc.iter(_27e,to.line+1,function(line){var span={from:null,to:null,marker:_27d};size+=line.text.length;if(_27e==from.line){span.from=from.ch;size-=from.ch;}if(_27e==to.line){span.to=to.ch;size-=line.text.length-to.ch;}if(_27d.collapsed){if(_27e==to.line){_280=_281(line,to.ch);}if(_27e==from.line){_27f=_281(line,from.ch);}else{_8a(line,0);}}_282(line,span);if(_27d.collapsed&&_27e==from.line&&_7f(line)){_8a(line,0);}++_27e;});if(_27d.readOnly){_10=true;if(cm.view.history.done.length||cm.view.history.undone.length){cm.clearHistory();}}if(_27d.collapsed){if(_27f!=_280){throw new Error("Inserting collapsed marker overlapping an existing one");}_27d.size=size;_27d.atomic=true;}if(_27d.className||_27d.startStyle||_27d.endStyle||_27d.collapsed){_e3(cm,from.line,to.line+1);}if(_27d.atomic){_1e0(cm);}return _27d;};function _279(_283,_284){if(_283){for(var i=0;i<_283.length;++i){var span=_283[i];if(span.marker==_284){return span;}}}};function _27a(_285,span){for(var r,i=0;i<_285.length;++i){if(_285[i]!=span){(r||(r=[])).push(_285[i]);}}return r;};function _282(line,span){line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span];span.marker.lines.push(line);};function _286(old,_287){if(old){for(var i=0,nw;i<old.length;++i){var span=old[i],_288=span.marker;var _289=span.from==null||(_288.inclusiveLeft?span.from<=_287:span.from<_287);if(_289||_288.type=="bookmark"&&span.from==_287){var _28a=span.to==null||(_288.inclusiveRight?span.to>=_287:span.to>_287);(nw||(nw=[])).push({from:span.from,to:_28a?null:span.to,marker:_288});}}}return nw;};function _28b(old,_28c,_28d){if(old){for(var i=0,nw;i<old.length;++i){var span=old[i],_28e=span.marker;var _28f=span.to==null||(_28e.inclusiveRight?span.to>=_28d:span.to>_28d);if(_28f||_28e.type=="bookmark"&&span.from==_28d&&span.from!=_28c){var _290=span.from==null||(_28e.inclusiveLeft?span.from<=_28d:span.from<_28d);(nw||(nw=[])).push({from:_290?null:span.from-_28d,to:span.to==null?null:span.to-_28d,marker:_28e});}}}return nw;};function _1b7(_291,_292,_293,_294,_295){if(!_291&&!_292){return _295;}var _296=_286(_291,_293);var last=_28b(_292,_293,_294);var _297=_295.length==1,_298=lst(_295).length+(_297?_293:0);if(_296){for(var i=0;i<_296.length;++i){var span=_296[i];if(span.to==null){var _299=_279(last,span.marker);if(!_299){span.to=_293;}else{if(_297){span.to=_299.to==null?null:_299.to+_298;}}}}}if(last){for(var i=0;i<last.length;++i){var span=last[i];if(span.to!=null){span.to+=_298;}if(span.from==null){var _299=_279(_296,span.marker);if(!_299){span.from=_298;if(_297){(_296||(_296=[])).push(span);}}}else{span.from+=_298;if(_297){(_296||(_296=[])).push(span);}}}}var _29a=[_1b3(_295[0],_296)];if(!_297){var gap=_295.length-2,_29b;if(gap>0&&_296){for(var i=0;i<_296.length;++i){if(_296[i].to==null){(_29b||(_29b=[])).push({from:null,to:null,marker:_296[i].marker});}}}for(var i=0;i<gap;++i){_29a.push(_1b3(_295[i+1],_29b));}_29a.push(_1b3(lst(_295),last));}return _29a;};function _1ae(doc,from,to){var _29c=null;doc.iter(from.line,to.line+1,function(line){if(line.markedSpans){for(var i=0;i<line.markedSpans.length;++i){var mark=line.markedSpans[i].marker;if(mark.readOnly&&(!_29c||_29d(_29c,mark)==-1)){(_29c||(_29c=[])).push(mark);}}}});if(!_29c){return null;}var _29e=[{from:from,to:to}];for(var i=0;i<_29c.length;++i){var m=_29c[i].find();for(var j=0;j<_29e.length;++j){var p=_29e[j];if(!_171(m.from,p.to)||_171(m.to,p.from)){continue;}var _29f=[j,1];if(_171(p.from,m.from)){_29f.push({from:p.from,to:m.from});}if(_171(m.to,p.to)){_29f.push({from:m.to,to:p.to});}_29e.splice.apply(_29e,_29f);j+=_29f.length-1;}}return _29e;};function _281(line,ch){var sps=_11&&line.markedSpans,_2a0;if(sps){for(var sp,i=0;i<sps.length;++i){sp=sps[i];if(!sp.marker.collapsed){continue;}if((sp.from==null||sp.from<ch)&&(sp.to==null||sp.to>ch)&&(!_2a0||_2a0.width<sp.marker.width)){_2a0=sp.marker;}}}return _2a0;};function _4b(line){return _281(line,-1);};function _4d(line){return _281(line,line.text.length+1);};function _7e(doc,line){var _2a1;while(_2a1=_4b(line)){line=_33(doc,_2a1.find().from.line);}return line;};function _7f(line){var sps=_11&&line.markedSpans;if(sps){for(var sp,i=0;i<sps.length;++i){sp=sps[i];if(!sp.marker.collapsed){continue;}if(sp.from==null){return true;}if(sp.from==0&&sp.marker.inclusiveLeft&&_2a2(line,sp)){return true;}}}};window.lineIsHidden=_7f;function _2a2(line,span){if(span.to==null||span.marker.inclusiveRight&&span.to==line.text.length){return true;}for(var sp,i=0;i<line.markedSpans.length;++i){sp=line.markedSpans[i];if(sp.marker.collapsed&&sp.from==span.to&&(sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&_2a2(line,sp)){return true;}}};function _1d2(val){return typeof val=="string"?val:val.text;};function _1b8(val){if(typeof val=="string"){return null;}var _2a3=val.markedSpans,out=null;for(var i=0;i<_2a3.length;++i){if(_2a3[i].marker.explicitlyCleared){if(!out){out=_2a3.slice(0,i);}}else{if(out){out.push(_2a3[i]);}}}return !out?_2a3:out.length?out:null;};function _1b3(text,_2a4){return _2a4?{text:text,markedSpans:_2a4}:text;};function _2a5(line){var _2a6=line.markedSpans;if(!_2a6){return;}for(var i=0;i<_2a6.length;++i){var _2a7=_2a6[i].marker.lines;var ix=_29d(_2a7,line);_2a7.splice(ix,1);}line.markedSpans=null;};function _2a8(line,_2a9){if(!_2a9){return;}for(var i=0;i<_2a9.length;++i){_2a9[i].marker.lines.push(line);}line.markedSpans=_2a9;};function _1e(text,_2aa,_2ab){var line={text:text,height:_2ab};_2a8(line,_2aa);if(_7f(line)){line.height=0;}return line;};function _2ac(cm,line,text,_2ad){line.text=text;line.stateAfter=line.styles=null;if(line.order!=null){line.order=null;}_2a5(line);_2a8(line,_2ad);if(_7f(line)){line.height=0;}else{if(!line.height){line.height=_1f(cm.display);}}_74(cm,line,"change");};function _2ae(line){line.parent=null;_2a5(line);};function _2af(cm,line,_2b0){var mode=cm.view.mode,_2b1=cm.options.flattenSpans;var _2b2=!line.styles,pos=0,_2b3="",_2b4=null;var _2b5=new _223(line.text,cm.options.tabSize),st=line.styles||(line.styles=[]);if(line.text==""&&mode.blankLine){mode.blankLine(_2b0);}while(!_2b5.eol()){var _2b6=mode.token(_2b5,_2b0),_2b7=_2b5.current();_2b5.start=_2b5.pos;if(!_2b1||_2b4!=_2b6){if(_2b3){_2b2=_2b2||pos>=st.length||_2b3!=st[pos]||_2b4!=st[pos+1];st[pos++]=_2b3;st[pos++]=_2b4;}_2b3=_2b7;_2b4=_2b6;}else{_2b3=_2b3+_2b7;}if(_2b5.pos>5000){break;}}if(_2b3){_2b2=_2b2||pos>=st.length||_2b3!=st[pos]||_2b4!=st[pos+1];st[pos++]=_2b3;st[pos++]=_2b4;}if(_2b5.pos>5000){st[pos++]=line.text.slice(_2b5.pos);st[pos++]=null;}if(pos!=st.length){st.length=pos;_2b2=true;}return _2b2;};function _ef(cm,line,_2b8){var mode=cm.view.mode;var _2b9=new _223(line.text,cm.options.tabSize);if(line.text==""&&mode.blankLine){mode.blankLine(_2b8);}while(!_2b9.eol()&&_2b9.pos<=5000){mode.token(_2b9,_2b8);_2b9.start=_2b9.pos;}};var _2ba={};function _2bb(_2bc){if(!_2bc){return null;}return _2ba[_2bc]||(_2ba[_2bc]="cm-"+_2bc.replace(/ +/g," cm-"));};function _a7(cm,_2bd,_2be){var _2bf,line=_2bd,_2c0,_2c1,_2c2=true;while(_2bf=_4b(line)){_2c2=false;line=_33(cm.view.doc,_2bf.find().from.line);if(!_2c0){_2c0=line;}}var _2c3={pre:elt("pre"),col:0,pos:0,display:!_2be,measure:null,addedOne:false,cm:cm};if(line.textClass){_2c3.pre.className=line.textClass;}do{if(!line.styles){_2af(cm,line,line.stateAfter=_df(cm,_7d(line)));}_2c3.measure=line==_2bd&&_2be;_2c3.pos=0;_2c3.addToken=_2c3.measure?_2c4:_2c5;if(_2be&&_2c1&&line!=_2bd&&!_2c3.addedOne){_2be[0]=_2c3.pre.appendChild(_2c6(cm.display.measure));_2c3.addedOne=true;}var next=_2c7(line,_2c3);_2c1=line==_2c0;if(next){line=_33(cm.view.doc,next.to.line);_2c2=false;}}while(next);if(_2be&&!_2c3.addedOne){_2be[0]=_2c3.pre.appendChild(_2c2?elt("span"," "):_2c6(cm.display.measure));}if(!_2c3.pre.firstChild&&!_7f(_2bd)){_2c3.pre.appendChild(document.createTextNode(" "));}return _2c3.pre;};var _2c8=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g;function _2c5(_2c9,text,_2ca,_2cb,_2cc){if(!text){return;}if(!_2c8.test(text)){_2c9.col+=text.length;var _2cd=document.createTextNode(text);}else{var _2cd=document.createDocumentFragment(),pos=0;while(true){_2c8.lastIndex=pos;var m=_2c8.exec(text);var _2ce=m?m.index-pos:text.length-pos;if(_2ce){_2cd.appendChild(document.createTextNode(text.slice(pos,pos+_2ce)));_2c9.col+=_2ce;}if(!m){break;}pos+=_2ce+1;if(m[0]=="\t"){var _2cf=_2c9.cm.options.tabSize,_2d0=_2cf-_2c9.col%_2cf;_2cd.appendChild(elt("span",_204(_2d0),"cm-tab"));_2c9.col+=_2d0;}else{var _2d1=elt("span","•","cm-invalidchar");_2d1.title="\\u"+m[0].charCodeAt(0).toString(16);_2cd.appendChild(_2d1);_2c9.col+=1;}}}if(_2ca||_2cb||_2cc||_2c9.measure){var _2d2=_2ca||"";if(_2cb){_2d2+=_2cb;}if(_2cc){_2d2+=_2cc;}return _2c9.pre.appendChild(elt("span",[_2cd],_2d2));}_2c9.pre.appendChild(_2cd);};function _2c4(_2d3,text,_2d4,_2d5,_2d6){for(var i=0;i<text.length;++i){if(i&&i<text.length-1&&_2d3.cm.options.lineWrapping&&_2d7.test(text.slice(i-1,i+1))){_2d3.pre.appendChild(elt("wbr"));}_2d3.measure[_2d3.pos++]=_2c5(_2d3,text.charAt(i),_2d4,i==0&&_2d5,i==text.length-1&&_2d6);}if(text.length){_2d3.addedOne=true;}};function _2d8(_2d9,size,_2da){if(_2da){if(!_2d9.display){_2da=_2da.cloneNode(true);}_2d9.pre.appendChild(_2da);if(_2d9.measure&&size){_2d9.measure[_2d9.pos]=_2da;_2d9.addedOne=true;}}_2d9.pos+=size;};function _2c7(line,_2db){var st=line.styles,_2dc=line.markedSpans;if(!_2dc){for(var i=0;i<st.length;i+=2){_2db.addToken(_2db,st[i],_2bb(st[i+1]));}return;}var _2dd=line.text,len=_2dd.length;var pos=0,i=0,text="",_2de;var _2df=0,_2e0,_2e1,_2e2,_2e3;for(;;){if(_2df==pos){_2e0=_2e1=_2e2="";_2e3=null;_2df=Infinity;var _2e4=null;for(var j=0;j<_2dc.length;++j){var sp=_2dc[j],m=sp.marker;if(sp.from<=pos&&(sp.to==null||sp.to>pos)){if(sp.to!=null&&_2df>sp.to){_2df=sp.to;_2e1="";}if(m.className){_2e0+=" "+m.className;}if(m.startStyle&&sp.from==pos){_2e2+=" "+m.startStyle;}if(m.endStyle&&sp.to==_2df){_2e1+=" "+m.endStyle;}if(m.collapsed&&(!_2e3||_2e3.marker.width<m.width)){_2e3=sp;}}else{if(sp.from>pos&&_2df>sp.from){_2df=sp.from;}}if(m.type=="bookmark"&&sp.from==pos&&m.replacedWith){_2e4=m.replacedWith;}}if(_2e3&&(_2e3.from||0)==pos){_2d8(_2db,(_2e3.to==null?len:_2e3.to)-pos,_2e3.from!=null&&_2e3.marker.replacedWith);if(_2e3.to==null){return _2e3.marker.find();}}if(_2e4&&!_2e3){_2d8(_2db,0,_2e4);}}if(pos>=len){break;}var upto=Math.min(len,_2df);while(true){if(text){var end=pos+text.length;if(!_2e3){var _2e5=end>upto?text.slice(0,upto-pos):text;_2db.addToken(_2db,_2e5,_2de+_2e0,_2e2,pos+_2e5.length==_2df?_2e1:"");}if(end>=upto){text=text.slice(upto-pos);pos=upto;break;}pos=end;_2e2="";}text=st[i++];_2de=_2bb(st[i++]);}}};function _1d(_2e6){this.lines=_2e6;this.parent=null;for(var i=0,e=_2e6.length,_2e7=0;i<e;++i){_2e6[i].parent=this;_2e7+=_2e6[i].height;}this.height=_2e7;};_1d.prototype={chunkSize:function(){return this.lines.length;},remove:function(at,n,cm){for(var i=at,e=at+n;i<e;++i){var line=this.lines[i];this.height-=line.height;_2ae(line);_74(cm,line,"delete");}this.lines.splice(at,n);},collapse:function(_2e8){_2e8.splice.apply(_2e8,[_2e8.length,0].concat(this.lines));},insertHeight:function(at,_2e9,_2ea){this.height+=_2ea;this.lines=this.lines.slice(0,at).concat(_2e9).concat(this.lines.slice(at));for(var i=0,e=_2e9.length;i<e;++i){_2e9[i].parent=this;}},iterN:function(at,n,op){for(var e=at+n;at<e;++at){if(op(this.lines[at])){return true;}}}};function _1c(_2eb){this.children=_2eb;var size=0,_2ec=0;for(var i=0,e=_2eb.length;i<e;++i){var ch=_2eb[i];size+=ch.chunkSize();_2ec+=ch.height;ch.parent=this;}this.size=size;this.height=_2ec;this.parent=null;};_1c.prototype={chunkSize:function(){return this.size;},remove:function(at,n,_2ed){this.size-=n;for(var i=0;i<this.children.length;++i){var _2ee=this.children[i],sz=_2ee.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),_2ef=_2ee.height;_2ee.remove(at,rm,_2ed);this.height-=_2ef-_2ee.height;if(sz==rm){this.children.splice(i--,1);_2ee.parent=null;}if((n-=rm)==0){break;}at=0;}else{at-=sz;}}if(this.size-n<25){var _2f0=[];this.collapse(_2f0);this.children=[new _1d(_2f0)];this.children[0].parent=this;}},collapse:function(_2f1){for(var i=0,e=this.children.length;i<e;++i){this.children[i].collapse(_2f1);}},insert:function(at,_2f2){var _2f3=0;for(var i=0,e=_2f2.length;i<e;++i){_2f3+=_2f2[i].height;}this.insertHeight(at,_2f2,_2f3);},insertHeight:function(at,_2f4,_2f5){this.size+=_2f4.length;this.height+=_2f5;for(var i=0,e=this.children.length;i<e;++i){var _2f6=this.children[i],sz=_2f6.chunkSize();if(at<=sz){_2f6.insertHeight(at,_2f4,_2f5);if(_2f6.lines&&_2f6.lines.length>50){while(_2f6.lines.length>50){var _2f7=_2f6.lines.splice(_2f6.lines.length-25,25);var _2f8=new _1d(_2f7);_2f6.height-=_2f8.height;this.children.splice(i+1,0,_2f8);_2f8.parent=this;}this.maybeSpill();}break;}at-=sz;}},maybeSpill:function(){if(this.children.length<=10){return;}var me=this;do{var _2f9=me.children.splice(me.children.length-5,5);var _2fa=new _1c(_2f9);if(!me.parent){var copy=new _1c(me.children);copy.parent=me;me.children=[copy,_2fa];me=copy;}else{me.size-=_2fa.size;me.height-=_2fa.height;var _2fb=_29d(me.parent.children,me);me.parent.children.splice(_2fb+1,0,_2fa);}_2fa.parent=me.parent;}while(me.children.length>10);me.parent.maybeSpill();},iter:function(from,to,op){this.iterN(from,to-from,op);},iterN:function(at,n,op){for(var i=0,e=this.children.length;i<e;++i){var _2fc=this.children[i],sz=_2fc.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(_2fc.iterN(at,used,op)){return true;}if((n-=used)==0){break;}at=0;}else{at-=sz;}}}};function _33(_2fd,n){while(!_2fd.lines){for(var i=0;;++i){var _2fe=_2fd.children[i],sz=_2fe.chunkSize();if(n<sz){_2fd=_2fe;break;}n-=sz;}}return _2fd.lines[n];};function _8a(line,_2ff){var diff=_2ff-line.height;for(var n=line;n;n=n.parent){n.height+=diff;}};function _7d(line){if(line.parent==null){return null;}var cur=line.parent,no=_29d(cur.lines,line);for(var _300=cur.parent;_300;cur=_300,_300=_300.parent){for(var i=0;;++i){if(_300.children[i]==cur){break;}no+=_300.children[i].chunkSize();}}return no;};function _5f(_301,h){var n=0;outer:do{for(var i=0,e=_301.children.length;i<e;++i){var _302=_301.children[i],ch=_302.height;if(h<ch){_301=_302;continue outer;}h-=ch;n+=_302.chunkSize();}return n;}while(!_301.lines);for(var i=0,e=_301.lines.length;i<e;++i){var line=_301.lines[i],lh=line.height;if(h<lh){break;}h-=lh;}return n+i;};function _8b(cm,_303){_303=_7e(cm.view.doc,_303);var h=0,_304=_303.parent;for(var i=0;i<_304.lines.length;++i){var line=_304.lines[i];if(line==_303){break;}else{h+=line.height;}}for(var p=_304.parent;p;_304=p,p=_304.parent){for(var i=0;i<p.children.length;++i){var cur=p.children[i];if(cur==_304){break;}else{h+=cur.height;}}}return h;};function _112(line){var _305=line.order;if(_305==null){_305=line.order=_306(line.text);}return _305;};function _24(){return {done:[],undone:[],lastTime:0,lastOp:null,lastOrigin:null,dirtyCounter:0};};function _1bb(cm,_307,_308,old,_309,_30a,_30b,_30c,_30d){var _30e=cm.view.history;_30e.undone.length=0;var time=+new Date,cur=lst(_30e.done);if(cur&&(_30e.lastOp==cm.curOp.id||_30e.lastOrigin==_309&&(_309=="input"||_309=="delete")&&_30e.lastTime>time-600)){var last=lst(cur.events);if(last.start>_307+old.length||last.start+last.added<_307){cur.events.push({start:_307,added:_308,old:old});}else{var _30f=Math.max(0,last.start-_307),_310=Math.max(0,(_307+old.length)-(last.start+last.added));for(var i=_30f;i>0;--i){last.old.unshift(old[i-1]);}for(var i=_310;i>0;--i){last.old.push(old[old.length-i]);}if(_30f){last.start=_307;}last.added+=_308-(old.length-_30f-_310);}cur.fromAfter=_30c;cur.toAfter=_30d;}else{cur={events:[{start:_307,added:_308,old:old}],fromBefore:_30a,toBefore:_30b,fromAfter:_30c,toAfter:_30d};_30e.done.push(cur);while(_30e.done.length>cm.options.undoDepth){_30e.done.shift();}if(_30e.dirtyCounter<0){_30e.dirtyCounter=NaN;}else{_30e.dirtyCounter++;}}_30e.lastTime=time;_30e.lastOp=cm.curOp.id;_30e.lastOrigin=_309;};function _311(){_312(this);};function _16b(_313){if(!_313.stop){_313.stop=_311;}return _313;};function _14d(e){if(e.preventDefault){e.preventDefault();}else{e.returnValue=false;}};function _314(e){if(e.stopPropagation){e.stopPropagation();}else{e.cancelBubble=true;}};function _312(e){_14d(e);_314(e);};_12.e_stop=_312;_12.e_preventDefault=_14d;_12.e_stopPropagation=_314;function _154(e){return e.target||e.srcElement;};function _169(e){var b=e.which;if(b==null){if(e.button&1){b=1;}else{if(e.button&2){b=3;}else{if(e.button&4){b=2;}}}}if(_f&&e.ctrlKey&&b==1){b=3;}return b;};function _15d(e,prop){var _315=e.override&&e.override.hasOwnProperty(prop);return _315?e.override[prop]:e[prop];};function on(_316,type,f){if(_316.addEventListener){_316.addEventListener(type,f,false);}else{if(_316.attachEvent){_316.attachEvent("on"+type,f);}else{var map=_316._handlers||(_316._handlers={});var arr=map[type]||(map[type]=[]);arr.push(f);}}};function off(_317,type,f){if(_317.removeEventListener){_317.removeEventListener(type,f,false);}else{if(_317.detachEvent){_317.detachEvent("on"+type,f);}else{var arr=_317._handlers&&_317._handlers[type];if(!arr){return;}for(var i=0;i<arr.length;++i){if(arr[i]==f){arr.splice(i,1);break;}}}}};function _139(_318,type){var arr=_318._handlers&&_318._handlers[type];if(!arr){return;}var args=Array.prototype.slice.call(arguments,2);for(var i=0;i<arr.length;++i){arr[i].apply(null,args);}};function _74(cm,_319,type){var arr=_319._handlers&&_319._handlers[type];if(!arr){return;}var args=Array.prototype.slice.call(arguments,3),_31a=cm.curOp&&cm.curOp.delayedCallbacks;function bnd(f){return function(){f.apply(null,args);};};for(var i=0;i<arr.length;++i){if(_31a){_31a.push(bnd(arr[i]));}else{arr[i].apply(null,args);}}};function _176(_31b,type){var arr=_31b._handlers&&_31b._handlers[type];return arr&&arr.length>0;};_12.on=on;_12.off=off;_12.signal=_139;var _2f=30;var Pass=_12.Pass={toString:function(){return "CodeMirror.Pass";}};function _31(){this.id=null;};_31.prototype={set:function(ms,f){clearTimeout(this.id);this.id=setTimeout(f,ms);}};function _ea(_31c,end,_31d){if(end==null){end=_31c.search(/[^\s\u00a0]/);if(end==-1){end=_31c.length;}}for(var i=0,n=0;i<end;++i){if(_31c.charAt(i)=="\t"){n+=_31d-(n%_31d);}else{++n;}}return n;};_12.countColumn=_ea;var _31e=[""];function _204(n){while(_31e.length<=n){_31e.push(lst(_31e)+" ");}return _31e[n];};function lst(arr){return arr[arr.length-1];};function _14b(node){if(_d){node.selectionStart=0;node.selectionEnd=node.value.length;}else{node.select();}};function _29d(_31f,elt){if(_31f.indexOf){return _31f.indexOf(elt);}for(var i=0,e=_31f.length;i<e;++i){if(_31f[i]==elt){return i;}}return -1;};function _100(size){for(var a=[],i=0;i<size;++i){a.push(undefined);}return a;};function _22(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args);};};var _320=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/;function _20f(ch){return /\w/.test(ch)||ch>""&&(ch.toUpperCase()!=ch.toLowerCase()||_320.test(ch));};function _22f(obj){var c=0;for(var n in obj){if(obj.hasOwnProperty(n)&&obj[n]){++c;}}return !c;};var _127=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\uA670-\uA672\uA674-\uA67D\uA69F]/;function elt(tag,_321,_322,_323){var e=document.createElement(tag);if(_322){e.className=_322;}if(_323){e.style.cssText=_323;}if(typeof _321=="string"){_a0(e,_321);}else{if(_321){for(var i=0;i<_321.length;++i){e.appendChild(_321[i]);}}}return e;};function _45(e){e.innerHTML="";return e;};function _d7(_324,e){return _45(_324).appendChild(e);};function _a0(e,str){if(_3){e.innerHTML="";e.appendChild(document.createTextNode(str));}else{e.textContent=str;}};var _325=function(){if(_3){return false;}var div=elt("div");return "draggable" in div||"dragDrop" in div;}();var _2d7=/^$/;if(_1){_2d7=/$'/;}else{if(_8){_2d7=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/;}else{if(_6){_2d7=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/;}}}var _326;function _59(_327){if(_326!=null){return _326;}var test=elt("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");_d7(_327,test);if(test.offsetWidth){_326=test.offsetHeight-test.clientHeight;}return _326||0;};var _328;function _2c6(_329){if(_328==null){var test=elt("span","​");_d7(_329,elt("span",[test,document.createTextNode("x")]));if(_329.firstChild.offsetHeight!=0){_328=test.offsetWidth<=1&&test.offsetHeight>2&&!_2;}}if(_328){return elt("span","​");}else{return elt("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");}};var _147="\n\nb".split(/\n/).length!=3?function(_32a){var pos=0,_32b=[],l=_32a.length;while(pos<=l){var nl=_32a.indexOf("\n",pos);if(nl==-1){nl=_32a.length;}var line=_32a.slice(pos,_32a.charAt(nl-1)=="\r"?nl-1:nl);var rt=line.indexOf("\r");if(rt!=-1){_32b.push(line.slice(0,rt));pos+=rt+1;}else{_32b.push(line);pos=nl+1;}}return _32b;}:function(_32c){return _32c.split(/\r\n?|\n/);};_12.splitLines=_147;var _143=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd;}catch(e){return false;}}:function(te){try{var _32d=te.ownerDocument.selection.createRange();}catch(e){}if(!_32d||_32d.parentElement()!=te){return false;}return _32d.compareEndPoints("StartToEnd",_32d)!=0;};var _14a=(function(){var e=elt("div");if("oncopy" in e){return true;}e.setAttribute("oncopy","return;");return typeof e.oncopy=="function";})();var _266={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};_12.keyNames=_266;(function(){for(var i=0;i<10;i++){_266[i+48]=String(i);}for(var i=65;i<=90;i++){_266[i]=String.fromCharCode(i);}for(var i=1;i<=12;i++){_266[i+111]=_266[i+63235]="F"+i;}})();function _32e(_32f,from,to,f){if(!_32f){return f(from,to,"ltr");}for(var i=0;i<_32f.length;++i){var part=_32f[i];if(part.from<to&&part.to>from){f(Math.max(part.from,from),Math.min(part.to,to),part.level==1?"rtl":"ltr");}}};function _330(part){return part.level%2?part.to:part.from;};function _331(part){return part.level%2?part.from:part.to;};function _123(line){var _332=_112(line);return _332?_330(_332[0]):0;};function _11c(line){var _333=_112(line);if(!_333){return line.text.length;}return _331(lst(_333));};function _25c(cm,_334){var line=_33(cm.view.doc,_334);var _335=_7e(cm.view.doc,line);if(_335!=line){_334=_7d(_335);}var _336=_112(_335);var ch=!_336?0:_336[0].level%2?_11c(_335):_123(_335);return {line:_334,ch:ch};};function _260(cm,_337){var _338,line;while(_338=_4d(line=_33(cm.view.doc,_337))){_337=_338.find().to.line;}var _339=_112(line);var ch=!_339?line.text.length:_339[0].level%2?_123(line):_11c(line);return {line:_337,ch:ch};};function _125(line,_33a,dir,_33b){var bidi=_112(line);if(!bidi){return _20d(line,_33a,dir,_33b);}var _33c=_33b?function(pos,dir){do{pos+=dir;}while(pos>0&&_127.test(line.text.charAt(pos)));return pos;}:function(pos,dir){return pos+dir;};var _33d=bidi[0].level;for(var i=0;i<bidi.length;++i){var part=bidi[i],_33e=part.level%2==_33d;if((part.from<_33a&&part.to>_33a)||(_33e&&(part.from==_33a||part.to==_33a))){break;}}var _33f=_33c(_33a,part.level%2?-dir:dir);while(_33f!=null){if(part.level%2==_33d){if(_33f<part.from||_33f>part.to){part=bidi[i+=dir];_33f=part&&(dir>0==part.level%2?_33c(part.to,-1):_33c(part.from,1));}else{break;}}else{if(_33f==_330(part)){part=bidi[--i];_33f=part&&_331(part);}else{if(_33f==_331(part)){part=bidi[++i];_33f=part&&_330(part);}else{break;}}}}return _33f<0||_33f>line.text.length?null:_33f;};function _20d(line,_340,dir,_341){var _342=_340+dir;if(_341){while(_342>0&&_127.test(line.text.charAt(_342))){_342+=dir;}}return _342<0||_342>line.text.length?null:_342;};var _306=(function(){var _343="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL";var _344="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr";function _345(code){if(code<=255){return _343.charAt(code);}else{if(1424<=code&&code<=1524){return "R";}else{if(1536<=code&&code<=1791){return _344.charAt(code-1536);}else{if(1792<=code&&code<=2220){return "r";}else{return "L";}}}}};var _346=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;var _347=/[stwN]/,_348=/[LRr]/,_349=/[Lb1n]/,_34a=/[1n]/;return function charOrdering(str){if(!_346.test(str)){return false;}var len=str.length,_34b=[],_34c=null;for(var i=0,type;i<len;++i){_34b.push(type=_345(str.charCodeAt(i)));if(_34c==null){if(type=="L"){_34c="L";}else{if(type=="R"||type=="r"){_34c="R";}}}}if(_34c==null){_34c="L";}for(var i=0,prev=_34c;i<len;++i){var type=_34b[i];if(type=="m"){_34b[i]=prev;}else{prev=type;}}for(var i=0,cur=_34c;i<len;++i){var type=_34b[i];if(type=="1"&&cur=="r"){_34b[i]="n";}else{if(_348.test(type)){cur=type;if(type=="r"){_34b[i]="R";}}}}for(var i=1,prev=_34b[0];i<len-1;++i){var type=_34b[i];if(type=="+"&&prev=="1"&&_34b[i+1]=="1"){_34b[i]="1";}else{if(type==","&&prev==_34b[i+1]&&(prev=="1"||prev=="n")){_34b[i]=prev;}}prev=type;}for(var i=0;i<len;++i){var type=_34b[i];if(type==","){_34b[i]="N";}else{if(type=="%"){for(var end=i+1;end<len&&_34b[end]=="%";++end){}var _34d=(i&&_34b[i-1]=="!")||(end<len-1&&_34b[end]=="1")?"1":"N";for(var j=i;j<end;++j){_34b[j]=_34d;}i=end-1;}}}for(var i=0,cur=_34c;i<len;++i){var type=_34b[i];if(cur=="L"&&type=="1"){_34b[i]="L";}else{if(_348.test(type)){cur=type;}}}for(var i=0;i<len;++i){if(_347.test(_34b[i])){for(var end=i+1;end<len&&_347.test(_34b[end]);++end){}var _34e=(i?_34b[i-1]:_34c)=="L";var _34f=(end<len-1?_34b[end]:_34c)=="L";var _34d=_34e||_34f?"L":"R";for(var j=i;j<end;++j){_34b[j]=_34d;}i=end-1;}}var _350=[],m;for(var i=0;i<len;){if(_349.test(_34b[i])){var _351=i;for(++i;i<len&&_349.test(_34b[i]);++i){}_350.push({from:_351,to:i,level:0});}else{var pos=i,at=_350.length;for(++i;i<len&&_34b[i]!="L";++i){}for(var j=pos;j<i;){if(_34a.test(_34b[j])){if(pos<j){_350.splice(at,0,{from:pos,to:j,level:1});}var _352=j;for(++j;j<i&&_34a.test(_34b[j]);++j){}_350.splice(at,0,{from:_352,to:j,level:2});pos=j;}else{++j;}}if(pos<i){_350.splice(at,0,{from:pos,to:i,level:1});}}}if(_350[0].level==1&&(m=str.match(/^\s+/))){_350[0].from=m[0].length;_350.unshift({from:0,to:m[0].length,level:0});}if(lst(_350).level==1&&(m=str.match(/\s+$/))){lst(_350).to-=m[0].length;_350.push({from:len-m[0].length,to:len,level:0});}if(_350[0].level!=lst(_350).level){_350.push({from:len,to:len,level:_350[0].level});}return _350;};})();_12.version="3.0";return _12;})();